{"version":3,"sources":["../node_modules/bitcoinjs-lib/src/script.js","../node_modules/typeforce/index.js","../node_modules/bitcoinjs-lib/src/networks.js","../node_modules/bip174/src/lib/typeFields.js","../node_modules/bitcoinjs-lib/src/types.js","../node_modules/bitcoinjs-lib/src/crypto.js","../node_modules/tiny-secp256k1/js.js","../node_modules/bitcoinjs-lib/src/payments/lazy.js","../node_modules/bs58check/index.js","../node_modules/bitcoinjs-lib/src/payments/index.js","../node_modules/bitcoinjs-lib/src/bufferutils.js","../node_modules/bitcoinjs-lib/src/transaction.js","../node_modules/bip174/src/lib/converter/varint.js","../node_modules/react-bootstrap/esm/ListGroupItem.js","../node_modules/react-bootstrap/esm/ListGroup.js","../node_modules/scryptsy/lib/scrypt.js","../node_modules/typeforce/native.js","../node_modules/bitcoinjs-lib/src/address.js","../node_modules/bitcoinjs-lib/src/ecpair.js","../node_modules/varuint-bitcoin/index.js","../node_modules/bip174/src/lib/converter/index.js","../node_modules/bip174/src/lib/converter/tools.js","../node_modules/bitcoinjs-lib/src/templates/multisig/index.js","../node_modules/bitcoinjs-lib/src/templates/pubkey/index.js","../node_modules/bitcoinjs-lib/src/templates/pubkeyhash/index.js","../node_modules/typeforce/errors.js","../node_modules/wif/index.js","../node_modules/bip174/src/lib/parser/index.js","../node_modules/bip174/src/lib/utils.js","../node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/output.js","../node_modules/bitcoinjs-lib/src/templates/witnessscripthash/output.js","../node_modules/qr.js/lib/mode.js","../node_modules/qr.js/lib/ErrorCorrectLevel.js","../node_modules/qr.js/lib/Polynomial.js","../node_modules/qr.js/lib/math.js","../node_modules/bitcoinjs-lib/src/index.js","../node_modules/bip32/src/index.js","../node_modules/bip32/src/bip32.js","../node_modules/bip32/src/crypto.js","../node_modules/bs58check/base.js","../node_modules/bs58/index.js","../node_modules/tiny-secp256k1/rfc6979.js","../node_modules/typeforce/extra.js","../node_modules/bitcoinjs-lib/src/payments/embed.js","../node_modules/bitcoinjs-lib/src/script_number.js","../node_modules/bitcoinjs-lib/src/script_signature.js","../node_modules/pushdata-bitcoin/index.js","../node_modules/bitcoin-ops/map.js","../node_modules/bitcoinjs-lib/src/payments/p2ms.js","../node_modules/bitcoinjs-lib/src/payments/p2pk.js","../node_modules/bitcoinjs-lib/src/payments/p2pkh.js","../node_modules/bitcoinjs-lib/src/payments/p2sh.js","../node_modules/bitcoinjs-lib/src/payments/p2wpkh.js","../node_modules/bitcoinjs-lib/src/payments/p2wsh.js","../node_modules/bitcoinjs-lib/src/block.js","../node_modules/merkle-lib/fastRoot.js","../node_modules/bitcoinjs-lib/src/psbt.js","../node_modules/bip174/src/lib/psbt.js","../node_modules/bip174/src/lib/combiner/index.js","../node_modules/bip174/src/lib/parser/fromBuffer.js","../node_modules/bip174/src/lib/converter/global/globalXpub.js","../node_modules/bip174/src/lib/converter/global/unsignedTx.js","../node_modules/bip174/src/lib/converter/input/finalScriptSig.js","../node_modules/bip174/src/lib/converter/input/finalScriptWitness.js","../node_modules/bip174/src/lib/converter/input/nonWitnessUtxo.js","../node_modules/bip174/src/lib/converter/input/partialSig.js","../node_modules/bip174/src/lib/converter/input/porCommitment.js","../node_modules/bip174/src/lib/converter/input/sighashType.js","../node_modules/bip174/src/lib/converter/input/witnessUtxo.js","../node_modules/bip174/src/lib/converter/shared/bip32Derivation.js","../node_modules/bip174/src/lib/converter/shared/checkPubkey.js","../node_modules/bip174/src/lib/converter/shared/redeemScript.js","../node_modules/bip174/src/lib/converter/shared/witnessScript.js","../node_modules/bip174/src/lib/parser/toBuffer.js","../node_modules/bitcoinjs-lib/src/transaction_builder.js","../node_modules/bitcoinjs-lib/src/classify.js","../node_modules/bitcoinjs-lib/src/templates/multisig/input.js","../node_modules/bitcoinjs-lib/src/templates/multisig/output.js","../node_modules/bitcoinjs-lib/src/templates/nulldata.js","../node_modules/bitcoinjs-lib/src/templates/pubkey/input.js","../node_modules/bitcoinjs-lib/src/templates/pubkey/output.js","../node_modules/bitcoinjs-lib/src/templates/pubkeyhash/input.js","../node_modules/bitcoinjs-lib/src/templates/pubkeyhash/output.js","../node_modules/bitcoinjs-lib/src/templates/scripthash/index.js","../node_modules/bitcoinjs-lib/src/templates/scripthash/input.js","../node_modules/bitcoinjs-lib/src/templates/scripthash/output.js","../node_modules/bitcoinjs-lib/src/templates/witnesscommitment/index.js","../node_modules/bitcoinjs-lib/src/templates/witnesscommitment/output.js","../node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/index.js","../node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/input.js","../node_modules/bitcoinjs-lib/src/templates/witnessscripthash/index.js","../node_modules/bitcoinjs-lib/src/templates/witnessscripthash/input.js","../node_modules/qrcode.react/lib/index.js","../node_modules/qr.js/lib/QRCode.js","../node_modules/qr.js/lib/8BitByte.js","../node_modules/qr.js/lib/RSBlock.js","../node_modules/qr.js/lib/BitBuffer.js","../node_modules/qr.js/lib/util.js"],"names":["Object","defineProperty","exports","value","scriptNumber","require","scriptSignature","types","bip66","ecc","pushdata","typeforce","OPS","REVERSE_OPS","OP_INT_BASE","OP_RESERVED","isPushOnlyChunk","Buffer","Number","OP_0","OP_1","OP_16","OP_1NEGATE","isOPInt","isPushOnly","Array","every","asMinimalOP","buffer","length","chunksIsBuffer","buf","isBuffer","singleChunkIsBuffer","compile","chunks","bufferSize","reduce","accum","chunk","undefined","encodingLength","allocUnsafe","offset","forEach","opcode","writeUInt8","encode","copy","Error","decompile","i","OP_PUSHDATA4","d","decode","size","number","data","slice","op","push","isDefinedHashType","hashType","hashTypeMod","toASM","map","toString","join","fromASM","asm","String","split","chunkStr","Hex","from","toStack","isCanonicalPubKey","isPoint","isCanonicalScriptSignature","check","signature","ERRORS","NATIVE","tfJSON","TfTypeError","TfPropertyTypeError","tfSubError","getValueTypeName","TYPES","arrayOf","type","options","_arrayOf","array","strict","Nil","minLength","maxLength","e","toJSON","str","Infinity","maybe","_maybe","propertyType","propertyKeyType","_map","propertyName","propertyValue","object","uncompiled","typePropertyName","_object","anyOf","call","arguments","_anyOf","some","allOf","_allOf","quacksLike","_quacksLike","tuple","_tuple","values","expected","_value","actual","TypeError","Function","surrogate","typeName","oneOf","EXTRA","module","bitcoin","messagePrefix","bech32","bip32","public","private","pubKeyHash","scriptHash","wif","regtest","testnet","GlobalTypes","GLOBAL_TYPE_NAMES","InputTypes","INPUT_TYPE_NAMES","OutputTypes","OUTPUT_TYPE_NAMES","UINT31_MAX","Math","pow","BIP32Path","match","UInt31","UInt32","Signer","obj","publicKey","getPublicKey","sign","Satoshi","UInt53","ECPoint","Network","UInt8","Buffer256bit","BufferN","Hash160bit","Hash256bit","Boolean","Null","createHash","ripemd160","update","digest","err","sha256","sha1","hash160","hash256","BN","secp256k1","EC","ec","deterministicGenerateK","ZERO32","alloc","EC_GROUP_ORDER","EC_P","n","curve","nDiv2","shrn","G","g","THROW_BAD_PRIVATE","THROW_BAD_POINT","THROW_BAD_TWEAK","THROW_BAD_HASH","isScalar","x","isOrderScalar","compare","p","t","decodeFrom","y","__isPointCompressed","isPrivate","assumeCompression","pubkey","fromBuffer","toBuffer","toArrayLike","P","decodePoint","getEncoded","compressed","_encode","__sign","hash","addData","r","s","k","kI","Q","mul","isInfinity","umod","isZero","invm","add","cmp","sub","isPointCompressed","pointAdd","pA","pB","__compressed","a","b","pp","pointAddScalar","tweak","tt","qq","uu","pointCompress","pointFromScalar","dd","pointMultiply","privateAdd","dt","privateSub","signWithEntropy","verify","q","isSignature","gtn","sInv","u1","u2","R","mulAdd","eq","prop","name","f","configurable","enumerable","get","this","set","writable","bs58checkBase","tmp","embed_1","embed","p2data","p2ms_1","p2ms","p2pk_1","p2pk","p2pkh_1","p2pkh","p2sh_1","p2sh","p2wpkh_1","p2wpkh","p2wsh_1","p2wsh","varuint","verifuint","max","floor","readUInt64LE","readUInt32LE","writeUInt64LE","writeInt32LE","writeUInt32LE","reverseBuffer","j","cloneBuffer","clone","BufferWriter","bytes","writeVarInt","writeSlice","vector","writeVarSlice","BufferReader","result","readUInt8","readInt32LE","vi","readSlice","readVarInt","count","readVarSlice","bufferutils_1","bcrypto","bscript","script_1","varSliceSize","someScript","vectorSize","someVector","sum","witness","EMPTY_SCRIPT","EMPTY_WITNESS","ZERO","ONE","VALUE_UINT64_MAX","BLANK_OUTPUT","script","valueBuffer","isOutput","out","Transaction","version","locktime","ins","outs","isCoinbaseHash","index","sequence","scriptSig","DEFAULT_SEQUENCE","scriptPubKey","byteLength","ceil","weight","_ALLOW_WITNESS","hasWitnesses","input","output","newTx","txIn","txOut","inIndex","prevOutScript","ourScript","filter","OP_CODESEPARATOR","txTmp","SIGHASH_NONE","SIGHASH_SINGLE","SIGHASH_ANYONECANPAY","__toBuffer","bufferWriter","tbuffer","hashOutputs","hashPrevouts","hashSequence","writeUInt32","txOutsSize","writeUInt64","forWitness","isCoinbase","getHash","initialOffset","writeInt32","ADVANCED_TRANSACTION_MARKER","ADVANCED_TRANSACTION_FLAG","writeVector","_NO_STRICT","bufferReader","tx","readInt32","marker","flag","vinLen","readUInt32","voutLen","readUInt64","readVector","hex","SIGHASH_ALL","checkUInt53","RangeError","_number","assign","writeUInt16LE","first","readUInt16LE","lo","ListGroupItem","React","ref","bsPrefix","active","disabled","eventKey","className","variant","action","as","props","useBootstrapPrefix","useNavItem","key","makeEventKey","href","navItemProps","meta","handleClick","useEventCallback","event","preventDefault","stopPropagation","onClick","tabIndex","Component","_jsx","classNames","isActive","displayName","ListGroup","horizontalVariant","useUncontrolled","activeKey","initialBsPrefix","horizontal","controlledProps","BaseNav","Item","pbkdf2Sync","MAX_VALUE","arraycopy","src","srcPos","dest","destPos","salt","N","dkLen","progressCallback","tickCallback","XY","V","B32","Int32Array","_X","B","totalOps","currentOp","current","total","percent","smix","Bi","Yi","blockmix_salsa8","blockxor","BY","salsa20_8","bi","S","Si","D","Di","len","constructor","bind","networks","payments","bs58check","fromBase58Check","address","payload","fromBech32","fromWords","words","prefix","toBase58Check","toBech32","toWords","unshift","fromOutputScript","network","toOutputScript","decodeBase58","decodeBech32","NETWORKS","randomBytes","isOptions","ECPair","__D","__Q","lowR","sig","extraData","counter","writeUIntLE","fromPrivateKey","fromPublicKey","fromWIF","wifString","decoded","pop","privateKey","makeRandom","rng","typeFields_1","globalXpub","unsignedTx","finalScriptSig","finalScriptWitness","nonWitnessUtxo","partialSig","porCommitment","sighashType","witnessUtxo","bip32Derivation","checkPubkey","redeemScript","witnessScript","globals","makeChecker","inputs","makeConverter","BIP32_DERIVATION","REDEEM_SCRIPT","WITNESS_SCRIPT","PARTIAL_SIG","outputs","keyValToBuffer","keyVal","keyLen","valLen","keyVarIntLen","valVarIntLen","range","keys","keyValsToBuffer","keyVals","buffers","concat","native","getTypeName","fn","captureStackTrace","tfErrorString","valueTypeName","valueJson","JSON","stringify","getValue","message","__type","__value","__valueTypeName","property","label","description","tfPropertyErrorString","__label","__property","prototype","create","tfCustomError","decodeRaw","encodeRaw","string","__export","m","hasOwnProperty","converter","checkForInput","inputIndex","throwForUpdateMaker","updateMaker","updateData","mainData","canAdd","canAddToArray","isArray","arr","dupeCheckSet","Set","v","checkForOutput","outputIndex","checkHasKey","checkKeyVal","enumLength","kv","equals","getEnumLength","myenum","val","isNaN","inputCheckUncleanFinalized","needScriptSig","needWitnessScript","scriptSigOK","witnessScriptOK","hasOneFinal","updateGlobal","updateInput","updateOutput","addInputAttributes","addOutputAttributes","defaultVersionSetter","txBuf","defaultLocktimeSetter","MODE_NUMBER","MODE_ALPHA_NUM","MODE_8BIT_BYTE","MODE_KANJI","L","M","H","math","QRPolynomial","num","shift","getLength","multiply","gexp","glog","mod","ratio","QRMath","LOG_TABLE","EXP_TABLE","crypto","block_1","Block","psbt_1","Psbt","opcodes","transaction_1","transaction_builder_1","TransactionBuilder","bip32_1","fromSeed","fromBase58","UINT256_TYPE","NETWORK_TYPE","BITCOIN","HIGHEST_BIT","BIP32","chainCode","__DEPTH","__INDEX","__PARENT_FINGERPRINT","identifier","fromPublicKeyLocal","depth","parentFingerprint","isNeutered","writeUInt32BE","isHardened","hd","I","hmacSHA512","IL","IR","derive","Ki","fingerprint","readUInt32BE","ki","fromPrivateKeyLocal","path","splitPath","prevHd","indexStr","parseInt","deriveHardened","inString","seed","createHmac","sha256Hash","base58","checksumFn","checksum","newChecksum","decodeUnsafe","basex","ONE1","ZERO1","checkSig","extraEntropy","T","_Buffer","test","_LengthN","Length","_ArrayN","_BufferN","_HexN","_StringN","INT53_MAX","ArrayN","Finite","isFinite","HexN","Int8","Int16","Int32","Int53","Range","_range","StringN","UInt16","networks_1","lazy","typef","opts","validate","o","OP_RETURN","stacksEqual","minimal","abs","scriptNumSize","negative","toDER","fromDER","bstart","hashTypeBuffer","OP_PUSHDATA1","OP_PUSHDATA2","pubkeys","signatures","isAcceptableSignature","allowIncomplete","OP_CHECKMULTISIG","_chunks","OP_CHECKSIG","_address","OP_DUP","OP_HASH160","OP_EQUALVERIFY","hash2","pkh","redeem","_redeem","OP_EQUAL","nameParts","checkRedeem","hasInput","hasWitness","richunks","EMPTY_BUFFER","chunkHasUncompressedPubkey","_rchunks","stack","wScript","fastMerkleRoot","errorMerkleNoTxes","errorWitnessNotSegwit","prevHash","merkleRoot","timestamp","witnessCommit","bits","nonce","transactions","txesHaveWitnessCommit","witnessCommits","getWitnessCommit","headersOnly","allowWitness","date","Date","setUTCSeconds","txSize","hasWitnessCommit","__checkMerkleRoot","__checkWitnessCommit","target","calculateTarget","actualMerkleRoot","calculateMerkleRoot","actualWitnessCommit","block","readTransaction","nTransactions","exponent","mantissa","writeUIntBE","hashes","transaction","rootHash","digestFn","results","left","right","bip174_1","utils_1","address_1","crypto_1","ecpair_1","DEFAULT_OPTS","maximumFeeRate","PsbtTransaction","__CACHE","__NON_WITNESS_UTXO_TX_CACHE","__NON_WITNESS_UTXO_BUF_CACHE","__TX_IN_CACHE","__TX","globalMap","__UNSAFE_SIGN_NONSEGWIT","setVersion","dpew","attr","setLocktime","_","those","combine","res","parse","satoshiPerByte","check32Bit","checkInputsForPartialSig","c","__EXTRACTED_TX","inputDatas","inputData","addInput","checkInvalidP2WSH","checkTxInputCache","addNonWitnessTxCache","__FEE","__FEE_RATE","outputDatas","outputData","addOutput","disableFeeCheck","isFinalized","psbt","cache","feeRate","getFeeRate","vsize","virtualSize","satoshis","toFixed","checkFees","inputFinalizeGetAmts","getTxCacheValue","idx","finalizeInput","finalScriptsFunc","getFinalScripts","getScriptFromInput","isP2SH","isP2WSH","isSegwit","checkPartialSigSighashes","clearFinalizedInput","getMeaningfulScript","getScriptFromUtxo","finalScript","decomp","lastItem","isPubkeyLike","redeemFromFinalScriptSig","scriptWitnessToWitnessStack","redeemFromFinalWitnessScript","classifyScript","meaningfulScript","pubkeyInScript","pubkeyInInput","root","derivationIsMine","bip32DerivationIsMine","pubkeyInOutput","validateSignaturesOfInput","final","mySigs","hashCache","scriptCache","sighashCache","pSig","getHashForSig","checkScriptForPubkey","keypair","hdKeyPair","sighashTypes","signInputHD","Promise","resolve","reject","promises","signInputHDAsync","then","all","signers","getSignersFromHD","signer","signInput","signInputAsync","catch","keyPair","entries","getHashAndSighashType","checkCache","toHex","toBase64","addUnknownKeyValToGlobal","addUnknownKeyValToInput","addUnknownKeyValToOutput","psbtBase","transactionFromBuffer","checkTxForDupeIns","checkTxEmpty","inputCount","outputCount","hasSigs","neededSigs","sigs","pkey","find","isPaymentFactory","payment","isP2MS","isP2PK","isP2PKH","isP2WPKH","isP2WSHScript","isP2SHScript","masterFingerprint","derivePath","throws","pSigs","scriptItems","witnessItems","item","getPsigsFromInputFinalScripts","whitelist","indexOf","scriptCheckerFactory","paymentScriptName","ioType","redeemScriptOutput","checkRedeemScript","checkWitnessScript","mustFinalize","scriptType","canFinalize","pk","ps","getSortedSigs","getPayment","witnessStackToScriptWitness","prepareFinalScripts","forValidate","prevout","text","sighashTypeToString","nonWitnessUtxoTx","nonWitnessUtxoTxFromCache","prevoutHash","utxoHash","prevoutIndex","hashForWitnessV0","signingScript","console","warn","hashForSignature","myDerivations","bipDv","node","currentLen","varintLen","self","selfIndex","txCache","newBuf","inputAmount","nwTx","vout","outputAmount","fee","isP2SHP2WSH","pubkeyHash","decompiled","element","combiner_1","parser_1","psbtToBuffer","unknownKeyVals","addKeyVals","includes","txFromBuffer","psbtFromBuffer","keyPusher","selfSet","selfKeyVals","otherKeyVals","has","newKv","getTx","getKeySet","psbts","psbtToKeyVals","others","selfTx","selfGlobalSet","globalKeyVals","selfInputSets","inputKeyVals","selfOutputSets","outputKeyVals","other","otherTx","inputSet","outputSet","psbtFromKeyVals","globalMapKeyVals","convert","tools_1","checkKeyBuffer","keyBuf","keyNum","txCount","UNSIGNED_TX","GLOBAL_XPUB","NON_WITNESS_UTXO","WITNESS_UTXO","SIGHASH_TYPE","FINAL_SCRIPTSIG","FINAL_SCRIPTWITNESS","POR_COMMITMENT","txGetter","varSlice","getKeyValue","checkEndOfKeyValPairs","isEnd","globalKeyIndex","hexKey","unsignedTxMaps","getInputOutputCounts","inputKeyIndex","outputKeyIndex","extendedPubkey","isHard","head","level","epk","mfp","dupeSet","dupeString","currentData","newData","rLen","sLen","isDerSigWithSighash","_offset","scriptLen","TYPE_BYTE","pubkeyTypes","globalBuffer","keyValsOrEmptyToBuffer","inputBuffers","outputBuffers","header","sortKeyVals","keyValsFromMap","keyValMap","converterFactory","keyHexSet","encodedKeyVals","sort","baddress","classify","SCRIPT_TYPES","PREVOUT_TYPES","tfMessage","__PREV_TX_SET","__INPUTS","__USE_LOW_R","setting","txHash","__canModifyInputs","txIsTransaction","__addInputUnsafe","__canModifyOutputs","__build","signParams","witnessValue","ourPubKey","signatureHash","useLowR","signed","pubKey","trySign","needsOutputs","vin","prevOutScriptType","prevOutType","posType","checkSignArgs","canSign","prepared","p2wshAlt","p2shAlt","expanded","expandOutput","signScript","P2WPKH","redeemScriptType","P2WSH","witnessScriptType","P2SH","signType","maxSignatures","P2PKH","prepareInput","getSigningData","__needsOutputs","prevTxOut","expandInput","build","setInputScript","setWitness","NONSTANDARD","__overMaximumFees","signatureHashType","signingHashType","nInputs","nOutputs","txb","setLockTime","P2MS","unmatched","parsed","fixMultisigOrder","witnessStack","ssType","wsType","P2PK","outputType","pkh1","pkh2","wpkh1","wpkh2","multisig","nullData","witnessCommitment","witnessPubKeyHash","witnessScriptHash","NULLDATA","WITNESS_COMMITMENT","partialSignature","p2wpkho","p2wsho","lastChunk","scriptSigChunks","redeemScriptChunks","HEADER","commitment","witnessScriptChunks","witnessRawScriptSig","_typeof","Symbol","iterator","_extends","source","apply","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_classCallCheck","instance","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","_assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","_setPrototypeOf","QRCodeImpl","ErrorCorrectLevel","convertStr","charcode","charCodeAt","fromCharCode","DEFAULT_PROPS","bgColor","fgColor","includeMargin","generatePath","modules","margin","ops","row","start","cell","excavateModules","excavation","h","w","getImageSettings","cells","imageSettings","numCells","defaultSize","scale","width","height","excavate","floorX","floorY","SUPPORTS_PATH2D","Path2D","addPath","QRCodeCanvas","_React$PureComponent","_getPrototypeOf2","_this","_len","args","_key","imgLoaded","setState","_image","complete","handleImageLoad","nextProps","_this$props$imageSett","_nextProps$imageSetti","_this$props","qrcode","make","_canvas","canvas","ctx","getContext","calculatedImageSettings","pixelRatio","window","devicePixelRatio","fillStyle","fillRect","fill","rdx","cdx","state","drawImage","_this2","_this$props2","style","otherProps","canvasStyle","img","imgSrc","createElement","display","onLoad","_ref","Fragment","_ref2","PureComponent","QRCodeSVG","_React$PureComponent2","_this$props3","image","xlinkHref","preserveAspectRatio","fgPath","shapeRendering","viewBox","QRCode","renderAs","defaultProps","BitByte","RSBlock","BitBuffer","util","Polynomial","typeNumber","errorCorrectLevel","moduleCount","dataCache","dataList","proto","isDark","col","getModuleCount","rsBlocks","getRSBlocks","totalDataCount","dataCount","put","mode","getLengthInBits","write","makeImpl","getBestMaskPattern","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","qr_mc","createEmptyMovieClip","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","getBCHTypeNumber","getBCHTypeInfo","inc","bitIndex","byteIndex","dark","getMask","PAD0","PAD1","putBit","createBytes","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","rsPoly","getErrorCorrectPolynomial","modPoly","modIndex","totalCodeCount","QR8bitByte","ECL","QRRSBlock","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","QRBitBuffer","bufIndex","bit","Mode","QRMaskPattern","QRUtil","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","errorCorrectLength","qrCode","sameCount","darkCount"],"mappings":"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","file":"static/js/15.51043ea7.chunk.js","sourcesContent":["'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst scriptNumber = require('./script_number');\nconst scriptSignature = require('./script_signature');\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst ecc = require('tiny-secp256k1');\nconst pushdata = require('pushdata-bitcoin');\nconst typeforce = require('typeforce');\nexports.OPS = require('bitcoin-ops');\nconst REVERSE_OPS = require('bitcoin-ops/map');\nconst OP_INT_BASE = exports.OPS.OP_RESERVED; // OP_1 - 1\nfunction isOPInt(value) {\n  return (\n    types.Number(value) &&\n    (value === exports.OPS.OP_0 ||\n      (value >= exports.OPS.OP_1 && value <= exports.OPS.OP_16) ||\n      value === exports.OPS.OP_1NEGATE)\n  );\n}\nfunction isPushOnlyChunk(value) {\n  return types.Buffer(value) || isOPInt(value);\n}\nfunction isPushOnly(value) {\n  return types.Array(value) && value.every(isPushOnlyChunk);\n}\nexports.isPushOnly = isPushOnly;\nfunction asMinimalOP(buffer) {\n  if (buffer.length === 0) return exports.OPS.OP_0;\n  if (buffer.length !== 1) return;\n  if (buffer[0] >= 1 && buffer[0] <= 16) return OP_INT_BASE + buffer[0];\n  if (buffer[0] === 0x81) return exports.OPS.OP_1NEGATE;\n}\nfunction chunksIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction chunksIsArray(buf) {\n  return types.Array(buf);\n}\nfunction singleChunkIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction compile(chunks) {\n  // TODO: remove me\n  if (chunksIsBuffer(chunks)) return chunks;\n  typeforce(types.Array, chunks);\n  const bufferSize = chunks.reduce((accum, chunk) => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      if (chunk.length === 1 && asMinimalOP(chunk) !== undefined) {\n        return accum + 1;\n      }\n      return accum + pushdata.encodingLength(chunk.length) + chunk.length;\n    }\n    // opcode\n    return accum + 1;\n  }, 0.0);\n  const buffer = Buffer.allocUnsafe(bufferSize);\n  let offset = 0;\n  chunks.forEach(chunk => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      const opcode = asMinimalOP(chunk);\n      if (opcode !== undefined) {\n        buffer.writeUInt8(opcode, offset);\n        offset += 1;\n        return;\n      }\n      offset += pushdata.encode(buffer, chunk.length, offset);\n      chunk.copy(buffer, offset);\n      offset += chunk.length;\n      // opcode\n    } else {\n      buffer.writeUInt8(chunk, offset);\n      offset += 1;\n    }\n  });\n  if (offset !== buffer.length) throw new Error('Could not decode chunks');\n  return buffer;\n}\nexports.compile = compile;\nfunction decompile(buffer) {\n  // TODO: remove me\n  if (chunksIsArray(buffer)) return buffer;\n  typeforce(types.Buffer, buffer);\n  const chunks = [];\n  let i = 0;\n  while (i < buffer.length) {\n    const opcode = buffer[i];\n    // data chunk\n    if (opcode > exports.OPS.OP_0 && opcode <= exports.OPS.OP_PUSHDATA4) {\n      const d = pushdata.decode(buffer, i);\n      // did reading a pushDataInt fail?\n      if (d === null) return null;\n      i += d.size;\n      // attempt to read too much data?\n      if (i + d.number > buffer.length) return null;\n      const data = buffer.slice(i, i + d.number);\n      i += d.number;\n      // decompile minimally\n      const op = asMinimalOP(data);\n      if (op !== undefined) {\n        chunks.push(op);\n      } else {\n        chunks.push(data);\n      }\n      // opcode\n    } else {\n      chunks.push(opcode);\n      i += 1;\n    }\n  }\n  return chunks;\n}\nexports.decompile = decompile;\nfunction toASM(chunks) {\n  if (chunksIsBuffer(chunks)) {\n    chunks = decompile(chunks);\n  }\n  return chunks\n    .map(chunk => {\n      // data?\n      if (singleChunkIsBuffer(chunk)) {\n        const op = asMinimalOP(chunk);\n        if (op === undefined) return chunk.toString('hex');\n        chunk = op;\n      }\n      // opcode!\n      return REVERSE_OPS[chunk];\n    })\n    .join(' ');\n}\nexports.toASM = toASM;\nfunction fromASM(asm) {\n  typeforce(types.String, asm);\n  return compile(\n    asm.split(' ').map(chunkStr => {\n      // opcode?\n      if (exports.OPS[chunkStr] !== undefined) return exports.OPS[chunkStr];\n      typeforce(types.Hex, chunkStr);\n      // data!\n      return Buffer.from(chunkStr, 'hex');\n    }),\n  );\n}\nexports.fromASM = fromASM;\nfunction toStack(chunks) {\n  chunks = decompile(chunks);\n  typeforce(isPushOnly, chunks);\n  return chunks.map(op => {\n    if (singleChunkIsBuffer(op)) return op;\n    if (op === exports.OPS.OP_0) return Buffer.allocUnsafe(0);\n    return scriptNumber.encode(op - OP_INT_BASE);\n  });\n}\nexports.toStack = toStack;\nfunction isCanonicalPubKey(buffer) {\n  return ecc.isPoint(buffer);\n}\nexports.isCanonicalPubKey = isCanonicalPubKey;\nfunction isDefinedHashType(hashType) {\n  const hashTypeMod = hashType & ~0x80;\n  // return hashTypeMod > SIGHASH_ALL && hashTypeMod < SIGHASH_SINGLE\n  return hashTypeMod > 0x00 && hashTypeMod < 0x04;\n}\nexports.isDefinedHashType = isDefinedHashType;\nfunction isCanonicalScriptSignature(buffer) {\n  if (!Buffer.isBuffer(buffer)) return false;\n  if (!isDefinedHashType(buffer[buffer.length - 1])) return false;\n  return bip66.check(buffer.slice(0, -1));\n}\nexports.isCanonicalScriptSignature = isCanonicalScriptSignature;\n// tslint:disable-next-line variable-name\nexports.number = scriptNumber;\nexports.signature = scriptSignature;\n","var ERRORS = require('./errors')\nvar NATIVE = require('./native')\n\n// short-hand\nvar tfJSON = ERRORS.tfJSON\nvar TfTypeError = ERRORS.TfTypeError\nvar TfPropertyTypeError = ERRORS.TfPropertyTypeError\nvar tfSubError = ERRORS.tfSubError\nvar getValueTypeName = ERRORS.getValueTypeName\n\nvar TYPES = {\n  arrayOf: function arrayOf (type, options) {\n    type = compile(type)\n    options = options || {}\n\n    function _arrayOf (array, strict) {\n      if (!NATIVE.Array(array)) return false\n      if (NATIVE.Nil(array)) return false\n      if (options.minLength !== undefined && array.length < options.minLength) return false\n      if (options.maxLength !== undefined && array.length > options.maxLength) return false\n      if (options.length !== undefined && array.length !== options.length) return false\n\n      return array.every(function (value, i) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _arrayOf.toJSON = function () {\n      var str = '[' + tfJSON(type) + ']'\n      if (options.length !== undefined) {\n        str += '{' + options.length + '}'\n      } else if (options.minLength !== undefined || options.maxLength !== undefined) {\n        str += '{' +\n          (options.minLength === undefined ? 0 : options.minLength) + ',' +\n          (options.maxLength === undefined ? Infinity : options.maxLength) + '}'\n      }\n      return str\n    }\n\n    return _arrayOf\n  },\n\n  maybe: function maybe (type) {\n    type = compile(type)\n\n    function _maybe (value, strict) {\n      return NATIVE.Nil(value) || type(value, strict, maybe)\n    }\n    _maybe.toJSON = function () { return '?' + tfJSON(type) }\n\n    return _maybe\n  },\n\n  map: function map (propertyType, propertyKeyType) {\n    propertyType = compile(propertyType)\n    if (propertyKeyType) propertyKeyType = compile(propertyKeyType)\n\n    function _map (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      for (var propertyName in value) {\n        try {\n          if (propertyKeyType) {\n            typeforce(propertyKeyType, propertyName, strict)\n          }\n        } catch (e) {\n          throw tfSubError(e, propertyName, 'key')\n        }\n\n        try {\n          var propertyValue = value[propertyName]\n          typeforce(propertyType, propertyValue, strict)\n        } catch (e) {\n          throw tfSubError(e, propertyName)\n        }\n      }\n\n      return true\n    }\n\n    if (propertyKeyType) {\n      _map.toJSON = function () {\n        return '{' + tfJSON(propertyKeyType) + ': ' + tfJSON(propertyType) + '}'\n      }\n    } else {\n      _map.toJSON = function () { return '{' + tfJSON(propertyType) + '}' }\n    }\n\n    return _map\n  },\n\n  object: function object (uncompiled) {\n    var type = {}\n\n    for (var typePropertyName in uncompiled) {\n      type[typePropertyName] = compile(uncompiled[typePropertyName])\n    }\n\n    function _object (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      var propertyName\n\n      try {\n        for (propertyName in type) {\n          var propertyType = type[propertyName]\n          var propertyValue = value[propertyName]\n\n          typeforce(propertyType, propertyValue, strict)\n        }\n      } catch (e) {\n        throw tfSubError(e, propertyName)\n      }\n\n      if (strict) {\n        for (propertyName in value) {\n          if (type[propertyName]) continue\n\n          throw new TfPropertyTypeError(undefined, propertyName)\n        }\n      }\n\n      return true\n    }\n    _object.toJSON = function () { return tfJSON(type) }\n\n    return _object\n  },\n\n  anyOf: function anyOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _anyOf (value, strict) {\n      return types.some(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _anyOf.toJSON = function () { return types.map(tfJSON).join('|') }\n\n    return _anyOf\n  },\n\n  allOf: function allOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _allOf (value, strict) {\n      return types.every(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _allOf.toJSON = function () { return types.map(tfJSON).join(' & ') }\n\n    return _allOf\n  },\n\n  quacksLike: function quacksLike (type) {\n    function _quacksLike (value) {\n      return type === getValueTypeName(value)\n    }\n    _quacksLike.toJSON = function () { return type }\n\n    return _quacksLike\n  },\n\n  tuple: function tuple () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _tuple (values, strict) {\n      if (NATIVE.Nil(values)) return false\n      if (NATIVE.Nil(values.length)) return false\n      if (strict && (values.length !== types.length)) return false\n\n      return types.every(function (type, i) {\n        try {\n          return typeforce(type, values[i], strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _tuple.toJSON = function () { return '(' + types.map(tfJSON).join(', ') + ')' }\n\n    return _tuple\n  },\n\n  value: function value (expected) {\n    function _value (actual) {\n      return actual === expected\n    }\n    _value.toJSON = function () { return expected }\n\n    return _value\n  }\n}\n\n// TODO: deprecate\nTYPES.oneOf = TYPES.anyOf\n\nfunction compile (type) {\n  if (NATIVE.String(type)) {\n    if (type[0] === '?') return TYPES.maybe(type.slice(1))\n\n    return NATIVE[type] || TYPES.quacksLike(type)\n  } else if (type && NATIVE.Object(type)) {\n    if (NATIVE.Array(type)) {\n      if (type.length !== 1) throw new TypeError('Expected compile() parameter of type Array of length 1')\n      return TYPES.arrayOf(type[0])\n    }\n\n    return TYPES.object(type)\n  } else if (NATIVE.Function(type)) {\n    return type\n  }\n\n  return TYPES.value(type)\n}\n\nfunction typeforce (type, value, strict, surrogate) {\n  if (NATIVE.Function(type)) {\n    if (type(value, strict)) return true\n\n    throw new TfTypeError(surrogate || type, value)\n  }\n\n  // JIT\n  return typeforce(compile(type), value, strict)\n}\n\n// assign types to typeforce function\nfor (var typeName in NATIVE) {\n  typeforce[typeName] = NATIVE[typeName]\n}\n\nfor (typeName in TYPES) {\n  typeforce[typeName] = TYPES[typeName]\n}\n\nvar EXTRA = require('./extra')\nfor (typeName in EXTRA) {\n  typeforce[typeName] = EXTRA[typeName]\n}\n\ntypeforce.compile = compile\ntypeforce.TfTypeError = TfTypeError\ntypeforce.TfPropertyTypeError = TfPropertyTypeError\n\nmodule.exports = typeforce\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.bitcoin = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bc',\n  bip32: {\n    public: 0x0488b21e,\n    private: 0x0488ade4,\n  },\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  wif: 0x80,\n};\nexports.regtest = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bcrt',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\nexports.testnet = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'tb',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar GlobalTypes;\n(function(GlobalTypes) {\n  GlobalTypes[(GlobalTypes['UNSIGNED_TX'] = 0)] = 'UNSIGNED_TX';\n  GlobalTypes[(GlobalTypes['GLOBAL_XPUB'] = 1)] = 'GLOBAL_XPUB';\n})((GlobalTypes = exports.GlobalTypes || (exports.GlobalTypes = {})));\nexports.GLOBAL_TYPE_NAMES = ['unsignedTx', 'globalXpub'];\nvar InputTypes;\n(function(InputTypes) {\n  InputTypes[(InputTypes['NON_WITNESS_UTXO'] = 0)] = 'NON_WITNESS_UTXO';\n  InputTypes[(InputTypes['WITNESS_UTXO'] = 1)] = 'WITNESS_UTXO';\n  InputTypes[(InputTypes['PARTIAL_SIG'] = 2)] = 'PARTIAL_SIG';\n  InputTypes[(InputTypes['SIGHASH_TYPE'] = 3)] = 'SIGHASH_TYPE';\n  InputTypes[(InputTypes['REDEEM_SCRIPT'] = 4)] = 'REDEEM_SCRIPT';\n  InputTypes[(InputTypes['WITNESS_SCRIPT'] = 5)] = 'WITNESS_SCRIPT';\n  InputTypes[(InputTypes['BIP32_DERIVATION'] = 6)] = 'BIP32_DERIVATION';\n  InputTypes[(InputTypes['FINAL_SCRIPTSIG'] = 7)] = 'FINAL_SCRIPTSIG';\n  InputTypes[(InputTypes['FINAL_SCRIPTWITNESS'] = 8)] = 'FINAL_SCRIPTWITNESS';\n  InputTypes[(InputTypes['POR_COMMITMENT'] = 9)] = 'POR_COMMITMENT';\n})((InputTypes = exports.InputTypes || (exports.InputTypes = {})));\nexports.INPUT_TYPE_NAMES = [\n  'nonWitnessUtxo',\n  'witnessUtxo',\n  'partialSig',\n  'sighashType',\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n  'finalScriptSig',\n  'finalScriptWitness',\n  'porCommitment',\n];\nvar OutputTypes;\n(function(OutputTypes) {\n  OutputTypes[(OutputTypes['REDEEM_SCRIPT'] = 0)] = 'REDEEM_SCRIPT';\n  OutputTypes[(OutputTypes['WITNESS_SCRIPT'] = 1)] = 'WITNESS_SCRIPT';\n  OutputTypes[(OutputTypes['BIP32_DERIVATION'] = 2)] = 'BIP32_DERIVATION';\n})((OutputTypes = exports.OutputTypes || (exports.OutputTypes = {})));\nexports.OUTPUT_TYPE_NAMES = [\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n];\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeforce = require('typeforce');\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction UInt31(value) {\n  return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nexports.UInt31 = UInt31;\nfunction BIP32Path(value) {\n  return typeforce.String(value) && !!value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/);\n}\nexports.BIP32Path = BIP32Path;\nBIP32Path.toJSON = () => {\n  return 'BIP32 derivation path';\n};\nfunction Signer(obj) {\n  return (\n    (typeforce.Buffer(obj.publicKey) ||\n      typeof obj.getPublicKey === 'function') &&\n    typeof obj.sign === 'function'\n  );\n}\nexports.Signer = Signer;\nconst SATOSHI_MAX = 21 * 1e14;\nfunction Satoshi(value) {\n  return typeforce.UInt53(value) && value <= SATOSHI_MAX;\n}\nexports.Satoshi = Satoshi;\n// external dependent types\nexports.ECPoint = typeforce.quacksLike('Point');\n// exposed, external API\nexports.Network = typeforce.compile({\n  messagePrefix: typeforce.oneOf(typeforce.Buffer, typeforce.String),\n  bip32: {\n    public: typeforce.UInt32,\n    private: typeforce.UInt32,\n  },\n  pubKeyHash: typeforce.UInt8,\n  scriptHash: typeforce.UInt8,\n  wif: typeforce.UInt8,\n});\nexports.Buffer256bit = typeforce.BufferN(32);\nexports.Hash160bit = typeforce.BufferN(20);\nexports.Hash256bit = typeforce.BufferN(32);\nexports.Number = typeforce.Number; // tslint:disable-line variable-name\nexports.Array = typeforce.Array;\nexports.Boolean = typeforce.Boolean; // tslint:disable-line variable-name\nexports.String = typeforce.String; // tslint:disable-line variable-name\nexports.Buffer = typeforce.Buffer;\nexports.Hex = typeforce.Hex;\nexports.maybe = typeforce.maybe;\nexports.tuple = typeforce.tuple;\nexports.UInt8 = typeforce.UInt8;\nexports.UInt32 = typeforce.UInt32;\nexports.Function = typeforce.Function;\nexports.BufferN = typeforce.BufferN;\nexports.Null = typeforce.Null;\nexports.oneOf = typeforce.oneOf;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst createHash = require('create-hash');\nfunction ripemd160(buffer) {\n  try {\n    return createHash('rmd160')\n      .update(buffer)\n      .digest();\n  } catch (err) {\n    return createHash('ripemd160')\n      .update(buffer)\n      .digest();\n  }\n}\nexports.ripemd160 = ripemd160;\nfunction sha1(buffer) {\n  return createHash('sha1')\n    .update(buffer)\n    .digest();\n}\nexports.sha1 = sha1;\nfunction sha256(buffer) {\n  return createHash('sha256')\n    .update(buffer)\n    .digest();\n}\nexports.sha256 = sha256;\nfunction hash160(buffer) {\n  return ripemd160(sha256(buffer));\n}\nexports.hash160 = hash160;\nfunction hash256(buffer) {\n  return sha256(sha256(buffer));\n}\nexports.hash256 = hash256;\n","const BN = require('bn.js')\nconst EC = require('elliptic').ec\nconst secp256k1 = new EC('secp256k1')\nconst deterministicGenerateK = require('./rfc6979')\n\nconst ZERO32 = Buffer.alloc(32, 0)\nconst EC_GROUP_ORDER = Buffer.from('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141', 'hex')\nconst EC_P = Buffer.from('fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f', 'hex')\n\nconst n = secp256k1.curve.n\nconst nDiv2 = n.shrn(1)\nconst G = secp256k1.curve.g\n\nconst THROW_BAD_PRIVATE = 'Expected Private'\nconst THROW_BAD_POINT = 'Expected Point'\nconst THROW_BAD_TWEAK = 'Expected Tweak'\nconst THROW_BAD_HASH = 'Expected Hash'\nconst THROW_BAD_SIGNATURE = 'Expected Signature'\nconst THROW_BAD_EXTRA_DATA = 'Expected Extra Data (32 bytes)'\n\nfunction isScalar (x) {\n  return Buffer.isBuffer(x) && x.length === 32\n}\n\nfunction isOrderScalar (x) {\n  if (!isScalar(x)) return false\n  return x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isPoint (p) {\n  if (!Buffer.isBuffer(p)) return false\n  if (p.length < 33) return false\n\n  const t = p[0]\n  const x = p.slice(1, 33)\n  if (x.compare(ZERO32) === 0) return false\n  if (x.compare(EC_P) >= 0) return false\n  if ((t === 0x02 || t === 0x03) && p.length === 33) {\n    try { decodeFrom(p) } catch (e) { return false } // TODO: temporary\n    return true\n  }\n\n  const y = p.slice(33)\n  if (y.compare(ZERO32) === 0) return false\n  if (y.compare(EC_P) >= 0) return false\n  if (t === 0x04 && p.length === 65) return true\n  return false\n}\n\nfunction __isPointCompressed (p) {\n  return p[0] !== 0x04\n}\n\nfunction isPointCompressed (p) {\n  if (!isPoint(p)) return false\n  return __isPointCompressed(p)\n}\n\nfunction isPrivate (x) {\n  if (!isScalar(x)) return false\n  return x.compare(ZERO32) > 0 && // > 0\n    x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isSignature (value) {\n  const r = value.slice(0, 32)\n  const s = value.slice(32, 64)\n  return Buffer.isBuffer(value) && value.length === 64 &&\n    r.compare(EC_GROUP_ORDER) < 0 &&\n    s.compare(EC_GROUP_ORDER) < 0\n}\n\nfunction assumeCompression (value, pubkey) {\n  if (value === undefined && pubkey !== undefined) return __isPointCompressed(pubkey)\n  if (value === undefined) return true\n  return value\n}\n\nfunction fromBuffer (d) { return new BN(d) }\nfunction toBuffer (d) { return d.toArrayLike(Buffer, 'be', 32) }\nfunction decodeFrom (P) { return secp256k1.curve.decodePoint(P) }\nfunction getEncoded (P, compressed) { return Buffer.from(P._encode(compressed)) }\n\nfunction pointAdd (pA, pB, __compressed) {\n  if (!isPoint(pA)) throw new TypeError(THROW_BAD_POINT)\n  if (!isPoint(pB)) throw new TypeError(THROW_BAD_POINT)\n\n  const a = decodeFrom(pA)\n  const b = decodeFrom(pB)\n  const pp = a.add(b)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed, pA)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointAddScalar (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  if (tweak.compare(ZERO32) === 0) return getEncoded(pp, compressed)\n\n  const tt = fromBuffer(tweak)\n  const qq = G.mul(tt)\n  const uu = pp.add(qq)\n  if (uu.isInfinity()) return null\n\n  return getEncoded(uu, compressed)\n}\n\nfunction pointCompress (p, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n\n  const pp = decodeFrom(p)\n  if (pp.isInfinity()) throw new TypeError(THROW_BAD_POINT)\n\n  const compressed = assumeCompression(__compressed, p)\n\n  return getEncoded(pp, compressed)\n}\n\nfunction pointFromScalar (d, __compressed) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n\n  const dd = fromBuffer(d)\n  const pp = G.mul(dd)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointMultiply (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  const tt = fromBuffer(tweak)\n  const qq = pp.mul(tt)\n  if (qq.isInfinity()) return null\n\n  return getEncoded(qq, compressed)\n}\n\nfunction privateAdd (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.add(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction privateSub (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.sub(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction sign (hash, x) {\n  return __sign(hash, x)\n}\n\nfunction signWithEntropy (hash, x, addData) {\n  return __sign(hash, x, addData)\n}\n\nfunction __sign (hash, x, addData) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPrivate(x)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (addData !== undefined && !isScalar(addData)) throw new TypeError(THROW_BAD_EXTRA_DATA)\n\n  const d = fromBuffer(x)\n  const e = fromBuffer(hash)\n\n  let r, s\n  const checkSig = function (k) {\n    const kI = fromBuffer(k)\n    const Q = G.mul(kI)\n\n    if (Q.isInfinity()) return false\n\n    r = Q.x.umod(n)\n    if (r.isZero() === 0) return false\n\n    s = kI\n      .invm(n)\n      .mul(e.add(d.mul(r)))\n      .umod(n)\n    if (s.isZero() === 0) return false\n\n    return true\n  }\n\n  deterministicGenerateK(hash, x, checkSig, isPrivate, addData)\n\n  // enforce low S values, see bip62: 'low s values in signatures'\n  if (s.cmp(nDiv2) > 0) {\n    s = n.sub(s)\n  }\n\n  const buffer = Buffer.allocUnsafe(64)\n  toBuffer(r).copy(buffer, 0)\n  toBuffer(s).copy(buffer, 32)\n  return buffer\n}\n\nfunction verify (hash, q, signature, strict) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPoint(q)) throw new TypeError(THROW_BAD_POINT)\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (1, isSignature enforces '< n - 1')\n  if (!isSignature(signature)) throw new TypeError(THROW_BAD_SIGNATURE)\n\n  const Q = decodeFrom(q)\n  const r = fromBuffer(signature.slice(0, 32))\n  const s = fromBuffer(signature.slice(32, 64))\n\n  if (strict && s.cmp(nDiv2) > 0) {\n    return false\n  }\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (2, enforces '> 0')\n  if (r.gtn(0) <= 0 /* || r.compareTo(n) >= 0 */) return false\n  if (s.gtn(0) <= 0 /* || s.compareTo(n) >= 0 */) return false\n\n  // 1.4.2 H = Hash(M), already done by the user\n  // 1.4.3 e = H\n  const e = fromBuffer(hash)\n\n  // Compute s^-1\n  const sInv = s.invm(n)\n\n  // 1.4.4 Compute u1 = es^1 mod n\n  //               u2 = rs^1 mod n\n  const u1 = e.mul(sInv).umod(n)\n  const u2 = r.mul(sInv).umod(n)\n\n  // 1.4.5 Compute R = (xR, yR)\n  //               R = u1G + u2Q\n  const R = G.mulAdd(u1, Q, u2)\n\n  // 1.4.5 (cont.) Enforce R is not at infinity\n  if (R.isInfinity()) return false\n\n  // 1.4.6 Convert the field element R.x to an integer\n  const xR = R.x\n\n  // 1.4.7 Set v = xR mod n\n  const v = xR.umod(n)\n\n  // 1.4.8 If v = r, output \"valid\", and if v != r, output \"invalid\"\n  return v.eq(r)\n}\n\nmodule.exports = {\n  isPoint,\n  isPointCompressed,\n  isPrivate,\n  pointAdd,\n  pointAddScalar,\n  pointCompress,\n  pointFromScalar,\n  pointMultiply,\n  privateAdd,\n  privateSub,\n  sign,\n  signWithEntropy,\n  verify\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction prop(object, name, f) {\n  Object.defineProperty(object, name, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      const _value = f.call(this);\n      this[name] = _value;\n      return _value;\n    },\n    set(_value) {\n      Object.defineProperty(this, name, {\n        configurable: true,\n        enumerable: true,\n        value: _value,\n        writable: true,\n      });\n    },\n  });\n}\nexports.prop = prop;\nfunction value(f) {\n  let _value;\n  return () => {\n    if (_value !== undefined) return _value;\n    _value = f();\n    return _value;\n  };\n}\nexports.value = value;\n","'use strict'\n\nvar createHash = require('create-hash')\nvar bs58checkBase = require('./base')\n\n// SHA256(SHA256(buffer))\nfunction sha256x2 (buffer) {\n  var tmp = createHash('sha256').update(buffer).digest()\n  return createHash('sha256').update(tmp).digest()\n}\n\nmodule.exports = bs58checkBase(sha256x2)\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst embed_1 = require('./embed');\nexports.embed = embed_1.p2data;\nconst p2ms_1 = require('./p2ms');\nexports.p2ms = p2ms_1.p2ms;\nconst p2pk_1 = require('./p2pk');\nexports.p2pk = p2pk_1.p2pk;\nconst p2pkh_1 = require('./p2pkh');\nexports.p2pkh = p2pkh_1.p2pkh;\nconst p2sh_1 = require('./p2sh');\nexports.p2sh = p2sh_1.p2sh;\nconst p2wpkh_1 = require('./p2wpkh');\nexports.p2wpkh = p2wpkh_1.p2wpkh;\nconst p2wsh_1 = require('./p2wsh');\nexports.p2wsh = p2wsh_1.p2wsh;\n// TODO\n// witness commitment\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction cloneBuffer(buffer) {\n  const clone = Buffer.allocUnsafe(buffer.length);\n  buffer.copy(clone);\n  return clone;\n}\nexports.cloneBuffer = cloneBuffer;\n/**\n * Helper class for serialization of bitcoin data types into a pre-allocated buffer.\n */\nclass BufferWriter {\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    typeforce(types.tuple(types.Buffer, types.UInt32), [buffer, offset]);\n  }\n  writeUInt8(i) {\n    this.offset = this.buffer.writeUInt8(i, this.offset);\n  }\n  writeInt32(i) {\n    this.offset = this.buffer.writeInt32LE(i, this.offset);\n  }\n  writeUInt32(i) {\n    this.offset = this.buffer.writeUInt32LE(i, this.offset);\n  }\n  writeUInt64(i) {\n    this.offset = writeUInt64LE(this.buffer, i, this.offset);\n  }\n  writeVarInt(i) {\n    varuint.encode(i, this.buffer, this.offset);\n    this.offset += varuint.encode.bytes;\n  }\n  writeSlice(slice) {\n    if (this.buffer.length < this.offset + slice.length) {\n      throw new Error('Cannot write slice out of bounds');\n    }\n    this.offset += slice.copy(this.buffer, this.offset);\n  }\n  writeVarSlice(slice) {\n    this.writeVarInt(slice.length);\n    this.writeSlice(slice);\n  }\n  writeVector(vector) {\n    this.writeVarInt(vector.length);\n    vector.forEach(buf => this.writeVarSlice(buf));\n  }\n}\nexports.BufferWriter = BufferWriter;\n/**\n * Helper class for reading of bitcoin data types from a buffer.\n */\nclass BufferReader {\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    typeforce(types.tuple(types.Buffer, types.UInt32), [buffer, offset]);\n  }\n  readUInt8() {\n    const result = this.buffer.readUInt8(this.offset);\n    this.offset++;\n    return result;\n  }\n  readInt32() {\n    const result = this.buffer.readInt32LE(this.offset);\n    this.offset += 4;\n    return result;\n  }\n  readUInt32() {\n    const result = this.buffer.readUInt32LE(this.offset);\n    this.offset += 4;\n    return result;\n  }\n  readUInt64() {\n    const result = readUInt64LE(this.buffer, this.offset);\n    this.offset += 8;\n    return result;\n  }\n  readVarInt() {\n    const vi = varuint.decode(this.buffer, this.offset);\n    this.offset += varuint.decode.bytes;\n    return vi;\n  }\n  readSlice(n) {\n    if (this.buffer.length < this.offset + n) {\n      throw new Error('Cannot read slice out of bounds');\n    }\n    const result = this.buffer.slice(this.offset, this.offset + n);\n    this.offset += n;\n    return result;\n  }\n  readVarSlice() {\n    return this.readSlice(this.readVarInt());\n  }\n  readVector() {\n    const count = this.readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(this.readVarSlice());\n    return vector;\n  }\n}\nexports.BufferReader = BufferReader;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nfunction varSliceSize(someScript) {\n  const length = someScript.length;\n  return varuint.encodingLength(length) + length;\n}\nfunction vectorSize(someVector) {\n  const length = someVector.length;\n  return (\n    varuint.encodingLength(length) +\n    someVector.reduce((sum, witness) => {\n      return sum + varSliceSize(witness);\n    }, 0)\n  );\n}\nconst EMPTY_SCRIPT = Buffer.allocUnsafe(0);\nconst EMPTY_WITNESS = [];\nconst ZERO = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000000',\n  'hex',\n);\nconst ONE = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000001',\n  'hex',\n);\nconst VALUE_UINT64_MAX = Buffer.from('ffffffffffffffff', 'hex');\nconst BLANK_OUTPUT = {\n  script: EMPTY_SCRIPT,\n  valueBuffer: VALUE_UINT64_MAX,\n};\nfunction isOutput(out) {\n  return out.value !== undefined;\n}\nclass Transaction {\n  constructor() {\n    this.version = 1;\n    this.locktime = 0;\n    this.ins = [];\n    this.outs = [];\n  }\n  static fromBuffer(buffer, _NO_STRICT) {\n    const bufferReader = new bufferutils_1.BufferReader(buffer);\n    const tx = new Transaction();\n    tx.version = bufferReader.readInt32();\n    const marker = bufferReader.readUInt8();\n    const flag = bufferReader.readUInt8();\n    let hasWitnesses = false;\n    if (\n      marker === Transaction.ADVANCED_TRANSACTION_MARKER &&\n      flag === Transaction.ADVANCED_TRANSACTION_FLAG\n    ) {\n      hasWitnesses = true;\n    } else {\n      bufferReader.offset -= 2;\n    }\n    const vinLen = bufferReader.readVarInt();\n    for (let i = 0; i < vinLen; ++i) {\n      tx.ins.push({\n        hash: bufferReader.readSlice(32),\n        index: bufferReader.readUInt32(),\n        script: bufferReader.readVarSlice(),\n        sequence: bufferReader.readUInt32(),\n        witness: EMPTY_WITNESS,\n      });\n    }\n    const voutLen = bufferReader.readVarInt();\n    for (let i = 0; i < voutLen; ++i) {\n      tx.outs.push({\n        value: bufferReader.readUInt64(),\n        script: bufferReader.readVarSlice(),\n      });\n    }\n    if (hasWitnesses) {\n      for (let i = 0; i < vinLen; ++i) {\n        tx.ins[i].witness = bufferReader.readVector();\n      }\n      // was this pointless?\n      if (!tx.hasWitnesses())\n        throw new Error('Transaction has superfluous witness data');\n    }\n    tx.locktime = bufferReader.readUInt32();\n    if (_NO_STRICT) return tx;\n    if (bufferReader.offset !== buffer.length)\n      throw new Error('Transaction has unexpected data');\n    return tx;\n  }\n  static fromHex(hex) {\n    return Transaction.fromBuffer(Buffer.from(hex, 'hex'), false);\n  }\n  static isCoinbaseHash(buffer) {\n    typeforce(types.Hash256bit, buffer);\n    for (let i = 0; i < 32; ++i) {\n      if (buffer[i] !== 0) return false;\n    }\n    return true;\n  }\n  isCoinbase() {\n    return (\n      this.ins.length === 1 && Transaction.isCoinbaseHash(this.ins[0].hash)\n    );\n  }\n  addInput(hash, index, sequence, scriptSig) {\n    typeforce(\n      types.tuple(\n        types.Hash256bit,\n        types.UInt32,\n        types.maybe(types.UInt32),\n        types.maybe(types.Buffer),\n      ),\n      arguments,\n    );\n    if (types.Null(sequence)) {\n      sequence = Transaction.DEFAULT_SEQUENCE;\n    }\n    // Add the input and return the input's index\n    return (\n      this.ins.push({\n        hash,\n        index,\n        script: scriptSig || EMPTY_SCRIPT,\n        sequence: sequence,\n        witness: EMPTY_WITNESS,\n      }) - 1\n    );\n  }\n  addOutput(scriptPubKey, value) {\n    typeforce(types.tuple(types.Buffer, types.Satoshi), arguments);\n    // Add the output and return the output's index\n    return (\n      this.outs.push({\n        script: scriptPubKey,\n        value,\n      }) - 1\n    );\n  }\n  hasWitnesses() {\n    return this.ins.some(x => {\n      return x.witness.length !== 0;\n    });\n  }\n  weight() {\n    const base = this.byteLength(false);\n    const total = this.byteLength(true);\n    return base * 3 + total;\n  }\n  virtualSize() {\n    return Math.ceil(this.weight() / 4);\n  }\n  byteLength(_ALLOW_WITNESS = true) {\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    return (\n      (hasWitnesses ? 10 : 8) +\n      varuint.encodingLength(this.ins.length) +\n      varuint.encodingLength(this.outs.length) +\n      this.ins.reduce((sum, input) => {\n        return sum + 40 + varSliceSize(input.script);\n      }, 0) +\n      this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0) +\n      (hasWitnesses\n        ? this.ins.reduce((sum, input) => {\n            return sum + vectorSize(input.witness);\n          }, 0)\n        : 0)\n    );\n  }\n  clone() {\n    const newTx = new Transaction();\n    newTx.version = this.version;\n    newTx.locktime = this.locktime;\n    newTx.ins = this.ins.map(txIn => {\n      return {\n        hash: txIn.hash,\n        index: txIn.index,\n        script: txIn.script,\n        sequence: txIn.sequence,\n        witness: txIn.witness,\n      };\n    });\n    newTx.outs = this.outs.map(txOut => {\n      return {\n        script: txOut.script,\n        value: txOut.value,\n      };\n    });\n    return newTx;\n  }\n  /**\n   * Hash transaction for signing a specific input.\n   *\n   * Bitcoin uses a different hash for each signed transaction input.\n   * This method copies the transaction, makes the necessary changes based on the\n   * hashType, and then hashes the result.\n   * This hash can then be used to sign the provided transaction input.\n   */\n  hashForSignature(inIndex, prevOutScript, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, /* types.UInt8 */ types.Number),\n      arguments,\n    );\n    // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L29\n    if (inIndex >= this.ins.length) return ONE;\n    // ignore OP_CODESEPARATOR\n    const ourScript = bscript.compile(\n      bscript.decompile(prevOutScript).filter(x => {\n        return x !== script_1.OPS.OP_CODESEPARATOR;\n      }),\n    );\n    const txTmp = this.clone();\n    // SIGHASH_NONE: ignore all outputs? (wildcard payee)\n    if ((hashType & 0x1f) === Transaction.SIGHASH_NONE) {\n      txTmp.outs = [];\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, i) => {\n        if (i === inIndex) return;\n        input.sequence = 0;\n      });\n      // SIGHASH_SINGLE: ignore all outputs, except at the same index?\n    } else if ((hashType & 0x1f) === Transaction.SIGHASH_SINGLE) {\n      // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L60\n      if (inIndex >= this.outs.length) return ONE;\n      // truncate outputs after\n      txTmp.outs.length = inIndex + 1;\n      // \"blank\" outputs before\n      for (let i = 0; i < inIndex; i++) {\n        txTmp.outs[i] = BLANK_OUTPUT;\n      }\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, y) => {\n        if (y === inIndex) return;\n        input.sequence = 0;\n      });\n    }\n    // SIGHASH_ANYONECANPAY: ignore inputs entirely?\n    if (hashType & Transaction.SIGHASH_ANYONECANPAY) {\n      txTmp.ins = [txTmp.ins[inIndex]];\n      txTmp.ins[0].script = ourScript;\n      // SIGHASH_ALL: only ignore input scripts\n    } else {\n      // \"blank\" others input scripts\n      txTmp.ins.forEach(input => {\n        input.script = EMPTY_SCRIPT;\n      });\n      txTmp.ins[inIndex].script = ourScript;\n    }\n    // serialize and hash\n    const buffer = Buffer.allocUnsafe(txTmp.byteLength(false) + 4);\n    buffer.writeInt32LE(hashType, buffer.length - 4);\n    txTmp.__toBuffer(buffer, 0, false);\n    return bcrypto.hash256(buffer);\n  }\n  hashForWitnessV0(inIndex, prevOutScript, value, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, types.Satoshi, types.UInt32),\n      arguments,\n    );\n    let tbuffer = Buffer.from([]);\n    let bufferWriter;\n    let hashOutputs = ZERO;\n    let hashPrevouts = ZERO;\n    let hashSequence = ZERO;\n    if (!(hashType & Transaction.SIGHASH_ANYONECANPAY)) {\n      tbuffer = Buffer.allocUnsafe(36 * this.ins.length);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeSlice(txIn.hash);\n        bufferWriter.writeUInt32(txIn.index);\n      });\n      hashPrevouts = bcrypto.hash256(tbuffer);\n    }\n    if (\n      !(hashType & Transaction.SIGHASH_ANYONECANPAY) &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      tbuffer = Buffer.allocUnsafe(4 * this.ins.length);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeUInt32(txIn.sequence);\n      });\n      hashSequence = bcrypto.hash256(tbuffer);\n    }\n    if (\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      const txOutsSize = this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0);\n      tbuffer = Buffer.allocUnsafe(txOutsSize);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.outs.forEach(out => {\n        bufferWriter.writeUInt64(out.value);\n        bufferWriter.writeVarSlice(out.script);\n      });\n      hashOutputs = bcrypto.hash256(tbuffer);\n    } else if (\n      (hashType & 0x1f) === Transaction.SIGHASH_SINGLE &&\n      inIndex < this.outs.length\n    ) {\n      const output = this.outs[inIndex];\n      tbuffer = Buffer.allocUnsafe(8 + varSliceSize(output.script));\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      bufferWriter.writeUInt64(output.value);\n      bufferWriter.writeVarSlice(output.script);\n      hashOutputs = bcrypto.hash256(tbuffer);\n    }\n    tbuffer = Buffer.allocUnsafe(156 + varSliceSize(prevOutScript));\n    bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n    const input = this.ins[inIndex];\n    bufferWriter.writeUInt32(this.version);\n    bufferWriter.writeSlice(hashPrevouts);\n    bufferWriter.writeSlice(hashSequence);\n    bufferWriter.writeSlice(input.hash);\n    bufferWriter.writeUInt32(input.index);\n    bufferWriter.writeVarSlice(prevOutScript);\n    bufferWriter.writeUInt64(value);\n    bufferWriter.writeUInt32(input.sequence);\n    bufferWriter.writeSlice(hashOutputs);\n    bufferWriter.writeUInt32(this.locktime);\n    bufferWriter.writeUInt32(hashType);\n    return bcrypto.hash256(tbuffer);\n  }\n  getHash(forWitness) {\n    // wtxid for coinbase is always 32 bytes of 0x00\n    if (forWitness && this.isCoinbase()) return Buffer.alloc(32, 0);\n    return bcrypto.hash256(this.__toBuffer(undefined, undefined, forWitness));\n  }\n  getId() {\n    // transaction hash's are displayed in reverse order\n    return bufferutils_1.reverseBuffer(this.getHash(false)).toString('hex');\n  }\n  toBuffer(buffer, initialOffset) {\n    return this.__toBuffer(buffer, initialOffset, true);\n  }\n  toHex() {\n    return this.toBuffer(undefined, undefined).toString('hex');\n  }\n  setInputScript(index, scriptSig) {\n    typeforce(types.tuple(types.Number, types.Buffer), arguments);\n    this.ins[index].script = scriptSig;\n  }\n  setWitness(index, witness) {\n    typeforce(types.tuple(types.Number, [types.Buffer]), arguments);\n    this.ins[index].witness = witness;\n  }\n  __toBuffer(buffer, initialOffset, _ALLOW_WITNESS = false) {\n    if (!buffer) buffer = Buffer.allocUnsafe(this.byteLength(_ALLOW_WITNESS));\n    const bufferWriter = new bufferutils_1.BufferWriter(\n      buffer,\n      initialOffset || 0,\n    );\n    bufferWriter.writeInt32(this.version);\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    if (hasWitnesses) {\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);\n    }\n    bufferWriter.writeVarInt(this.ins.length);\n    this.ins.forEach(txIn => {\n      bufferWriter.writeSlice(txIn.hash);\n      bufferWriter.writeUInt32(txIn.index);\n      bufferWriter.writeVarSlice(txIn.script);\n      bufferWriter.writeUInt32(txIn.sequence);\n    });\n    bufferWriter.writeVarInt(this.outs.length);\n    this.outs.forEach(txOut => {\n      if (isOutput(txOut)) {\n        bufferWriter.writeUInt64(txOut.value);\n      } else {\n        bufferWriter.writeSlice(txOut.valueBuffer);\n      }\n      bufferWriter.writeVarSlice(txOut.script);\n    });\n    if (hasWitnesses) {\n      this.ins.forEach(input => {\n        bufferWriter.writeVector(input.witness);\n      });\n    }\n    bufferWriter.writeUInt32(this.locktime);\n    // avoid slicing unless necessary\n    if (initialOffset !== undefined)\n      return buffer.slice(initialOffset, bufferWriter.offset);\n    return buffer;\n  }\n}\nTransaction.DEFAULT_SEQUENCE = 0xffffffff;\nTransaction.SIGHASH_ALL = 0x01;\nTransaction.SIGHASH_NONE = 0x02;\nTransaction.SIGHASH_SINGLE = 0x03;\nTransaction.SIGHASH_ANYONECANPAY = 0x80;\nTransaction.ADVANCED_TRANSACTION_MARKER = 0x00;\nTransaction.ADVANCED_TRANSACTION_FLAG = 0x01;\nexports.Transaction = Transaction;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// Number.MAX_SAFE_INTEGER\nconst MAX_SAFE_INTEGER = 9007199254740991;\nfunction checkUInt53(n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0)\n    throw new RangeError('value out of range');\n}\nfunction encode(_number, buffer, offset) {\n  checkUInt53(_number);\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(_number));\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  // 8 bit\n  if (_number < 0xfd) {\n    buffer.writeUInt8(_number, offset);\n    Object.assign(encode, { bytes: 1 });\n    // 16 bit\n  } else if (_number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset);\n    buffer.writeUInt16LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 3 });\n    // 32 bit\n  } else if (_number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset);\n    buffer.writeUInt32LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 5 });\n    // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset);\n    buffer.writeUInt32LE(_number >>> 0, offset + 1);\n    buffer.writeUInt32LE((_number / 0x100000000) | 0, offset + 5);\n    Object.assign(encode, { bytes: 9 });\n  }\n  return buffer;\n}\nexports.encode = encode;\nfunction decode(buffer, offset) {\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  const first = buffer.readUInt8(offset);\n  // 8 bit\n  if (first < 0xfd) {\n    Object.assign(decode, { bytes: 1 });\n    return first;\n    // 16 bit\n  } else if (first === 0xfd) {\n    Object.assign(decode, { bytes: 3 });\n    return buffer.readUInt16LE(offset + 1);\n    // 32 bit\n  } else if (first === 0xfe) {\n    Object.assign(decode, { bytes: 5 });\n    return buffer.readUInt32LE(offset + 1);\n    // 64 bit\n  } else {\n    Object.assign(decode, { bytes: 9 });\n    const lo = buffer.readUInt32LE(offset + 1);\n    const hi = buffer.readUInt32LE(offset + 5);\n    const _number = hi * 0x0100000000 + lo;\n    checkUInt53(_number);\n    return _number;\n  }\n}\nexports.decode = decode;\nfunction encodingLength(_number) {\n  checkUInt53(_number);\n  return _number < 0xfd\n    ? 1\n    : _number <= 0xffff\n    ? 3\n    : _number <= 0xffffffff\n    ? 5\n    : 9;\n}\nexports.encodingLength = encodingLength;\n","import classNames from 'classnames';\nimport * as React from 'react';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useNavItem } from '@restart/ui/NavItem';\nimport { makeEventKey } from '@restart/ui/SelectableContext';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst ListGroupItem = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  active,\n  disabled,\n  eventKey,\n  className,\n  variant,\n  action,\n  as,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'list-group-item');\n  const [navItemProps, meta] = useNavItem({\n    key: makeEventKey(eventKey, props.href),\n    active,\n    ...props\n  });\n  const handleClick = useEventCallback(event => {\n    if (disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    navItemProps.onClick(event);\n  });\n\n  if (disabled && props.tabIndex === undefined) {\n    props.tabIndex = -1;\n    props['aria-disabled'] = true;\n  } // eslint-disable-next-line no-nested-ternary\n\n\n  const Component = as || (action ? props.href ? 'a' : 'button' : 'div');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    ...navItemProps,\n    onClick: handleClick,\n    className: classNames(className, bsPrefix, meta.isActive && 'active', disabled && 'disabled', variant && `${bsPrefix}-${variant}`, action && `${bsPrefix}-action`)\n  });\n});\nListGroupItem.displayName = 'ListGroupItem';\nexport default ListGroupItem;","import classNames from 'classnames';\nimport * as React from 'react';\nimport warning from 'warning';\nimport { useUncontrolled } from 'uncontrollable';\nimport BaseNav from '@restart/ui/Nav';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport ListGroupItem from './ListGroupItem';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst ListGroup = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    className,\n    bsPrefix: initialBsPrefix,\n    variant,\n    horizontal,\n    // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n    as = 'div',\n    ...controlledProps\n  } = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  });\n  const bsPrefix = useBootstrapPrefix(initialBsPrefix, 'list-group');\n  let horizontalVariant;\n\n  if (horizontal) {\n    horizontalVariant = horizontal === true ? 'horizontal' : `horizontal-${horizontal}`;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(horizontal && variant === 'flush'), '`variant=\"flush\"` and `horizontal` should not be used together.') : void 0;\n  return /*#__PURE__*/_jsx(BaseNav, {\n    ref: ref,\n    ...controlledProps,\n    as: as,\n    className: classNames(className, bsPrefix, variant && `${bsPrefix}-${variant}`, horizontalVariant && `${bsPrefix}-${horizontalVariant}`)\n  });\n});\nListGroup.displayName = 'ListGroup';\nexport default Object.assign(ListGroup, {\n  Item: ListGroupItem\n});","var pbkdf2Sync = require('pbkdf2').pbkdf2Sync\n\nvar MAX_VALUE = 0x7fffffff\n\n// N = Cpu cost, r = Memory cost, p = parallelization cost\nfunction scrypt (key, salt, N, r, p, dkLen, progressCallback) {\n  if (N === 0 || (N & (N - 1)) !== 0) throw Error('N must be > 0 and a power of 2')\n\n  if (N > MAX_VALUE / 128 / r) throw Error('Parameter N is too large')\n  if (r > MAX_VALUE / 128 / p) throw Error('Parameter r is too large')\n\n  var XY = new Buffer(256 * r)\n  var V = new Buffer(128 * r * N)\n\n  // pseudo global\n  var B32 = new Int32Array(16) // salsa20_8\n  var x = new Int32Array(16) // salsa20_8\n  var _X = new Buffer(64) // blockmix_salsa8\n\n  // pseudo global\n  var B = pbkdf2Sync(key, salt, 1, p * 128 * r, 'sha256')\n\n  var tickCallback\n  if (progressCallback) {\n    var totalOps = p * N * 2\n    var currentOp = 0\n\n    tickCallback = function () {\n      ++currentOp\n\n      // send progress notifications once every 1,000 ops\n      if (currentOp % 1000 === 0) {\n        progressCallback({\n          current: currentOp,\n          total: totalOps,\n          percent: (currentOp / totalOps) * 100.0\n        })\n      }\n    }\n  }\n\n  for (var i = 0; i < p; i++) {\n    smix(B, i * 128 * r, r, N, V, XY)\n  }\n\n  return pbkdf2Sync(key, B, 1, dkLen, 'sha256')\n\n  // all of these functions are actually moved to the top\n  // due to function hoisting\n\n  function smix (B, Bi, r, N, V, XY) {\n    var Xi = 0\n    var Yi = 128 * r\n    var i\n\n    B.copy(XY, Xi, Bi, Bi + Yi)\n\n    for (i = 0; i < N; i++) {\n      XY.copy(V, i * Yi, Xi, Xi + Yi)\n      blockmix_salsa8(XY, Xi, Yi, r)\n\n      if (tickCallback) tickCallback()\n    }\n\n    for (i = 0; i < N; i++) {\n      var offset = Xi + (2 * r - 1) * 64\n      var j = XY.readUInt32LE(offset) & (N - 1)\n      blockxor(V, j * Yi, XY, Xi, Yi)\n      blockmix_salsa8(XY, Xi, Yi, r)\n\n      if (tickCallback) tickCallback()\n    }\n\n    XY.copy(B, Bi, Xi, Xi + Yi)\n  }\n\n  function blockmix_salsa8 (BY, Bi, Yi, r) {\n    var i\n\n    arraycopy(BY, Bi + (2 * r - 1) * 64, _X, 0, 64)\n\n    for (i = 0; i < 2 * r; i++) {\n      blockxor(BY, i * 64, _X, 0, 64)\n      salsa20_8(_X)\n      arraycopy(_X, 0, BY, Yi + (i * 64), 64)\n    }\n\n    for (i = 0; i < r; i++) {\n      arraycopy(BY, Yi + (i * 2) * 64, BY, Bi + (i * 64), 64)\n    }\n\n    for (i = 0; i < r; i++) {\n      arraycopy(BY, Yi + (i * 2 + 1) * 64, BY, Bi + (i + r) * 64, 64)\n    }\n  }\n\n  function R (a, b) {\n    return (a << b) | (a >>> (32 - b))\n  }\n\n  function salsa20_8 (B) {\n    var i\n\n    for (i = 0; i < 16; i++) {\n      B32[i] = (B[i * 4 + 0] & 0xff) << 0\n      B32[i] |= (B[i * 4 + 1] & 0xff) << 8\n      B32[i] |= (B[i * 4 + 2] & 0xff) << 16\n      B32[i] |= (B[i * 4 + 3] & 0xff) << 24\n      // B32[i] = B.readUInt32LE(i*4)   <--- this is signficantly slower even in Node.js\n    }\n\n    arraycopy(B32, 0, x, 0, 16)\n\n    for (i = 8; i > 0; i -= 2) {\n      x[ 4] ^= R(x[ 0] + x[12], 7)\n      x[ 8] ^= R(x[ 4] + x[ 0], 9)\n      x[12] ^= R(x[ 8] + x[ 4], 13)\n      x[ 0] ^= R(x[12] + x[ 8], 18)\n      x[ 9] ^= R(x[ 5] + x[ 1], 7)\n      x[13] ^= R(x[ 9] + x[ 5], 9)\n      x[ 1] ^= R(x[13] + x[ 9], 13)\n      x[ 5] ^= R(x[ 1] + x[13], 18)\n      x[14] ^= R(x[10] + x[ 6], 7)\n      x[ 2] ^= R(x[14] + x[10], 9)\n      x[ 6] ^= R(x[ 2] + x[14], 13)\n      x[10] ^= R(x[ 6] + x[ 2], 18)\n      x[ 3] ^= R(x[15] + x[11], 7)\n      x[ 7] ^= R(x[ 3] + x[15], 9)\n      x[11] ^= R(x[ 7] + x[ 3], 13)\n      x[15] ^= R(x[11] + x[ 7], 18)\n      x[ 1] ^= R(x[ 0] + x[ 3], 7)\n      x[ 2] ^= R(x[ 1] + x[ 0], 9)\n      x[ 3] ^= R(x[ 2] + x[ 1], 13)\n      x[ 0] ^= R(x[ 3] + x[ 2], 18)\n      x[ 6] ^= R(x[ 5] + x[ 4], 7)\n      x[ 7] ^= R(x[ 6] + x[ 5], 9)\n      x[ 4] ^= R(x[ 7] + x[ 6], 13)\n      x[ 5] ^= R(x[ 4] + x[ 7], 18)\n      x[11] ^= R(x[10] + x[ 9], 7)\n      x[ 8] ^= R(x[11] + x[10], 9)\n      x[ 9] ^= R(x[ 8] + x[11], 13)\n      x[10] ^= R(x[ 9] + x[ 8], 18)\n      x[12] ^= R(x[15] + x[14], 7)\n      x[13] ^= R(x[12] + x[15], 9)\n      x[14] ^= R(x[13] + x[12], 13)\n      x[15] ^= R(x[14] + x[13], 18)\n    }\n\n    for (i = 0; i < 16; ++i) B32[i] = x[i] + B32[i]\n\n    for (i = 0; i < 16; i++) {\n      var bi = i * 4\n      B[bi + 0] = (B32[i] >> 0 & 0xff)\n      B[bi + 1] = (B32[i] >> 8 & 0xff)\n      B[bi + 2] = (B32[i] >> 16 & 0xff)\n      B[bi + 3] = (B32[i] >> 24 & 0xff)\n      // B.writeInt32LE(B32[i], i*4)  //<--- this is signficantly slower even in Node.js\n    }\n  }\n\n  // naive approach... going back to loop unrolling may yield additional performance\n  function blockxor (S, Si, D, Di, len) {\n    for (var i = 0; i < len; i++) {\n      D[Di + i] ^= S[Si + i]\n    }\n  }\n}\n\nfunction arraycopy (src, srcPos, dest, destPos, length) {\n  if (Buffer.isBuffer(src) && Buffer.isBuffer(dest)) {\n    src.copy(dest, destPos, srcPos, srcPos + length)\n  } else {\n    while (length--) {\n      dest[destPos++] = src[srcPos++]\n    }\n  }\n}\n\nmodule.exports = scrypt\n","var types = {\n  Array: function (value) { return value !== null && value !== undefined && value.constructor === Array },\n  Boolean: function (value) { return typeof value === 'boolean' },\n  Function: function (value) { return typeof value === 'function' },\n  Nil: function (value) { return value === undefined || value === null },\n  Number: function (value) { return typeof value === 'number' },\n  Object: function (value) { return typeof value === 'object' },\n  String: function (value) { return typeof value === 'string' },\n  '': function () { return true }\n}\n\n// TODO: deprecate\ntypes.Null = types.Nil\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst types = require('./types');\nconst bech32 = require('bech32');\nconst bs58check = require('bs58check');\nconst typeforce = require('typeforce');\nfunction fromBase58Check(address) {\n  const payload = bs58check.decode(address);\n  // TODO: 4.0.0, move to \"toOutputScript\"\n  if (payload.length < 21) throw new TypeError(address + ' is too short');\n  if (payload.length > 21) throw new TypeError(address + ' is too long');\n  const version = payload.readUInt8(0);\n  const hash = payload.slice(1);\n  return { version, hash };\n}\nexports.fromBase58Check = fromBase58Check;\nfunction fromBech32(address) {\n  const result = bech32.decode(address);\n  const data = bech32.fromWords(result.words.slice(1));\n  return {\n    version: result.words[0],\n    prefix: result.prefix,\n    data: Buffer.from(data),\n  };\n}\nexports.fromBech32 = fromBech32;\nfunction toBase58Check(hash, version) {\n  typeforce(types.tuple(types.Hash160bit, types.UInt8), arguments);\n  const payload = Buffer.allocUnsafe(21);\n  payload.writeUInt8(version, 0);\n  hash.copy(payload, 1);\n  return bs58check.encode(payload);\n}\nexports.toBase58Check = toBase58Check;\nfunction toBech32(data, version, prefix) {\n  const words = bech32.toWords(data);\n  words.unshift(version);\n  return bech32.encode(prefix, words);\n}\nexports.toBech32 = toBech32;\nfunction fromOutputScript(output, network) {\n  // TODO: Network\n  network = network || networks.bitcoin;\n  try {\n    return payments.p2pkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2sh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wpkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wsh({ output, network }).address;\n  } catch (e) {}\n  throw new Error(bscript.toASM(output) + ' has no matching Address');\n}\nexports.fromOutputScript = fromOutputScript;\nfunction toOutputScript(address, network) {\n  network = network || networks.bitcoin;\n  let decodeBase58;\n  let decodeBech32;\n  try {\n    decodeBase58 = fromBase58Check(address);\n  } catch (e) {}\n  if (decodeBase58) {\n    if (decodeBase58.version === network.pubKeyHash)\n      return payments.p2pkh({ hash: decodeBase58.hash }).output;\n    if (decodeBase58.version === network.scriptHash)\n      return payments.p2sh({ hash: decodeBase58.hash }).output;\n  } else {\n    try {\n      decodeBech32 = fromBech32(address);\n    } catch (e) {}\n    if (decodeBech32) {\n      if (decodeBech32.prefix !== network.bech32)\n        throw new Error(address + ' has an invalid prefix');\n      if (decodeBech32.version === 0) {\n        if (decodeBech32.data.length === 20)\n          return payments.p2wpkh({ hash: decodeBech32.data }).output;\n        if (decodeBech32.data.length === 32)\n          return payments.p2wsh({ hash: decodeBech32.data }).output;\n      }\n    }\n  }\n  throw new Error(address + ' has no matching Script');\n}\nexports.toOutputScript = toOutputScript;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst NETWORKS = require('./networks');\nconst types = require('./types');\nconst ecc = require('tiny-secp256k1');\nconst randomBytes = require('randombytes');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst isOptions = typeforce.maybe(\n  typeforce.compile({\n    compressed: types.maybe(types.Boolean),\n    network: types.maybe(types.Network),\n  }),\n);\nclass ECPair {\n  constructor(__D, __Q, options) {\n    this.__D = __D;\n    this.__Q = __Q;\n    this.lowR = false;\n    if (options === undefined) options = {};\n    this.compressed =\n      options.compressed === undefined ? true : options.compressed;\n    this.network = options.network || NETWORKS.bitcoin;\n    if (__Q !== undefined) this.__Q = ecc.pointCompress(__Q, this.compressed);\n  }\n  get privateKey() {\n    return this.__D;\n  }\n  get publicKey() {\n    if (!this.__Q) this.__Q = ecc.pointFromScalar(this.__D, this.compressed);\n    return this.__Q;\n  }\n  toWIF() {\n    if (!this.__D) throw new Error('Missing private key');\n    return wif.encode(this.network.wif, this.__D, this.compressed);\n  }\n  sign(hash, lowR) {\n    if (!this.__D) throw new Error('Missing private key');\n    if (lowR === undefined) lowR = this.lowR;\n    if (lowR === false) {\n      return ecc.sign(hash, this.__D);\n    } else {\n      let sig = ecc.sign(hash, this.__D);\n      const extraData = Buffer.alloc(32, 0);\n      let counter = 0;\n      // if first try is lowR, skip the loop\n      // for second try and on, add extra entropy counting up\n      while (sig[0] > 0x7f) {\n        counter++;\n        extraData.writeUIntLE(counter, 0, 6);\n        sig = ecc.signWithEntropy(hash, this.__D, extraData);\n      }\n      return sig;\n    }\n  }\n  verify(hash, signature) {\n    return ecc.verify(hash, this.publicKey, signature);\n  }\n}\nfunction fromPrivateKey(buffer, options) {\n  typeforce(types.Buffer256bit, buffer);\n  if (!ecc.isPrivate(buffer))\n    throw new TypeError('Private key not in range [1, n)');\n  typeforce(isOptions, options);\n  return new ECPair(buffer, undefined, options);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPublicKey(buffer, options) {\n  typeforce(ecc.isPoint, buffer);\n  typeforce(isOptions, options);\n  return new ECPair(undefined, buffer, options);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromWIF(wifString, network) {\n  const decoded = wif.decode(wifString);\n  const version = decoded.version;\n  // list of networks?\n  if (types.Array(network)) {\n    network = network\n      .filter(x => {\n        return version === x.wif;\n      })\n      .pop();\n    if (!network) throw new Error('Unknown network version');\n    // otherwise, assume a network object (or default to bitcoin)\n  } else {\n    network = network || NETWORKS.bitcoin;\n    if (version !== network.wif) throw new Error('Invalid network version');\n  }\n  return fromPrivateKey(decoded.privateKey, {\n    compressed: decoded.compressed,\n    network: network,\n  });\n}\nexports.fromWIF = fromWIF;\nfunction makeRandom(options) {\n  typeforce(isOptions, options);\n  if (options === undefined) options = {};\n  const rng = options.rng || randomBytes;\n  let d;\n  do {\n    d = rng(32);\n    typeforce(types.Buffer256bit, d);\n  } while (!ecc.isPrivate(d));\n  return fromPrivateKey(d, options);\n}\nexports.makeRandom = makeRandom;\n","'use strict'\nvar Buffer = require('safe-buffer').Buffer\n\n// Number.MAX_SAFE_INTEGER\nvar MAX_SAFE_INTEGER = 9007199254740991\n\nfunction checkUInt53 (n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0) throw new RangeError('value out of range')\n}\n\nfunction encode (number, buffer, offset) {\n  checkUInt53(number)\n\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(number))\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  // 8 bit\n  if (number < 0xfd) {\n    buffer.writeUInt8(number, offset)\n    encode.bytes = 1\n\n  // 16 bit\n  } else if (number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n    encode.bytes = 3\n\n  // 32 bit\n  } else if (number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n    encode.bytes = 5\n\n  // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset)\n    buffer.writeUInt32LE(number >>> 0, offset + 1)\n    buffer.writeUInt32LE((number / 0x100000000) | 0, offset + 5)\n    encode.bytes = 9\n  }\n\n  return buffer\n}\n\nfunction decode (buffer, offset) {\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  var first = buffer.readUInt8(offset)\n\n  // 8 bit\n  if (first < 0xfd) {\n    decode.bytes = 1\n    return first\n\n  // 16 bit\n  } else if (first === 0xfd) {\n    decode.bytes = 3\n    return buffer.readUInt16LE(offset + 1)\n\n  // 32 bit\n  } else if (first === 0xfe) {\n    decode.bytes = 5\n    return buffer.readUInt32LE(offset + 1)\n\n  // 64 bit\n  } else {\n    decode.bytes = 9\n    var lo = buffer.readUInt32LE(offset + 1)\n    var hi = buffer.readUInt32LE(offset + 5)\n    var number = hi * 0x0100000000 + lo\n    checkUInt53(number)\n\n    return number\n  }\n}\n\nfunction encodingLength (number) {\n  checkUInt53(number)\n\n  return (\n    number < 0xfd ? 1\n      : number <= 0xffff ? 3\n        : number <= 0xffffffff ? 5\n          : 9\n  )\n}\n\nmodule.exports = { encode: encode, decode: decode, encodingLength: encodingLength }\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../typeFields');\nconst globalXpub = require('./global/globalXpub');\nconst unsignedTx = require('./global/unsignedTx');\nconst finalScriptSig = require('./input/finalScriptSig');\nconst finalScriptWitness = require('./input/finalScriptWitness');\nconst nonWitnessUtxo = require('./input/nonWitnessUtxo');\nconst partialSig = require('./input/partialSig');\nconst porCommitment = require('./input/porCommitment');\nconst sighashType = require('./input/sighashType');\nconst witnessUtxo = require('./input/witnessUtxo');\nconst bip32Derivation = require('./shared/bip32Derivation');\nconst checkPubkey = require('./shared/checkPubkey');\nconst redeemScript = require('./shared/redeemScript');\nconst witnessScript = require('./shared/witnessScript');\nconst globals = {\n  unsignedTx,\n  globalXpub,\n  // pass an Array of key bytes that require pubkey beside the key\n  checkPubkey: checkPubkey.makeChecker([]),\n};\nexports.globals = globals;\nconst inputs = {\n  nonWitnessUtxo,\n  partialSig,\n  sighashType,\n  finalScriptSig,\n  finalScriptWitness,\n  porCommitment,\n  witnessUtxo,\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.InputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.InputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.InputTypes.PARTIAL_SIG,\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.inputs = inputs;\nconst outputs = {\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.OutputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.OutputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.outputs = outputs;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst varuint = require('./varint');\nexports.range = n => [...Array(n).keys()];\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction keyValsToBuffer(keyVals) {\n  const buffers = keyVals.map(keyValToBuffer);\n  buffers.push(Buffer.from([0]));\n  return Buffer.concat(buffers);\n}\nexports.keyValsToBuffer = keyValsToBuffer;\nfunction keyValToBuffer(keyVal) {\n  const keyLen = keyVal.key.length;\n  const valLen = keyVal.value.length;\n  const keyVarIntLen = varuint.encodingLength(keyLen);\n  const valVarIntLen = varuint.encodingLength(valLen);\n  const buffer = Buffer.allocUnsafe(\n    keyVarIntLen + keyLen + valVarIntLen + valLen,\n  );\n  varuint.encode(keyLen, buffer, 0);\n  keyVal.key.copy(buffer, keyVarIntLen);\n  varuint.encode(valLen, buffer, keyVarIntLen + keyLen);\n  keyVal.value.copy(buffer, keyVarIntLen + keyLen + valVarIntLen);\n  return buffer;\n}\nexports.keyValToBuffer = keyValToBuffer;\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","var native = require('./native')\n\nfunction getTypeName (fn) {\n  return fn.name || fn.toString().match(/function (.*?)\\s*\\(/)[1]\n}\n\nfunction getValueTypeName (value) {\n  return native.Nil(value) ? '' : getTypeName(value.constructor)\n}\n\nfunction getValue (value) {\n  if (native.Function(value)) return ''\n  if (native.String(value)) return JSON.stringify(value)\n  if (value && native.Object(value)) return ''\n  return value\n}\n\nfunction captureStackTrace (e, t) {\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(e, t)\n  }\n}\n\nfunction tfJSON (type) {\n  if (native.Function(type)) return type.toJSON ? type.toJSON() : getTypeName(type)\n  if (native.Array(type)) return 'Array'\n  if (type && native.Object(type)) return 'Object'\n\n  return type !== undefined ? type : ''\n}\n\nfunction tfErrorString (type, value, valueTypeName) {\n  var valueJson = getValue(value)\n\n  return 'Expected ' + tfJSON(type) + ', got' +\n    (valueTypeName !== '' ? ' ' + valueTypeName : '') +\n    (valueJson !== '' ? ' ' + valueJson : '')\n}\n\nfunction TfTypeError (type, value, valueTypeName) {\n  valueTypeName = valueTypeName || getValueTypeName(value)\n  this.message = tfErrorString(type, value, valueTypeName)\n\n  captureStackTrace(this, TfTypeError)\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfTypeError.prototype = Object.create(Error.prototype)\nTfTypeError.prototype.constructor = TfTypeError\n\nfunction tfPropertyErrorString (type, label, name, value, valueTypeName) {\n  var description = '\" of type '\n  if (label === 'key') description = '\" with key type '\n\n  return tfErrorString('property \"' + tfJSON(name) + description + tfJSON(type), value, valueTypeName)\n}\n\nfunction TfPropertyTypeError (type, property, label, value, valueTypeName) {\n  if (type) {\n    valueTypeName = valueTypeName || getValueTypeName(value)\n    this.message = tfPropertyErrorString(type, label, property, value, valueTypeName)\n  } else {\n    this.message = 'Unexpected property \"' + property + '\"'\n  }\n\n  captureStackTrace(this, TfTypeError)\n  this.__label = label\n  this.__property = property\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfPropertyTypeError.prototype = Object.create(Error.prototype)\nTfPropertyTypeError.prototype.constructor = TfTypeError\n\nfunction tfCustomError (expected, actual) {\n  return new TfTypeError(expected, {}, actual)\n}\n\nfunction tfSubError (e, property, label) {\n  // sub child?\n  if (e instanceof TfPropertyTypeError) {\n    property = property + '.' + e.__property\n\n    e = new TfPropertyTypeError(\n      e.__type, property, e.__label, e.__value, e.__valueTypeName\n    )\n\n  // child?\n  } else if (e instanceof TfTypeError) {\n    e = new TfPropertyTypeError(\n      e.__type, property, label, e.__value, e.__valueTypeName\n    )\n  }\n\n  captureStackTrace(e)\n  return e\n}\n\nmodule.exports = {\n  TfTypeError: TfTypeError,\n  TfPropertyTypeError: TfPropertyTypeError,\n  tfCustomError: tfCustomError,\n  tfSubError: tfSubError,\n  tfJSON: tfJSON,\n  getValueTypeName: getValueTypeName\n}\n","var bs58check = require('bs58check')\n\nfunction decodeRaw (buffer, version) {\n  // check version only if defined\n  if (version !== undefined && buffer[0] !== version) throw new Error('Invalid network version')\n\n  // uncompressed\n  if (buffer.length === 33) {\n    return {\n      version: buffer[0],\n      privateKey: buffer.slice(1, 33),\n      compressed: false\n    }\n  }\n\n  // invalid length\n  if (buffer.length !== 34) throw new Error('Invalid WIF length')\n\n  // invalid compression flag\n  if (buffer[33] !== 0x01) throw new Error('Invalid compression flag')\n\n  return {\n    version: buffer[0],\n    privateKey: buffer.slice(1, 33),\n    compressed: true\n  }\n}\n\nfunction encodeRaw (version, privateKey, compressed) {\n  var result = new Buffer(compressed ? 34 : 33)\n\n  result.writeUInt8(version, 0)\n  privateKey.copy(result, 1)\n\n  if (compressed) {\n    result[33] = 0x01\n  }\n\n  return result\n}\n\nfunction decode (string, version) {\n  return decodeRaw(bs58check.decode(string), version)\n}\n\nfunction encode (version, privateKey, compressed) {\n  if (typeof version === 'number') return bs58check.encode(encodeRaw(version, privateKey, compressed))\n\n  return bs58check.encode(\n    encodeRaw(\n      version.version,\n      version.privateKey,\n      version.compressed\n    )\n  )\n}\n\nmodule.exports = {\n  decode: decode,\n  decodeRaw: decodeRaw,\n  encode: encode,\n  encodeRaw: encodeRaw\n}\n","'use strict';\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, '__esModule', { value: true });\n__export(require('./fromBuffer'));\n__export(require('./toBuffer'));\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst converter = require('./converter');\nfunction checkForInput(inputs, inputIndex) {\n  const input = inputs[inputIndex];\n  if (input === undefined) throw new Error(`No input #${inputIndex}`);\n  return input;\n}\nexports.checkForInput = checkForInput;\nfunction checkForOutput(outputs, outputIndex) {\n  const output = outputs[outputIndex];\n  if (output === undefined) throw new Error(`No output #${outputIndex}`);\n  return output;\n}\nexports.checkForOutput = checkForOutput;\nfunction checkHasKey(checkKeyVal, keyVals, enumLength) {\n  if (checkKeyVal.key[0] < enumLength) {\n    throw new Error(\n      `Use the method for your specific key instead of addUnknownKeyVal*`,\n    );\n  }\n  if (\n    keyVals &&\n    keyVals.filter(kv => kv.key.equals(checkKeyVal.key)).length !== 0\n  ) {\n    throw new Error(`Duplicate Key: ${checkKeyVal.key.toString('hex')}`);\n  }\n}\nexports.checkHasKey = checkHasKey;\nfunction getEnumLength(myenum) {\n  let count = 0;\n  Object.keys(myenum).forEach(val => {\n    if (Number(isNaN(Number(val)))) {\n      count++;\n    }\n  });\n  return count;\n}\nexports.getEnumLength = getEnumLength;\nfunction inputCheckUncleanFinalized(inputIndex, input) {\n  let result = false;\n  if (input.nonWitnessUtxo || input.witnessUtxo) {\n    const needScriptSig = !!input.redeemScript;\n    const needWitnessScript = !!input.witnessScript;\n    const scriptSigOK = !needScriptSig || !!input.finalScriptSig;\n    const witnessScriptOK = !needWitnessScript || !!input.finalScriptWitness;\n    const hasOneFinal = !!input.finalScriptSig || !!input.finalScriptWitness;\n    result = scriptSigOK && witnessScriptOK && hasOneFinal;\n  }\n  if (result === false) {\n    throw new Error(\n      `Input #${inputIndex} has too much or too little data to clean`,\n    );\n  }\n}\nexports.inputCheckUncleanFinalized = inputCheckUncleanFinalized;\nfunction throwForUpdateMaker(typeName, name, expected, data) {\n  throw new Error(\n    `Data for ${typeName} key ${name} is incorrect: Expected ` +\n      `${expected} and got ${JSON.stringify(data)}`,\n  );\n}\nfunction updateMaker(typeName) {\n  return (updateData, mainData) => {\n    for (const name of Object.keys(updateData)) {\n      // @ts-ignore\n      const data = updateData[name];\n      // @ts-ignore\n      const { canAdd, canAddToArray, check, expected } =\n        // @ts-ignore\n        converter[typeName + 's'][name] || {};\n      const isArray = !!canAddToArray;\n      // If unknown data. ignore and do not add\n      if (check) {\n        if (isArray) {\n          if (\n            !Array.isArray(data) ||\n            // @ts-ignore\n            (mainData[name] && !Array.isArray(mainData[name]))\n          ) {\n            throw new Error(`Key type ${name} must be an array`);\n          }\n          if (!data.every(check)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          // @ts-ignore\n          const arr = mainData[name] || [];\n          const dupeCheckSet = new Set();\n          if (!data.every(v => canAddToArray(arr, v, dupeCheckSet))) {\n            throw new Error('Can not add duplicate data to array');\n          }\n          // @ts-ignore\n          mainData[name] = arr.concat(data);\n        } else {\n          if (!check(data)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          if (!canAdd(mainData, data)) {\n            throw new Error(`Can not add duplicate data to ${typeName}`);\n          }\n          // @ts-ignore\n          mainData[name] = data;\n        }\n      }\n    }\n  };\n}\nexports.updateGlobal = updateMaker('global');\nexports.updateInput = updateMaker('input');\nexports.updateOutput = updateMaker('output');\nfunction addInputAttributes(inputs, data) {\n  const index = inputs.length - 1;\n  const input = checkForInput(inputs, index);\n  exports.updateInput(data, input);\n}\nexports.addInputAttributes = addInputAttributes;\nfunction addOutputAttributes(outputs, data) {\n  const index = outputs.length - 1;\n  const output = checkForInput(outputs, index);\n  exports.updateOutput(data, output);\n}\nexports.addOutputAttributes = addOutputAttributes;\nfunction defaultVersionSetter(version, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Version: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(version, 0);\n  return txBuf;\n}\nexports.defaultVersionSetter = defaultVersionSetter;\nfunction defaultLocktimeSetter(locktime, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Locktime: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(locktime, txBuf.length - 4);\n  return txBuf;\n}\nexports.defaultLocktimeSetter = defaultLocktimeSetter;\n","'use strict';\n// OP_0 {pubKeyHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 22 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x14\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness pubKeyHash output';\n};\n","'use strict';\n// OP_0 {scriptHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 34 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x20\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness scriptHash output';\n};\n","module.exports = {\n\tMODE_NUMBER :\t\t1 << 0,\n\tMODE_ALPHA_NUM : \t1 << 1,\n\tMODE_8BIT_BYTE : \t1 << 2,\n\tMODE_KANJI :\t\t1 << 3\n};\n","module.exports = {\n\tL : 1,\n\tM : 0,\n\tQ : 3,\n\tH : 2\n};\n\n","var math = require('./math');\n\nfunction QRPolynomial(num, shift) {\n\n\tif (num.length == undefined) {\n\t\tthrow new Error(num.length + \"/\" + shift);\n\t}\n\n\tvar offset = 0;\n\n\twhile (offset < num.length && num[offset] == 0) {\n\t\toffset++;\n\t}\n\n\tthis.num = new Array(num.length - offset + shift);\n\tfor (var i = 0; i < num.length - offset; i++) {\n\t\tthis.num[i] = num[i + offset];\n\t}\n}\n\nQRPolynomial.prototype = {\n\n\tget : function(index) {\n\t\treturn this.num[index];\n\t},\n\t\n\tgetLength : function() {\n\t\treturn this.num.length;\n\t},\n\t\n\tmultiply : function(e) {\n\t\n\t\tvar num = new Array(this.getLength() + e.getLength() - 1);\n\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tfor (var j = 0; j < e.getLength(); j++) {\n\t\t\t\tnum[i + j] ^= math.gexp(math.glog(this.get(i) ) + math.glog(e.get(j) ) );\n\t\t\t}\n\t\t}\n\t\n\t\treturn new QRPolynomial(num, 0);\n\t},\n\t\n\tmod : function(e) {\n\t\n\t\tif (this.getLength() - e.getLength() < 0) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar ratio = math.glog(this.get(0) ) - math.glog(e.get(0) );\n\t\n\t\tvar num = new Array(this.getLength() );\n\t\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tnum[i] = this.get(i);\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < e.getLength(); i++) {\n\t\t\tnum[i] ^= math.gexp(math.glog(e.get(i) ) + ratio);\n\t\t}\n\t\n\t\t// recursive call\n\t\treturn new QRPolynomial(num, 0).mod(e);\n\t}\n};\n\nmodule.exports = QRPolynomial;\n","var QRMath = {\n\n\tglog : function(n) {\n\t\n\t\tif (n < 1) {\n\t\t\tthrow new Error(\"glog(\" + n + \")\");\n\t\t}\n\t\t\n\t\treturn QRMath.LOG_TABLE[n];\n\t},\n\t\n\tgexp : function(n) {\n\t\n\t\twhile (n < 0) {\n\t\t\tn += 255;\n\t\t}\n\t\n\t\twhile (n >= 256) {\n\t\t\tn -= 255;\n\t\t}\n\t\n\t\treturn QRMath.EXP_TABLE[n];\n\t},\n\t\n\tEXP_TABLE : new Array(256),\n\t\n\tLOG_TABLE : new Array(256)\n\n};\n\t\nfor (var i = 0; i < 8; i++) {\n\tQRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n\tQRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4]\n\t\t^ QRMath.EXP_TABLE[i - 5]\n\t\t^ QRMath.EXP_TABLE[i - 6]\n\t\t^ QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n\tQRMath.LOG_TABLE[QRMath.EXP_TABLE[i] ] = i;\n}\n\nmodule.exports = QRMath;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip32 = require('bip32');\nexports.bip32 = bip32;\nconst address = require('./address');\nexports.address = address;\nconst crypto = require('./crypto');\nexports.crypto = crypto;\nconst ECPair = require('./ecpair');\nexports.ECPair = ECPair;\nconst networks = require('./networks');\nexports.networks = networks;\nconst payments = require('./payments');\nexports.payments = payments;\nconst script = require('./script');\nexports.script = script;\nvar block_1 = require('./block');\nexports.Block = block_1.Block;\nvar psbt_1 = require('./psbt');\nexports.Psbt = psbt_1.Psbt;\nvar script_1 = require('./script');\nexports.opcodes = script_1.OPS;\nvar transaction_1 = require('./transaction');\nexports.Transaction = transaction_1.Transaction;\nvar transaction_builder_1 = require('./transaction_builder');\nexports.TransactionBuilder = transaction_builder_1.TransactionBuilder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bip32_1 = require(\"./bip32\");\nexports.fromSeed = bip32_1.fromSeed;\nexports.fromBase58 = bip32_1.fromBase58;\nexports.fromPublicKey = bip32_1.fromPublicKey;\nexports.fromPrivateKey = bip32_1.fromPrivateKey;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto = require(\"./crypto\");\nconst bs58check = require('bs58check');\nconst ecc = require('tiny-secp256k1');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst UINT256_TYPE = typeforce.BufferN(32);\nconst NETWORK_TYPE = typeforce.compile({\n    wif: typeforce.UInt8,\n    bip32: {\n        public: typeforce.UInt32,\n        private: typeforce.UInt32,\n    },\n});\nconst BITCOIN = {\n    messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n    bech32: 'bc',\n    bip32: {\n        public: 0x0488b21e,\n        private: 0x0488ade4,\n    },\n    pubKeyHash: 0x00,\n    scriptHash: 0x05,\n    wif: 0x80,\n};\nconst HIGHEST_BIT = 0x80000000;\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction BIP32Path(value) {\n    return (typeforce.String(value) && value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/) !== null);\n}\nfunction UInt31(value) {\n    return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nclass BIP32 {\n    constructor(__D, __Q, chainCode, network, __DEPTH = 0, __INDEX = 0, __PARENT_FINGERPRINT = 0x00000000) {\n        this.__D = __D;\n        this.__Q = __Q;\n        this.chainCode = chainCode;\n        this.network = network;\n        this.__DEPTH = __DEPTH;\n        this.__INDEX = __INDEX;\n        this.__PARENT_FINGERPRINT = __PARENT_FINGERPRINT;\n        typeforce(NETWORK_TYPE, network);\n        this.lowR = false;\n    }\n    get depth() {\n        return this.__DEPTH;\n    }\n    get index() {\n        return this.__INDEX;\n    }\n    get parentFingerprint() {\n        return this.__PARENT_FINGERPRINT;\n    }\n    get publicKey() {\n        if (this.__Q === undefined)\n            this.__Q = ecc.pointFromScalar(this.__D, true);\n        return this.__Q;\n    }\n    get privateKey() {\n        return this.__D;\n    }\n    get identifier() {\n        return crypto.hash160(this.publicKey);\n    }\n    get fingerprint() {\n        return this.identifier.slice(0, 4);\n    }\n    get compressed() {\n        return true;\n    }\n    // Private === not neutered\n    // Public === neutered\n    isNeutered() {\n        return this.__D === undefined;\n    }\n    neutered() {\n        return fromPublicKeyLocal(this.publicKey, this.chainCode, this.network, this.depth, this.index, this.parentFingerprint);\n    }\n    toBase58() {\n        const network = this.network;\n        const version = !this.isNeutered()\n            ? network.bip32.private\n            : network.bip32.public;\n        const buffer = Buffer.allocUnsafe(78);\n        // 4 bytes: version bytes\n        buffer.writeUInt32BE(version, 0);\n        // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ....\n        buffer.writeUInt8(this.depth, 4);\n        // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n        buffer.writeUInt32BE(this.parentFingerprint, 5);\n        // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n        // This is encoded in big endian. (0x00000000 if master key)\n        buffer.writeUInt32BE(this.index, 9);\n        // 32 bytes: the chain code\n        this.chainCode.copy(buffer, 13);\n        // 33 bytes: the public key or private key data\n        if (!this.isNeutered()) {\n            // 0x00 + k for private keys\n            buffer.writeUInt8(0, 45);\n            this.privateKey.copy(buffer, 46);\n            // 33 bytes: the public key\n        }\n        else {\n            // X9.62 encoding for public keys\n            this.publicKey.copy(buffer, 45);\n        }\n        return bs58check.encode(buffer);\n    }\n    toWIF() {\n        if (!this.privateKey)\n            throw new TypeError('Missing private key');\n        return wif.encode(this.network.wif, this.privateKey, true);\n    }\n    // https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki#child-key-derivation-ckd-functions\n    derive(index) {\n        typeforce(typeforce.UInt32, index);\n        const isHardened = index >= HIGHEST_BIT;\n        const data = Buffer.allocUnsafe(37);\n        // Hardened child\n        if (isHardened) {\n            if (this.isNeutered())\n                throw new TypeError('Missing private key for hardened child key');\n            // data = 0x00 || ser256(kpar) || ser32(index)\n            data[0] = 0x00;\n            this.privateKey.copy(data, 1);\n            data.writeUInt32BE(index, 33);\n            // Normal child\n        }\n        else {\n            // data = serP(point(kpar)) || ser32(index)\n            //      = serP(Kpar) || ser32(index)\n            this.publicKey.copy(data, 0);\n            data.writeUInt32BE(index, 33);\n        }\n        const I = crypto.hmacSHA512(this.chainCode, data);\n        const IL = I.slice(0, 32);\n        const IR = I.slice(32);\n        // if parse256(IL) >= n, proceed with the next value for i\n        if (!ecc.isPrivate(IL))\n            return this.derive(index + 1);\n        // Private parent key -> private child key\n        let hd;\n        if (!this.isNeutered()) {\n            // ki = parse256(IL) + kpar (mod n)\n            const ki = ecc.privateAdd(this.privateKey, IL);\n            // In case ki == 0, proceed with the next value for i\n            if (ki == null)\n                return this.derive(index + 1);\n            hd = fromPrivateKeyLocal(ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n            // Public parent key -> public child key\n        }\n        else {\n            // Ki = point(parse256(IL)) + Kpar\n            //    = G*IL + Kpar\n            const Ki = ecc.pointAddScalar(this.publicKey, IL, true);\n            // In case Ki is the point at infinity, proceed with the next value for i\n            if (Ki === null)\n                return this.derive(index + 1);\n            hd = fromPublicKeyLocal(Ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n        }\n        return hd;\n    }\n    deriveHardened(index) {\n        typeforce(UInt31, index);\n        // Only derives hardened private keys by default\n        return this.derive(index + HIGHEST_BIT);\n    }\n    derivePath(path) {\n        typeforce(BIP32Path, path);\n        let splitPath = path.split('/');\n        if (splitPath[0] === 'm') {\n            if (this.parentFingerprint)\n                throw new TypeError('Expected master, got child');\n            splitPath = splitPath.slice(1);\n        }\n        return splitPath.reduce((prevHd, indexStr) => {\n            let index;\n            if (indexStr.slice(-1) === `'`) {\n                index = parseInt(indexStr.slice(0, -1), 10);\n                return prevHd.deriveHardened(index);\n            }\n            else {\n                index = parseInt(indexStr, 10);\n                return prevHd.derive(index);\n            }\n        }, this);\n    }\n    sign(hash, lowR) {\n        if (!this.privateKey)\n            throw new Error('Missing private key');\n        if (lowR === undefined)\n            lowR = this.lowR;\n        if (lowR === false) {\n            return ecc.sign(hash, this.privateKey);\n        }\n        else {\n            let sig = ecc.sign(hash, this.privateKey);\n            const extraData = Buffer.alloc(32, 0);\n            let counter = 0;\n            // if first try is lowR, skip the loop\n            // for second try and on, add extra entropy counting up\n            while (sig[0] > 0x7f) {\n                counter++;\n                extraData.writeUIntLE(counter, 0, 6);\n                sig = ecc.signWithEntropy(hash, this.privateKey, extraData);\n            }\n            return sig;\n        }\n    }\n    verify(hash, signature) {\n        return ecc.verify(hash, this.publicKey, signature);\n    }\n}\nfunction fromBase58(inString, network) {\n    const buffer = bs58check.decode(inString);\n    if (buffer.length !== 78)\n        throw new TypeError('Invalid buffer length');\n    network = network || BITCOIN;\n    // 4 bytes: version bytes\n    const version = buffer.readUInt32BE(0);\n    if (version !== network.bip32.private && version !== network.bip32.public)\n        throw new TypeError('Invalid network version');\n    // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ...\n    const depth = buffer[4];\n    // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n    const parentFingerprint = buffer.readUInt32BE(5);\n    if (depth === 0) {\n        if (parentFingerprint !== 0x00000000)\n            throw new TypeError('Invalid parent fingerprint');\n    }\n    // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n    // This is encoded in MSB order. (0x00000000 if master key)\n    const index = buffer.readUInt32BE(9);\n    if (depth === 0 && index !== 0)\n        throw new TypeError('Invalid index');\n    // 32 bytes: the chain code\n    const chainCode = buffer.slice(13, 45);\n    let hd;\n    // 33 bytes: private key data (0x00 + k)\n    if (version === network.bip32.private) {\n        if (buffer.readUInt8(45) !== 0x00)\n            throw new TypeError('Invalid private key');\n        const k = buffer.slice(46, 78);\n        hd = fromPrivateKeyLocal(k, chainCode, network, depth, index, parentFingerprint);\n        // 33 bytes: public key data (0x02 + X or 0x03 + X)\n    }\n    else {\n        const X = buffer.slice(45, 78);\n        hd = fromPublicKeyLocal(X, chainCode, network, depth, index, parentFingerprint);\n    }\n    return hd;\n}\nexports.fromBase58 = fromBase58;\nfunction fromPrivateKey(privateKey, chainCode, network) {\n    return fromPrivateKeyLocal(privateKey, chainCode, network);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPrivateKeyLocal(privateKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        privateKey: UINT256_TYPE,\n        chainCode: UINT256_TYPE,\n    }, { privateKey, chainCode });\n    network = network || BITCOIN;\n    if (!ecc.isPrivate(privateKey))\n        throw new TypeError('Private key not in range [1, n)');\n    return new BIP32(privateKey, undefined, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromPublicKey(publicKey, chainCode, network) {\n    return fromPublicKeyLocal(publicKey, chainCode, network);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromPublicKeyLocal(publicKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        publicKey: typeforce.BufferN(33),\n        chainCode: UINT256_TYPE,\n    }, { publicKey, chainCode });\n    network = network || BITCOIN;\n    // verify the X coordinate is a point on the curve\n    if (!ecc.isPoint(publicKey))\n        throw new TypeError('Point is not on the curve');\n    return new BIP32(undefined, publicKey, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromSeed(seed, network) {\n    typeforce(typeforce.Buffer, seed);\n    if (seed.length < 16)\n        throw new TypeError('Seed should be at least 128 bits');\n    if (seed.length > 64)\n        throw new TypeError('Seed should be at most 512 bits');\n    network = network || BITCOIN;\n    const I = crypto.hmacSHA512(Buffer.from('Bitcoin seed', 'utf8'), seed);\n    const IL = I.slice(0, 32);\n    const IR = I.slice(32);\n    return fromPrivateKey(IL, IR, network);\n}\nexports.fromSeed = fromSeed;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst createHash = require('create-hash');\nconst createHmac = require('create-hmac');\nfunction hash160(buffer) {\n    const sha256Hash = createHash('sha256')\n        .update(buffer)\n        .digest();\n    try {\n        return createHash('rmd160')\n            .update(sha256Hash)\n            .digest();\n    }\n    catch (err) {\n        return createHash('ripemd160')\n            .update(sha256Hash)\n            .digest();\n    }\n}\nexports.hash160 = hash160;\nfunction hmacSHA512(key, data) {\n    return createHmac('sha512', key)\n        .update(data)\n        .digest();\n}\nexports.hmacSHA512 = hmacSHA512;\n","'use strict'\n\nvar base58 = require('bs58')\nvar Buffer = require('safe-buffer').Buffer\n\nmodule.exports = function (checksumFn) {\n  // Encode a buffer as a base58-check encoded string\n  function encode (payload) {\n    var checksum = checksumFn(payload)\n\n    return base58.encode(Buffer.concat([\n      payload,\n      checksum\n    ], payload.length + 4))\n  }\n\n  function decodeRaw (buffer) {\n    var payload = buffer.slice(0, -4)\n    var checksum = buffer.slice(-4)\n    var newChecksum = checksumFn(payload)\n\n    if (checksum[0] ^ newChecksum[0] |\n        checksum[1] ^ newChecksum[1] |\n        checksum[2] ^ newChecksum[2] |\n        checksum[3] ^ newChecksum[3]) return\n\n    return payload\n  }\n\n  // Decode a base58-check encoded string to a buffer, no result if checksum is wrong\n  function decodeUnsafe (string) {\n    var buffer = base58.decodeUnsafe(string)\n    if (!buffer) return\n\n    return decodeRaw(buffer)\n  }\n\n  function decode (string) {\n    var buffer = base58.decode(string)\n    var payload = decodeRaw(buffer, checksumFn)\n    if (!payload) throw new Error('Invalid checksum')\n    return payload\n  }\n\n  return {\n    encode: encode,\n    decode: decode,\n    decodeUnsafe: decodeUnsafe\n  }\n}\n","var basex = require('base-x')\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","const createHmac = require('create-hmac')\n\nconst ONE1 = Buffer.alloc(1, 1)\nconst ZERO1 = Buffer.alloc(1, 0)\n\n// https://tools.ietf.org/html/rfc6979#section-3.2\nfunction deterministicGenerateK (hash, x, checkSig, isPrivate, extraEntropy) {\n  // Step A, ignored as hash already provided\n  // Step B\n  // Step C\n  let k = Buffer.alloc(32, 0)\n  let v = Buffer.alloc(32, 1)\n\n  // Step D\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ZERO1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step E\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step F\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ONE1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step G\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step H1/H2a, ignored as tlen === qlen (256 bit)\n  // Step H2b\n  v = createHmac('sha256', k).update(v).digest()\n\n  let T = v\n\n  // Step H3, repeat until T is within the interval [1, n - 1] and is suitable for ECDSA\n  while (!isPrivate(T) || !checkSig(T)) {\n    k = createHmac('sha256', k)\n      .update(v)\n      .update(ZERO1)\n      .digest()\n\n    v = createHmac('sha256', k).update(v).digest()\n\n    // Step H1/H2a, again, ignored as tlen === qlen (256 bit)\n    // Step H2b again\n    v = createHmac('sha256', k).update(v).digest()\n    T = v\n  }\n\n  return T\n}\n\nmodule.exports = deterministicGenerateK\n","var NATIVE = require('./native')\nvar ERRORS = require('./errors')\n\nfunction _Buffer (value) {\n  return Buffer.isBuffer(value)\n}\n\nfunction Hex (value) {\n  return typeof value === 'string' && /^([0-9a-f]{2})+$/i.test(value)\n}\n\nfunction _LengthN (type, length) {\n  var name = type.toJSON()\n\n  function Length (value) {\n    if (!type(value)) return false\n    if (value.length === length) return true\n\n    throw ERRORS.tfCustomError(name + '(Length: ' + length + ')', name + '(Length: ' + value.length + ')')\n  }\n  Length.toJSON = function () { return name }\n\n  return Length\n}\n\nvar _ArrayN = _LengthN.bind(null, NATIVE.Array)\nvar _BufferN = _LengthN.bind(null, _Buffer)\nvar _HexN = _LengthN.bind(null, Hex)\nvar _StringN = _LengthN.bind(null, NATIVE.String)\n\nfunction Range (a, b, f) {\n  f = f || NATIVE.Number\n  function _range (value, strict) {\n    return f(value, strict) && (value > a) && (value < b)\n  }\n  _range.toJSON = function () {\n    return `${f.toJSON()} between [${a}, ${b}]`\n  }\n  return _range\n}\n\nvar INT53_MAX = Math.pow(2, 53) - 1\n\nfunction Finite (value) {\n  return typeof value === 'number' && isFinite(value)\n}\nfunction Int8 (value) { return ((value << 24) >> 24) === value }\nfunction Int16 (value) { return ((value << 16) >> 16) === value }\nfunction Int32 (value) { return (value | 0) === value }\nfunction Int53 (value) {\n  return typeof value === 'number' &&\n    value >= -INT53_MAX &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\nfunction UInt8 (value) { return (value & 0xff) === value }\nfunction UInt16 (value) { return (value & 0xffff) === value }\nfunction UInt32 (value) { return (value >>> 0) === value }\nfunction UInt53 (value) {\n  return typeof value === 'number' &&\n    value >= 0 &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\n\nvar types = {\n  ArrayN: _ArrayN,\n  Buffer: _Buffer,\n  BufferN: _BufferN,\n  Finite: Finite,\n  Hex: Hex,\n  HexN: _HexN,\n  Int8: Int8,\n  Int16: Int16,\n  Int32: Int32,\n  Int53: Int53,\n  Range: Range,\n  StringN: _StringN,\n  UInt8: UInt8,\n  UInt16: UInt16,\n  UInt32: UInt32,\n  UInt53: UInt53\n}\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// output: OP_RETURN ...\nfunction p2data(a, opts) {\n  if (!a.data && !a.output) throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      data: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'embed', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.data) return;\n    return bscript.compile([OPS.OP_RETURN].concat(a.data));\n  });\n  lazy.prop(o, 'data', () => {\n    if (!a.output) return;\n    return bscript.decompile(a.output).slice(1);\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      const chunks = bscript.decompile(a.output);\n      if (chunks[0] !== OPS.OP_RETURN) throw new TypeError('Output is invalid');\n      if (!chunks.slice(1).every(typef.Buffer))\n        throw new TypeError('Output is invalid');\n      if (a.data && !stacksEqual(a.data, o.data))\n        throw new TypeError('Data mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2data = p2data;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0)\n        throw new Error('Non-minimally encoded script number');\n    }\n  }\n  // 40-bit\n  if (length === 5) {\n    const a = buffer.readUInt32LE(0);\n    const b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  let result = 0;\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i);\n  }\n  if (buffer[length - 1] & 0x80)\n    return -(result & ~(0x80 << (8 * (length - 1))));\n  return result;\n}\nexports.decode = decode;\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff\n    ? 5\n    : i > 0x7fffff\n    ? 4\n    : i > 0x7fff\n    ? 3\n    : i > 0x7f\n    ? 2\n    : i > 0x00\n    ? 1\n    : 0;\n}\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = Buffer.allocUnsafe(size);\n  const negative = _number < 0;\n  for (let i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n  return buffer;\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst typeforce = require('typeforce');\nconst ZERO = Buffer.alloc(1, 0);\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return Buffer.concat([ZERO, x], 1 + x.length);\n  return x;\n}\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = Buffer.alloc(32, 0);\n  const bstart = Math.max(0, 32 - x.length);\n  x.copy(buffer, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\nfunction decode(buffer) {\n  const hashType = buffer.readUInt8(buffer.length - 1);\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const decoded = bip66.decode(buffer.slice(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = Buffer.concat([r, s], 64);\n  return { signature, hashType };\n}\nexports.decode = decode;\nfunction encode(signature, hashType) {\n  typeforce(\n    {\n      signature: types.BufferN(64),\n      hashType: types.UInt8,\n    },\n    { signature, hashType },\n  );\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const hashTypeBuffer = Buffer.allocUnsafe(1);\n  hashTypeBuffer.writeUInt8(hashType, 0);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return Buffer.concat([bip66.encode(r, s), hashTypeBuffer]);\n}\nexports.encode = encode;\n","var OPS = require('bitcoin-ops')\n\nfunction encodingLength (i) {\n  return i < OPS.OP_PUSHDATA1 ? 1\n  : i <= 0xff ? 2\n  : i <= 0xffff ? 3\n  : 5\n}\n\nfunction encode (buffer, number, offset) {\n  var size = encodingLength(number)\n\n  // ~6 bit\n  if (size === 1) {\n    buffer.writeUInt8(number, offset)\n\n  // 8 bit\n  } else if (size === 2) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA1, offset)\n    buffer.writeUInt8(number, offset + 1)\n\n  // 16 bit\n  } else if (size === 3) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA2, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n\n  // 32 bit\n  } else {\n    buffer.writeUInt8(OPS.OP_PUSHDATA4, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n  }\n\n  return size\n}\n\nfunction decode (buffer, offset) {\n  var opcode = buffer.readUInt8(offset)\n  var number, size\n\n  // ~6 bit\n  if (opcode < OPS.OP_PUSHDATA1) {\n    number = opcode\n    size = 1\n\n  // 8 bit\n  } else if (opcode === OPS.OP_PUSHDATA1) {\n    if (offset + 2 > buffer.length) return null\n    number = buffer.readUInt8(offset + 1)\n    size = 2\n\n  // 16 bit\n  } else if (opcode === OPS.OP_PUSHDATA2) {\n    if (offset + 3 > buffer.length) return null\n    number = buffer.readUInt16LE(offset + 1)\n    size = 3\n\n  // 32 bit\n  } else {\n    if (offset + 5 > buffer.length) return null\n    if (opcode !== OPS.OP_PUSHDATA4) throw new Error('Unexpected opcode')\n\n    number = buffer.readUInt32LE(offset + 1)\n    size = 5\n  }\n\n  return {\n    opcode: opcode,\n    number: number,\n    size: size\n  }\n}\n\nmodule.exports = {\n  encodingLength: encodingLength,\n  encode: encode,\n  decode: decode\n}\n","var OPS = require('./index.json')\n\nvar map = {}\nfor (var op in OPS) {\n  var code = OPS[op]\n  map[code] = op\n}\n\nmodule.exports = map\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\nconst typef = require('typeforce');\nconst ecc = require('tiny-secp256k1');\nconst OP_INT_BASE = OPS.OP_RESERVED; // OP_1 - 1\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: OP_0 [signatures ...]\n// output: m [pubKeys ...] n OP_CHECKMULTISIG\nfunction p2ms(a, opts) {\n  if (\n    !a.input &&\n    !a.output &&\n    !(a.pubkeys && a.m !== undefined) &&\n    !a.signatures\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  function isAcceptableSignature(x) {\n    return (\n      bscript.isCanonicalScriptSignature(x) ||\n      (opts.allowIncomplete && x === OPS.OP_0) !== undefined\n    );\n  }\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      m: typef.maybe(typef.Number),\n      n: typef.maybe(typef.Number),\n      output: typef.maybe(typef.Buffer),\n      pubkeys: typef.maybe(typef.arrayOf(ecc.isPoint)),\n      signatures: typef.maybe(typef.arrayOf(isAcceptableSignature)),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { network };\n  let chunks = [];\n  let decoded = false;\n  function decode(output) {\n    if (decoded) return;\n    decoded = true;\n    chunks = bscript.decompile(output);\n    o.m = chunks[0] - OP_INT_BASE;\n    o.n = chunks[chunks.length - 2] - OP_INT_BASE;\n    o.pubkeys = chunks.slice(1, -2);\n  }\n  lazy.prop(o, 'output', () => {\n    if (!a.m) return;\n    if (!o.n) return;\n    if (!a.pubkeys) return;\n    return bscript.compile(\n      [].concat(\n        OP_INT_BASE + a.m,\n        a.pubkeys,\n        OP_INT_BASE + o.n,\n        OPS.OP_CHECKMULTISIG,\n      ),\n    );\n  });\n  lazy.prop(o, 'm', () => {\n    if (!o.output) return;\n    decode(o.output);\n    return o.m;\n  });\n  lazy.prop(o, 'n', () => {\n    if (!o.pubkeys) return;\n    return o.pubkeys.length;\n  });\n  lazy.prop(o, 'pubkeys', () => {\n    if (!a.output) return;\n    decode(a.output);\n    return o.pubkeys;\n  });\n  lazy.prop(o, 'signatures', () => {\n    if (!a.input) return;\n    return bscript.decompile(a.input).slice(1);\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signatures) return;\n    return bscript.compile([OPS.OP_0].concat(a.signatures));\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  lazy.prop(o, 'name', () => {\n    if (!o.m || !o.n) return;\n    return `p2ms(${o.m} of ${o.n})`;\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      decode(a.output);\n      if (!typef.Number(chunks[0])) throw new TypeError('Output is invalid');\n      if (!typef.Number(chunks[chunks.length - 2]))\n        throw new TypeError('Output is invalid');\n      if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)\n        throw new TypeError('Output is invalid');\n      if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)\n        throw new TypeError('Output is invalid');\n      if (!o.pubkeys.every(x => ecc.isPoint(x)))\n        throw new TypeError('Output is invalid');\n      if (a.m !== undefined && a.m !== o.m) throw new TypeError('m mismatch');\n      if (a.n !== undefined && a.n !== o.n) throw new TypeError('n mismatch');\n      if (a.pubkeys && !stacksEqual(a.pubkeys, o.pubkeys))\n        throw new TypeError('Pubkeys mismatch');\n    }\n    if (a.pubkeys) {\n      if (a.n !== undefined && a.n !== a.pubkeys.length)\n        throw new TypeError('Pubkey count mismatch');\n      o.n = a.pubkeys.length;\n      if (o.n < o.m) throw new TypeError('Pubkey count cannot be less than m');\n    }\n    if (a.signatures) {\n      if (a.signatures.length < o.m)\n        throw new TypeError('Not enough signatures provided');\n      if (a.signatures.length > o.m)\n        throw new TypeError('Too many signatures provided');\n    }\n    if (a.input) {\n      if (a.input[0] !== OPS.OP_0) throw new TypeError('Input is invalid');\n      if (\n        o.signatures.length === 0 ||\n        !o.signatures.every(isAcceptableSignature)\n      )\n        throw new TypeError('Input has invalid signature(s)');\n      if (a.signatures && !stacksEqual(a.signatures, o.signatures))\n        throw new TypeError('Signature mismatch');\n      if (a.m !== undefined && a.m !== a.signatures.length)\n        throw new TypeError('Signature count mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2ms = p2ms;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\n// input: {signature}\n// output: {pubKey} OP_CHECKSIG\nfunction p2pk(a, opts) {\n  if (!a.input && !a.output && !a.pubkey && !a.input && !a.signature)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pk', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.pubkey) return;\n    return bscript.compile([a.pubkey, OPS.OP_CHECKSIG]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.output) return;\n    return a.output.slice(1, -1);\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signature) return;\n    return bscript.compile([a.signature]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      if (a.output[a.output.length - 1] !== OPS.OP_CHECKSIG)\n        throw new TypeError('Output is invalid');\n      if (!ecc.isPoint(o.pubkey))\n        throw new TypeError('Output pubkey is invalid');\n      if (a.pubkey && !a.pubkey.equals(o.pubkey))\n        throw new TypeError('Pubkey mismatch');\n    }\n    if (a.signature) {\n      if (a.input && !a.input.equals(o.input))\n        throw new TypeError('Signature mismatch');\n    }\n    if (a.input) {\n      if (_chunks().length !== 1) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(o.signature))\n        throw new TypeError('Input has invalid signature');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pk = p2pk;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bs58check = require('bs58check');\n// input: {signature} {pubkey}\n// output: OP_DUP OP_HASH160 {hash160(pubkey)} OP_EQUALVERIFY OP_CHECKSIG\nfunction p2pkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(25)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(network.pubKeyHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(3, 23);\n    if (a.address) return _address().hash;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([\n      OPS.OP_DUP,\n      OPS.OP_HASH160,\n      o.hash,\n      OPS.OP_EQUALVERIFY,\n      OPS.OP_CHECKSIG,\n    ]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.input) return;\n    return _chunks()[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return bscript.compile([a.signature, a.pubkey]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.pubKeyHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 25 ||\n        a.output[0] !== OPS.OP_DUP ||\n        a.output[1] !== OPS.OP_HASH160 ||\n        a.output[2] !== 0x14 ||\n        a.output[23] !== OPS.OP_EQUALVERIFY ||\n        a.output[24] !== OPS.OP_CHECKSIG\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(3, 23);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.input) {\n      const chunks = _chunks();\n      if (chunks.length !== 2) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(chunks[0]))\n        throw new TypeError('Input has invalid signature');\n      if (!ecc.isPoint(chunks[1]))\n        throw new TypeError('Input has invalid pubkey');\n      if (a.signature && !a.signature.equals(chunks[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(chunks[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(chunks[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pkh = p2pkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst bs58check = require('bs58check');\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: [redeemScriptSig ...] {redeemScript}\n// witness: <?>\n// output: OP_HASH160 {hash160(redeemScript)} OP_EQUAL\nfunction p2sh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(23)),\n      redeem: typef.maybe({\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        input: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.Buffer),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const _redeem = lazy.value(() => {\n    const chunks = _chunks();\n    return {\n      network,\n      output: chunks[chunks.length - 1],\n      input: bscript.compile(chunks.slice(0, -1)),\n      witness: a.witness || [],\n    };\n  });\n  // output dependents\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(o.network.scriptHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    // in order of least effort\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().hash;\n    if (o.redeem && o.redeem.output) return bcrypto.hash160(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);\n  });\n  // input dependents\n  lazy.prop(o, 'redeem', () => {\n    if (!a.input) return;\n    return _redeem();\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.redeem || !a.redeem.input || !a.redeem.output) return;\n    return bscript.compile(\n      [].concat(bscript.decompile(a.redeem.input), a.redeem.output),\n    );\n  });\n  lazy.prop(o, 'witness', () => {\n    if (o.redeem && o.redeem.witness) return o.redeem.witness;\n    if (o.input) return [];\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2sh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.scriptHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 23 ||\n        a.output[0] !== OPS.OP_HASH160 ||\n        a.output[1] !== 0x14 ||\n        a.output[22] !== OPS.OP_EQUAL\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2, 22);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    // inlined to prevent 'no-inner-declarations' failing\n    const checkRedeem = redeem => {\n      // is the redeem output empty/invalid?\n      if (redeem.output) {\n        const decompile = bscript.decompile(redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output too short');\n        // match hash against other sources\n        const hash2 = bcrypto.hash160(redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (redeem.input) {\n        const hasInput = redeem.input.length > 0;\n        const hasWitness = redeem.witness && redeem.witness.length > 0;\n        if (!hasInput && !hasWitness) throw new TypeError('Empty input');\n        if (hasInput && hasWitness)\n          throw new TypeError('Input and witness provided');\n        if (hasInput) {\n          const richunks = bscript.decompile(redeem.input);\n          if (!bscript.isPushOnly(richunks))\n            throw new TypeError('Non push-only scriptSig');\n        }\n      }\n    };\n    if (a.input) {\n      const chunks = _chunks();\n      if (!chunks || chunks.length < 1) throw new TypeError('Input too short');\n      if (!Buffer.isBuffer(_redeem().output))\n        throw new TypeError('Input is invalid');\n      checkRedeem(_redeem());\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      if (a.input) {\n        const redeem = _redeem();\n        if (a.redeem.output && !a.redeem.output.equals(redeem.output))\n          throw new TypeError('Redeem.output mismatch');\n        if (a.redeem.input && !a.redeem.input.equals(redeem.input))\n          throw new TypeError('Redeem.input mismatch');\n      }\n      checkRedeem(a.redeem);\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.witness &&\n        !stacksEqual(a.redeem.witness, a.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2sh = p2sh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\n// witness: {signature} {pubKey}\n// input: <>\n// output: OP_0 {pubKeyHash}\nfunction p2wpkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      input: typef.maybe(typef.BufferN(0)),\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.BufferN(22)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2wpkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().data;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (!a.witness) return;\n    return a.witness[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.witness) return;\n    return a.witness[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return [a.signature, a.pubkey];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 20)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 22 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x14\n      )\n        throw new TypeError('Output is invalid');\n      if (hash.length > 0 && !hash.equals(a.output.slice(2)))\n        throw new TypeError('Hash mismatch');\n      else hash = a.output.slice(2);\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n      if (!ecc.isPoint(a.pubkey) || a.pubkey.length !== 33)\n        throw new TypeError('Invalid pubkey for p2wpkh');\n    }\n    if (a.witness) {\n      if (a.witness.length !== 2) throw new TypeError('Witness is invalid');\n      if (!bscript.isCanonicalScriptSignature(a.witness[0]))\n        throw new TypeError('Witness has invalid signature');\n      if (!ecc.isPoint(a.witness[1]) || a.witness[1].length !== 33)\n        throw new TypeError('Witness has invalid pubkey');\n      if (a.signature && !a.signature.equals(a.witness[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(a.witness[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(a.witness[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wpkh = p2wpkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\nfunction chunkHasUncompressedPubkey(chunk) {\n  if (\n    Buffer.isBuffer(chunk) &&\n    chunk.length === 65 &&\n    chunk[0] === 0x04 &&\n    ecc.isPoint(chunk)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n// input: <>\n// witness: [redeemScriptSig ...] {redeemScript}\n// output: OP_0 {sha256(redeemScript)}\nfunction p2wsh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(32)),\n      output: typef.maybe(typef.BufferN(34)),\n      redeem: typef.maybe({\n        input: typef.maybe(typef.Buffer),\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.BufferN(0)),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const _rchunks = lazy.value(() => {\n    return bscript.decompile(a.redeem.input);\n  });\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.redeem && o.redeem.output) return bcrypto.sha256(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'redeem', () => {\n    if (!a.witness) return;\n    return {\n      output: a.witness[a.witness.length - 1],\n      input: EMPTY_BUFFER,\n      witness: a.witness.slice(0, -1),\n    };\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    // transform redeem input to witness stack?\n    if (\n      a.redeem &&\n      a.redeem.input &&\n      a.redeem.input.length > 0 &&\n      a.redeem.output &&\n      a.redeem.output.length > 0\n    ) {\n      const stack = bscript.toStack(_rchunks());\n      // assign, and blank the existing input\n      o.redeem = Object.assign({ witness: stack }, a.redeem);\n      o.redeem.input = EMPTY_BUFFER;\n      return [].concat(stack, a.redeem.output);\n    }\n    if (!a.redeem) return;\n    if (!a.redeem.output) return;\n    if (!a.redeem.witness) return;\n    return [].concat(a.redeem.witness, a.redeem.output);\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2wsh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().prefix !== network.bech32)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      // is there two redeem sources?\n      if (\n        a.redeem.input &&\n        a.redeem.input.length > 0 &&\n        a.redeem.witness &&\n        a.redeem.witness.length > 0\n      )\n        throw new TypeError('Ambiguous witness source');\n      // is the redeem output non-empty?\n      if (a.redeem.output) {\n        if (bscript.decompile(a.redeem.output).length === 0)\n          throw new TypeError('Redeem.output is invalid');\n        // match hash against other sources\n        const hash2 = bcrypto.sha256(a.redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (a.redeem.input && !bscript.isPushOnly(_rchunks()))\n        throw new TypeError('Non push-only scriptSig');\n      if (\n        a.witness &&\n        a.redeem.witness &&\n        !stacksEqual(a.witness, a.redeem.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n      if (\n        (a.redeem.input && _rchunks().some(chunkHasUncompressedPubkey)) ||\n        (a.redeem.output &&\n          (bscript.decompile(a.redeem.output) || []).some(\n            chunkHasUncompressedPubkey,\n          ))\n      ) {\n        throw new TypeError(\n          'redeem.input or redeem.output contains uncompressed pubkey',\n        );\n      }\n    }\n    if (a.witness && a.witness.length > 0) {\n      const wScript = a.witness[a.witness.length - 1];\n      if (a.redeem && a.redeem.output && !a.redeem.output.equals(wScript))\n        throw new TypeError('Witness and redeem.output mismatch');\n      if (\n        a.witness.some(chunkHasUncompressedPubkey) ||\n        (bscript.decompile(wScript) || []).some(chunkHasUncompressedPubkey)\n      )\n        throw new TypeError('Witness contains uncompressed pubkey');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wsh = p2wsh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst fastMerkleRoot = require('merkle-lib/fastRoot');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nconst errorMerkleNoTxes = new TypeError(\n  'Cannot compute merkle root for zero transactions',\n);\nconst errorWitnessNotSegwit = new TypeError(\n  'Cannot compute witness commit for non-segwit block',\n);\nclass Block {\n  constructor() {\n    this.version = 1;\n    this.prevHash = undefined;\n    this.merkleRoot = undefined;\n    this.timestamp = 0;\n    this.witnessCommit = undefined;\n    this.bits = 0;\n    this.nonce = 0;\n    this.transactions = undefined;\n  }\n  static fromBuffer(buffer) {\n    if (buffer.length < 80) throw new Error('Buffer too small (< 80 bytes)');\n    const bufferReader = new bufferutils_1.BufferReader(buffer);\n    const block = new Block();\n    block.version = bufferReader.readInt32();\n    block.prevHash = bufferReader.readSlice(32);\n    block.merkleRoot = bufferReader.readSlice(32);\n    block.timestamp = bufferReader.readUInt32();\n    block.bits = bufferReader.readUInt32();\n    block.nonce = bufferReader.readUInt32();\n    if (buffer.length === 80) return block;\n    const readTransaction = () => {\n      const tx = transaction_1.Transaction.fromBuffer(\n        bufferReader.buffer.slice(bufferReader.offset),\n        true,\n      );\n      bufferReader.offset += tx.byteLength();\n      return tx;\n    };\n    const nTransactions = bufferReader.readVarInt();\n    block.transactions = [];\n    for (let i = 0; i < nTransactions; ++i) {\n      const tx = readTransaction();\n      block.transactions.push(tx);\n    }\n    const witnessCommit = block.getWitnessCommit();\n    // This Block contains a witness commit\n    if (witnessCommit) block.witnessCommit = witnessCommit;\n    return block;\n  }\n  static fromHex(hex) {\n    return Block.fromBuffer(Buffer.from(hex, 'hex'));\n  }\n  static calculateTarget(bits) {\n    const exponent = ((bits & 0xff000000) >> 24) - 3;\n    const mantissa = bits & 0x007fffff;\n    const target = Buffer.alloc(32, 0);\n    target.writeUIntBE(mantissa, 29 - exponent, 3);\n    return target;\n  }\n  static calculateMerkleRoot(transactions, forWitness) {\n    typeforce([{ getHash: types.Function }], transactions);\n    if (transactions.length === 0) throw errorMerkleNoTxes;\n    if (forWitness && !txesHaveWitnessCommit(transactions))\n      throw errorWitnessNotSegwit;\n    const hashes = transactions.map(transaction =>\n      transaction.getHash(forWitness),\n    );\n    const rootHash = fastMerkleRoot(hashes, bcrypto.hash256);\n    return forWitness\n      ? bcrypto.hash256(\n          Buffer.concat([rootHash, transactions[0].ins[0].witness[0]]),\n        )\n      : rootHash;\n  }\n  getWitnessCommit() {\n    if (!txesHaveWitnessCommit(this.transactions)) return null;\n    // The merkle root for the witness data is in an OP_RETURN output.\n    // There is no rule for the index of the output, so use filter to find it.\n    // The root is prepended with 0xaa21a9ed so check for 0x6a24aa21a9ed\n    // If multiple commits are found, the output with highest index is assumed.\n    const witnessCommits = this.transactions[0].outs\n      .filter(out =>\n        out.script.slice(0, 6).equals(Buffer.from('6a24aa21a9ed', 'hex')),\n      )\n      .map(out => out.script.slice(6, 38));\n    if (witnessCommits.length === 0) return null;\n    // Use the commit with the highest output (should only be one though)\n    const result = witnessCommits[witnessCommits.length - 1];\n    if (!(result instanceof Buffer && result.length === 32)) return null;\n    return result;\n  }\n  hasWitnessCommit() {\n    if (\n      this.witnessCommit instanceof Buffer &&\n      this.witnessCommit.length === 32\n    )\n      return true;\n    if (this.getWitnessCommit() !== null) return true;\n    return false;\n  }\n  hasWitness() {\n    return anyTxHasWitness(this.transactions);\n  }\n  weight() {\n    const base = this.byteLength(false, false);\n    const total = this.byteLength(false, true);\n    return base * 3 + total;\n  }\n  byteLength(headersOnly, allowWitness = true) {\n    if (headersOnly || !this.transactions) return 80;\n    return (\n      80 +\n      varuint.encodingLength(this.transactions.length) +\n      this.transactions.reduce((a, x) => a + x.byteLength(allowWitness), 0)\n    );\n  }\n  getHash() {\n    return bcrypto.hash256(this.toBuffer(true));\n  }\n  getId() {\n    return bufferutils_1.reverseBuffer(this.getHash()).toString('hex');\n  }\n  getUTCDate() {\n    const date = new Date(0); // epoch\n    date.setUTCSeconds(this.timestamp);\n    return date;\n  }\n  // TODO: buffer, offset compatibility\n  toBuffer(headersOnly) {\n    const buffer = Buffer.allocUnsafe(this.byteLength(headersOnly));\n    const bufferWriter = new bufferutils_1.BufferWriter(buffer);\n    bufferWriter.writeInt32(this.version);\n    bufferWriter.writeSlice(this.prevHash);\n    bufferWriter.writeSlice(this.merkleRoot);\n    bufferWriter.writeUInt32(this.timestamp);\n    bufferWriter.writeUInt32(this.bits);\n    bufferWriter.writeUInt32(this.nonce);\n    if (headersOnly || !this.transactions) return buffer;\n    varuint.encode(this.transactions.length, buffer, bufferWriter.offset);\n    bufferWriter.offset += varuint.encode.bytes;\n    this.transactions.forEach(tx => {\n      const txSize = tx.byteLength(); // TODO: extract from toBuffer?\n      tx.toBuffer(buffer, bufferWriter.offset);\n      bufferWriter.offset += txSize;\n    });\n    return buffer;\n  }\n  toHex(headersOnly) {\n    return this.toBuffer(headersOnly).toString('hex');\n  }\n  checkTxRoots() {\n    // If the Block has segwit transactions but no witness commit,\n    // there's no way it can be valid, so fail the check.\n    const hasWitnessCommit = this.hasWitnessCommit();\n    if (!hasWitnessCommit && this.hasWitness()) return false;\n    return (\n      this.__checkMerkleRoot() &&\n      (hasWitnessCommit ? this.__checkWitnessCommit() : true)\n    );\n  }\n  checkProofOfWork() {\n    const hash = bufferutils_1.reverseBuffer(this.getHash());\n    const target = Block.calculateTarget(this.bits);\n    return hash.compare(target) <= 0;\n  }\n  __checkMerkleRoot() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    const actualMerkleRoot = Block.calculateMerkleRoot(this.transactions);\n    return this.merkleRoot.compare(actualMerkleRoot) === 0;\n  }\n  __checkWitnessCommit() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    if (!this.hasWitnessCommit()) throw errorWitnessNotSegwit;\n    const actualWitnessCommit = Block.calculateMerkleRoot(\n      this.transactions,\n      true,\n    );\n    return this.witnessCommit.compare(actualWitnessCommit) === 0;\n  }\n}\nexports.Block = Block;\nfunction txesHaveWitnessCommit(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions[0] &&\n    transactions[0].ins &&\n    transactions[0].ins instanceof Array &&\n    transactions[0].ins[0] &&\n    transactions[0].ins[0].witness &&\n    transactions[0].ins[0].witness instanceof Array &&\n    transactions[0].ins[0].witness.length > 0\n  );\n}\nfunction anyTxHasWitness(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions.some(\n      tx =>\n        typeof tx === 'object' &&\n        tx.ins instanceof Array &&\n        tx.ins.some(\n          input =>\n            typeof input === 'object' &&\n            input.witness instanceof Array &&\n            input.witness.length > 0,\n        ),\n    )\n  );\n}\n","// constant-space merkle root calculation algorithm\nmodule.exports = function fastRoot (values, digestFn) {\n  if (!Array.isArray(values)) throw TypeError('Expected values Array')\n  if (typeof digestFn !== 'function') throw TypeError('Expected digest Function')\n\n  var length = values.length\n  var results = values.concat()\n\n  while (length > 1) {\n    var j = 0\n\n    for (var i = 0; i < length; i += 2, ++j) {\n      var left = results[i]\n      var right = i + 1 === length ? left : results[i + 1]\n      var data = Buffer.concat([left, right])\n\n      results[j] = digestFn(data)\n    }\n\n    length = j\n  }\n\n  return results[0]\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip174_1 = require('bip174');\nconst varuint = require('bip174/src/lib/converter/varint');\nconst utils_1 = require('bip174/src/lib/utils');\nconst address_1 = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst crypto_1 = require('./crypto');\nconst ecpair_1 = require('./ecpair');\nconst networks_1 = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst transaction_1 = require('./transaction');\n/**\n * These are the default arguments for a Psbt instance.\n */\nconst DEFAULT_OPTS = {\n  /**\n   * A bitcoinjs Network object. This is only used if you pass an `address`\n   * parameter to addOutput. Otherwise it is not needed and can be left default.\n   */\n  network: networks_1.bitcoin,\n  /**\n   * When extractTransaction is called, the fee rate is checked.\n   * THIS IS NOT TO BE RELIED ON.\n   * It is only here as a last ditch effort to prevent sending a 500 BTC fee etc.\n   */\n  maximumFeeRate: 5000,\n};\n/**\n * Psbt class can parse and generate a PSBT binary based off of the BIP174.\n * There are 6 roles that this class fulfills. (Explained in BIP174)\n *\n * Creator: This can be done with `new Psbt()`\n * Updater: This can be done with `psbt.addInput(input)`, `psbt.addInputs(inputs)`,\n *   `psbt.addOutput(output)`, `psbt.addOutputs(outputs)` when you are looking to\n *   add new inputs and outputs to the PSBT, and `psbt.updateGlobal(itemObject)`,\n *   `psbt.updateInput(itemObject)`, `psbt.updateOutput(itemObject)`\n *   addInput requires hash: Buffer | string; and index: number; as attributes\n *   and can also include any attributes that are used in updateInput method.\n *   addOutput requires script: Buffer; and value: number; and likewise can include\n *   data for updateOutput.\n *   For a list of what attributes should be what types. Check the bip174 library.\n *   Also, check the integration tests for some examples of usage.\n * Signer: There are a few methods. signAllInputs and signAllInputsAsync, which will search all input\n *   information for your pubkey or pubkeyhash, and only sign inputs where it finds\n *   your info. Or you can explicitly sign a specific input with signInput and\n *   signInputAsync. For the async methods you can create a SignerAsync object\n *   and use something like a hardware wallet to sign with. (You must implement this)\n * Combiner: psbts can be combined easily with `psbt.combine(psbt2, psbt3, psbt4 ...)`\n *   the psbt calling combine will always have precedence when a conflict occurs.\n *   Combine checks if the internal bitcoin transaction is the same, so be sure that\n *   all sequences, version, locktime, etc. are the same before combining.\n * Input Finalizer: This role is fairly important. Not only does it need to construct\n *   the input scriptSigs and witnesses, but it SHOULD verify the signatures etc.\n *   Before running `psbt.finalizeAllInputs()` please run `psbt.validateSignaturesOfAllInputs()`\n *   Running any finalize method will delete any data in the input(s) that are no longer\n *   needed due to the finalized scripts containing the information.\n * Transaction Extractor: This role will perform some checks before returning a\n *   Transaction object. Such as fee rate not being larger than maximumFeeRate etc.\n */\nclass Psbt {\n  constructor(opts = {}, data = new bip174_1.Psbt(new PsbtTransaction())) {\n    this.data = data;\n    // set defaults\n    this.opts = Object.assign({}, DEFAULT_OPTS, opts);\n    this.__CACHE = {\n      __NON_WITNESS_UTXO_TX_CACHE: [],\n      __NON_WITNESS_UTXO_BUF_CACHE: [],\n      __TX_IN_CACHE: {},\n      __TX: this.data.globalMap.unsignedTx.tx,\n      // Old TransactionBuilder behavior was to not confirm input values\n      // before signing. Even though we highly encourage people to get\n      // the full parent transaction to verify values, the ability to\n      // sign non-segwit inputs without the full transaction was often\n      // requested. So the only way to activate is to use @ts-ignore.\n      // We will disable exporting the Psbt when unsafe sign is active.\n      // because it is not BIP174 compliant.\n      __UNSAFE_SIGN_NONSEGWIT: false,\n    };\n    if (this.data.inputs.length === 0) this.setVersion(2);\n    // Make data hidden when enumerating\n    const dpew = (obj, attr, enumerable, writable) =>\n      Object.defineProperty(obj, attr, {\n        enumerable,\n        writable,\n      });\n    dpew(this, '__CACHE', false, true);\n    dpew(this, 'opts', false, true);\n  }\n  static fromBase64(data, opts = {}) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromHex(data, opts = {}) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromBuffer(buffer, opts = {}) {\n    const psbtBase = bip174_1.Psbt.fromBuffer(buffer, transactionFromBuffer);\n    const psbt = new Psbt(opts, psbtBase);\n    checkTxForDupeIns(psbt.__CACHE.__TX, psbt.__CACHE);\n    return psbt;\n  }\n  get inputCount() {\n    return this.data.inputs.length;\n  }\n  get version() {\n    return this.__CACHE.__TX.version;\n  }\n  set version(version) {\n    this.setVersion(version);\n  }\n  get locktime() {\n    return this.__CACHE.__TX.locktime;\n  }\n  set locktime(locktime) {\n    this.setLocktime(locktime);\n  }\n  get txInputs() {\n    return this.__CACHE.__TX.ins.map(input => ({\n      hash: bufferutils_1.cloneBuffer(input.hash),\n      index: input.index,\n      sequence: input.sequence,\n    }));\n  }\n  get txOutputs() {\n    return this.__CACHE.__TX.outs.map(output => {\n      let address;\n      try {\n        address = address_1.fromOutputScript(output.script, this.opts.network);\n      } catch (_) {}\n      return {\n        script: bufferutils_1.cloneBuffer(output.script),\n        value: output.value,\n        address,\n      };\n    });\n  }\n  combine(...those) {\n    this.data.combine(...those.map(o => o.data));\n    return this;\n  }\n  clone() {\n    // TODO: more efficient cloning\n    const res = Psbt.fromBuffer(this.data.toBuffer());\n    res.opts = JSON.parse(JSON.stringify(this.opts));\n    return res;\n  }\n  setMaximumFeeRate(satoshiPerByte) {\n    check32Bit(satoshiPerByte); // 42.9 BTC per byte IS excessive... so throw\n    this.opts.maximumFeeRate = satoshiPerByte;\n  }\n  setVersion(version) {\n    check32Bit(version);\n    checkInputsForPartialSig(this.data.inputs, 'setVersion');\n    const c = this.__CACHE;\n    c.__TX.version = version;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setLocktime(locktime) {\n    check32Bit(locktime);\n    checkInputsForPartialSig(this.data.inputs, 'setLocktime');\n    const c = this.__CACHE;\n    c.__TX.locktime = locktime;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setInputSequence(inputIndex, sequence) {\n    check32Bit(sequence);\n    checkInputsForPartialSig(this.data.inputs, 'setInputSequence');\n    const c = this.__CACHE;\n    if (c.__TX.ins.length <= inputIndex) {\n      throw new Error('Input index too high');\n    }\n    c.__TX.ins[inputIndex].sequence = sequence;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addInputs(inputDatas) {\n    inputDatas.forEach(inputData => this.addInput(inputData));\n    return this;\n  }\n  addInput(inputData) {\n    if (\n      arguments.length > 1 ||\n      !inputData ||\n      inputData.hash === undefined ||\n      inputData.index === undefined\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addInput. ` +\n          `Requires single object with at least [hash] and [index]`,\n      );\n    }\n    checkInputsForPartialSig(this.data.inputs, 'addInput');\n    if (inputData.witnessScript) checkInvalidP2WSH(inputData.witnessScript);\n    const c = this.__CACHE;\n    this.data.addInput(inputData);\n    const txIn = c.__TX.ins[c.__TX.ins.length - 1];\n    checkTxInputCache(c, txIn);\n    const inputIndex = this.data.inputs.length - 1;\n    const input = this.data.inputs[inputIndex];\n    if (input.nonWitnessUtxo) {\n      addNonWitnessTxCache(this.__CACHE, input, inputIndex);\n    }\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addOutputs(outputDatas) {\n    outputDatas.forEach(outputData => this.addOutput(outputData));\n    return this;\n  }\n  addOutput(outputData) {\n    if (\n      arguments.length > 1 ||\n      !outputData ||\n      outputData.value === undefined ||\n      (outputData.address === undefined && outputData.script === undefined)\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addOutput. ` +\n          `Requires single object with at least [script or address] and [value]`,\n      );\n    }\n    checkInputsForPartialSig(this.data.inputs, 'addOutput');\n    const { address } = outputData;\n    if (typeof address === 'string') {\n      const { network } = this.opts;\n      const script = address_1.toOutputScript(address, network);\n      outputData = Object.assign(outputData, { script });\n    }\n    const c = this.__CACHE;\n    this.data.addOutput(outputData);\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  extractTransaction(disableFeeCheck) {\n    if (!this.data.inputs.every(isFinalized)) throw new Error('Not finalized');\n    const c = this.__CACHE;\n    if (!disableFeeCheck) {\n      checkFees(this, c, this.opts);\n    }\n    if (c.__EXTRACTED_TX) return c.__EXTRACTED_TX;\n    const tx = c.__TX.clone();\n    inputFinalizeGetAmts(this.data.inputs, tx, c, true);\n    return tx;\n  }\n  getFeeRate() {\n    return getTxCacheValue(\n      '__FEE_RATE',\n      'fee rate',\n      this.data.inputs,\n      this.__CACHE,\n    );\n  }\n  getFee() {\n    return getTxCacheValue('__FEE', 'fee', this.data.inputs, this.__CACHE);\n  }\n  finalizeAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    range(this.data.inputs.length).forEach(idx => this.finalizeInput(idx));\n    return this;\n  }\n  finalizeInput(inputIndex, finalScriptsFunc = getFinalScripts) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const { script, isP2SH, isP2WSH, isSegwit } = getScriptFromInput(\n      inputIndex,\n      input,\n      this.__CACHE,\n    );\n    if (!script) throw new Error(`No script found for input #${inputIndex}`);\n    checkPartialSigSighashes(input);\n    const { finalScriptSig, finalScriptWitness } = finalScriptsFunc(\n      inputIndex,\n      input,\n      script,\n      isSegwit,\n      isP2SH,\n      isP2WSH,\n    );\n    if (finalScriptSig) this.data.updateInput(inputIndex, { finalScriptSig });\n    if (finalScriptWitness)\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    if (!finalScriptSig && !finalScriptWitness)\n      throw new Error(`Unknown error finalizing input #${inputIndex}`);\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  getInputType(inputIndex) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const script = getScriptFromUtxo(inputIndex, input, this.__CACHE);\n    const result = getMeaningfulScript(\n      script,\n      inputIndex,\n      'input',\n      input.redeemScript || redeemFromFinalScriptSig(input.finalScriptSig),\n      input.witnessScript ||\n        redeemFromFinalWitnessScript(input.finalScriptWitness),\n    );\n    const type = result.type === 'raw' ? '' : result.type + '-';\n    const mainType = classifyScript(result.meaningfulScript);\n    return type + mainType;\n  }\n  inputHasPubkey(inputIndex, pubkey) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    return pubkeyInInput(pubkey, input, inputIndex, this.__CACHE);\n  }\n  inputHasHDKey(inputIndex, root) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!input.bip32Derivation && input.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  outputHasPubkey(outputIndex, pubkey) {\n    const output = utils_1.checkForOutput(this.data.outputs, outputIndex);\n    return pubkeyInOutput(pubkey, output, outputIndex, this.__CACHE);\n  }\n  outputHasHDKey(outputIndex, root) {\n    const output = utils_1.checkForOutput(this.data.outputs, outputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!output.bip32Derivation && output.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  validateSignaturesOfAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    const results = range(this.data.inputs.length).map(idx =>\n      this.validateSignaturesOfInput(idx),\n    );\n    return results.reduce((final, res) => res === true && final, true);\n  }\n  validateSignaturesOfInput(inputIndex, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const partialSig = (input || {}).partialSig;\n    if (!input || !partialSig || partialSig.length < 1)\n      throw new Error('No signatures to validate');\n    const mySigs = pubkey\n      ? partialSig.filter(sig => sig.pubkey.equals(pubkey))\n      : partialSig;\n    if (mySigs.length < 1) throw new Error('No signatures for this pubkey');\n    const results = [];\n    let hashCache;\n    let scriptCache;\n    let sighashCache;\n    for (const pSig of mySigs) {\n      const sig = bscript.signature.decode(pSig.signature);\n      const { hash, script } =\n        sighashCache !== sig.hashType\n          ? getHashForSig(\n              inputIndex,\n              Object.assign({}, input, { sighashType: sig.hashType }),\n              this.__CACHE,\n              true,\n            )\n          : { hash: hashCache, script: scriptCache };\n      sighashCache = sig.hashType;\n      hashCache = hash;\n      scriptCache = script;\n      checkScriptForPubkey(pSig.pubkey, script, 'verify');\n      const keypair = ecpair_1.fromPublicKey(pSig.pubkey);\n      results.push(keypair.verify(hash, sig.signature));\n    }\n    return results.every(res => res === true);\n  }\n  signAllInputsHD(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInputHD(i, hdKeyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsHDAsync(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const results = [];\n      const promises = [];\n      for (const i of range(this.data.inputs.length)) {\n        promises.push(\n          this.signInputHDAsync(i, hdKeyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInputHD(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n    signers.forEach(signer => this.signInput(inputIndex, signer, sighashTypes));\n    return this;\n  }\n  signInputHDAsync(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n      const promises = signers.map(signer =>\n        this.signInputAsync(inputIndex, signer, sighashTypes),\n      );\n      return Promise.all(promises)\n        .then(() => {\n          resolve();\n        })\n        .catch(reject);\n    });\n  }\n  signAllInputs(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    // TODO: Add a pubkey/pubkeyhash cache to each input\n    // as input information is added, then eventually\n    // optimize this method.\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInput(i, keyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsAsync(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      // TODO: Add a pubkey/pubkeyhash cache to each input\n      // as input information is added, then eventually\n      // optimize this method.\n      const results = [];\n      const promises = [];\n      for (const [i] of this.data.inputs.entries()) {\n        promises.push(\n          this.signInputAsync(i, keyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInput(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    const partialSig = [\n      {\n        pubkey: keyPair.publicKey,\n        signature: bscript.signature.encode(keyPair.sign(hash), sighashType),\n      },\n    ];\n    this.data.updateInput(inputIndex, { partialSig });\n    return this;\n  }\n  signInputAsync(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return Promise.resolve().then(() => {\n      if (!keyPair || !keyPair.publicKey)\n        throw new Error('Need Signer to sign input');\n      const { hash, sighashType } = getHashAndSighashType(\n        this.data.inputs,\n        inputIndex,\n        keyPair.publicKey,\n        this.__CACHE,\n        sighashTypes,\n      );\n      return Promise.resolve(keyPair.sign(hash)).then(signature => {\n        const partialSig = [\n          {\n            pubkey: keyPair.publicKey,\n            signature: bscript.signature.encode(signature, sighashType),\n          },\n        ];\n        this.data.updateInput(inputIndex, { partialSig });\n      });\n    });\n  }\n  toBuffer() {\n    checkCache(this.__CACHE);\n    return this.data.toBuffer();\n  }\n  toHex() {\n    checkCache(this.__CACHE);\n    return this.data.toHex();\n  }\n  toBase64() {\n    checkCache(this.__CACHE);\n    return this.data.toBase64();\n  }\n  updateGlobal(updateData) {\n    this.data.updateGlobal(updateData);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    if (updateData.witnessScript) checkInvalidP2WSH(updateData.witnessScript);\n    this.data.updateInput(inputIndex, updateData);\n    if (updateData.nonWitnessUtxo) {\n      addNonWitnessTxCache(\n        this.__CACHE,\n        this.data.inputs[inputIndex],\n        inputIndex,\n      );\n    }\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    this.data.updateOutput(outputIndex, updateData);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    this.data.addUnknownKeyValToGlobal(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    this.data.addUnknownKeyValToInput(inputIndex, keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    this.data.addUnknownKeyValToOutput(outputIndex, keyVal);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n}\nexports.Psbt = Psbt;\n/**\n * This function is needed to pass to the bip174 base class's fromBuffer.\n * It takes the \"transaction buffer\" portion of the psbt buffer and returns a\n * Transaction (From the bip174 library) interface.\n */\nconst transactionFromBuffer = buffer => new PsbtTransaction(buffer);\n/**\n * This class implements the Transaction interface from bip174 library.\n * It contains a bitcoinjs-lib Transaction object.\n */\nclass PsbtTransaction {\n  constructor(buffer = Buffer.from([2, 0, 0, 0, 0, 0, 0, 0, 0, 0])) {\n    this.tx = transaction_1.Transaction.fromBuffer(buffer);\n    checkTxEmpty(this.tx);\n    Object.defineProperty(this, 'tx', {\n      enumerable: false,\n      writable: true,\n    });\n  }\n  getInputOutputCounts() {\n    return {\n      inputCount: this.tx.ins.length,\n      outputCount: this.tx.outs.length,\n    };\n  }\n  addInput(input) {\n    if (\n      input.hash === undefined ||\n      input.index === undefined ||\n      (!Buffer.isBuffer(input.hash) && typeof input.hash !== 'string') ||\n      typeof input.index !== 'number'\n    ) {\n      throw new Error('Error adding input.');\n    }\n    const hash =\n      typeof input.hash === 'string'\n        ? bufferutils_1.reverseBuffer(Buffer.from(input.hash, 'hex'))\n        : input.hash;\n    this.tx.addInput(hash, input.index, input.sequence);\n  }\n  addOutput(output) {\n    if (\n      output.script === undefined ||\n      output.value === undefined ||\n      !Buffer.isBuffer(output.script) ||\n      typeof output.value !== 'number'\n    ) {\n      throw new Error('Error adding output.');\n    }\n    this.tx.addOutput(output.script, output.value);\n  }\n  toBuffer() {\n    return this.tx.toBuffer();\n  }\n}\nfunction canFinalize(input, script, scriptType) {\n  switch (scriptType) {\n    case 'pubkey':\n    case 'pubkeyhash':\n    case 'witnesspubkeyhash':\n      return hasSigs(1, input.partialSig);\n    case 'multisig':\n      const p2ms = payments.p2ms({ output: script });\n      return hasSigs(p2ms.m, input.partialSig, p2ms.pubkeys);\n    default:\n      return false;\n  }\n}\nfunction checkCache(cache) {\n  if (cache.__UNSAFE_SIGN_NONSEGWIT !== false) {\n    throw new Error('Not BIP174 compliant, can not export');\n  }\n}\nfunction hasSigs(neededSigs, partialSig, pubkeys) {\n  if (!partialSig) return false;\n  let sigs;\n  if (pubkeys) {\n    sigs = pubkeys\n      .map(pkey => {\n        const pubkey = ecpair_1.fromPublicKey(pkey, { compressed: true })\n          .publicKey;\n        return partialSig.find(pSig => pSig.pubkey.equals(pubkey));\n      })\n      .filter(v => !!v);\n  } else {\n    sigs = partialSig;\n  }\n  if (sigs.length > neededSigs) throw new Error('Too many signatures');\n  return sigs.length === neededSigs;\n}\nfunction isFinalized(input) {\n  return !!input.finalScriptSig || !!input.finalScriptWitness;\n}\nfunction isPaymentFactory(payment) {\n  return script => {\n    try {\n      payment({ output: script });\n      return true;\n    } catch (err) {\n      return false;\n    }\n  };\n}\nconst isP2MS = isPaymentFactory(payments.p2ms);\nconst isP2PK = isPaymentFactory(payments.p2pk);\nconst isP2PKH = isPaymentFactory(payments.p2pkh);\nconst isP2WPKH = isPaymentFactory(payments.p2wpkh);\nconst isP2WSHScript = isPaymentFactory(payments.p2wsh);\nconst isP2SHScript = isPaymentFactory(payments.p2sh);\nfunction bip32DerivationIsMine(root) {\n  return d => {\n    if (!d.masterFingerprint.equals(root.fingerprint)) return false;\n    if (!root.derivePath(d.path).publicKey.equals(d.pubkey)) return false;\n    return true;\n  };\n}\nfunction check32Bit(num) {\n  if (\n    typeof num !== 'number' ||\n    num !== Math.floor(num) ||\n    num > 0xffffffff ||\n    num < 0\n  ) {\n    throw new Error('Invalid 32 bit integer');\n  }\n}\nfunction checkFees(psbt, cache, opts) {\n  const feeRate = cache.__FEE_RATE || psbt.getFeeRate();\n  const vsize = cache.__EXTRACTED_TX.virtualSize();\n  const satoshis = feeRate * vsize;\n  if (feeRate >= opts.maximumFeeRate) {\n    throw new Error(\n      `Warning: You are paying around ${(satoshis / 1e8).toFixed(8)} in ` +\n        `fees, which is ${feeRate} satoshi per byte for a transaction ` +\n        `with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per ` +\n        `byte). Use setMaximumFeeRate method to raise your threshold, or ` +\n        `pass true to the first arg of extractTransaction.`,\n    );\n  }\n}\nfunction checkInputsForPartialSig(inputs, action) {\n  inputs.forEach(input => {\n    let throws = false;\n    let pSigs = [];\n    if ((input.partialSig || []).length === 0) {\n      if (!input.finalScriptSig && !input.finalScriptWitness) return;\n      pSigs = getPsigsFromInputFinalScripts(input);\n    } else {\n      pSigs = input.partialSig;\n    }\n    pSigs.forEach(pSig => {\n      const { hashType } = bscript.signature.decode(pSig.signature);\n      const whitelist = [];\n      const isAnyoneCanPay =\n        hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY;\n      if (isAnyoneCanPay) whitelist.push('addInput');\n      const hashMod = hashType & 0x1f;\n      switch (hashMod) {\n        case transaction_1.Transaction.SIGHASH_ALL:\n          break;\n        case transaction_1.Transaction.SIGHASH_SINGLE:\n        case transaction_1.Transaction.SIGHASH_NONE:\n          whitelist.push('addOutput');\n          whitelist.push('setInputSequence');\n          break;\n      }\n      if (whitelist.indexOf(action) === -1) {\n        throws = true;\n      }\n    });\n    if (throws) {\n      throw new Error('Can not modify transaction, signatures exist.');\n    }\n  });\n}\nfunction checkPartialSigSighashes(input) {\n  if (!input.sighashType || !input.partialSig) return;\n  const { partialSig, sighashType } = input;\n  partialSig.forEach(pSig => {\n    const { hashType } = bscript.signature.decode(pSig.signature);\n    if (sighashType !== hashType) {\n      throw new Error('Signature sighash does not match input sighash type');\n    }\n  });\n}\nfunction checkScriptForPubkey(pubkey, script, action) {\n  if (!pubkeyInScript(pubkey, script)) {\n    throw new Error(\n      `Can not ${action} for this input with the key ${pubkey.toString('hex')}`,\n    );\n  }\n}\nfunction checkTxEmpty(tx) {\n  const isEmpty = tx.ins.every(\n    input =>\n      input.script &&\n      input.script.length === 0 &&\n      input.witness &&\n      input.witness.length === 0,\n  );\n  if (!isEmpty) {\n    throw new Error('Format Error: Transaction ScriptSigs are not empty');\n  }\n}\nfunction checkTxForDupeIns(tx, cache) {\n  tx.ins.forEach(input => {\n    checkTxInputCache(cache, input);\n  });\n}\nfunction checkTxInputCache(cache, input) {\n  const key =\n    bufferutils_1.reverseBuffer(Buffer.from(input.hash)).toString('hex') +\n    ':' +\n    input.index;\n  if (cache.__TX_IN_CACHE[key]) throw new Error('Duplicate input detected.');\n  cache.__TX_IN_CACHE[key] = 1;\n}\nfunction scriptCheckerFactory(payment, paymentScriptName) {\n  return (inputIndex, scriptPubKey, redeemScript, ioType) => {\n    const redeemScriptOutput = payment({\n      redeem: { output: redeemScript },\n    }).output;\n    if (!scriptPubKey.equals(redeemScriptOutput)) {\n      throw new Error(\n        `${paymentScriptName} for ${ioType} #${inputIndex} doesn't match the scriptPubKey in the prevout`,\n      );\n    }\n  };\n}\nconst checkRedeemScript = scriptCheckerFactory(payments.p2sh, 'Redeem script');\nconst checkWitnessScript = scriptCheckerFactory(\n  payments.p2wsh,\n  'Witness script',\n);\nfunction getTxCacheValue(key, name, inputs, c) {\n  if (!inputs.every(isFinalized))\n    throw new Error(`PSBT must be finalized to calculate ${name}`);\n  if (key === '__FEE_RATE' && c.__FEE_RATE) return c.__FEE_RATE;\n  if (key === '__FEE' && c.__FEE) return c.__FEE;\n  let tx;\n  let mustFinalize = true;\n  if (c.__EXTRACTED_TX) {\n    tx = c.__EXTRACTED_TX;\n    mustFinalize = false;\n  } else {\n    tx = c.__TX.clone();\n  }\n  inputFinalizeGetAmts(inputs, tx, c, mustFinalize);\n  if (key === '__FEE_RATE') return c.__FEE_RATE;\n  else if (key === '__FEE') return c.__FEE;\n}\nfunction getFinalScripts(inputIndex, input, script, isSegwit, isP2SH, isP2WSH) {\n  const scriptType = classifyScript(script);\n  if (!canFinalize(input, script, scriptType))\n    throw new Error(`Can not finalize input #${inputIndex}`);\n  return prepareFinalScripts(\n    script,\n    scriptType,\n    input.partialSig,\n    isSegwit,\n    isP2SH,\n    isP2WSH,\n  );\n}\nfunction prepareFinalScripts(\n  script,\n  scriptType,\n  partialSig,\n  isSegwit,\n  isP2SH,\n  isP2WSH,\n) {\n  let finalScriptSig;\n  let finalScriptWitness;\n  // Wow, the payments API is very handy\n  const payment = getPayment(script, scriptType, partialSig);\n  const p2wsh = !isP2WSH ? null : payments.p2wsh({ redeem: payment });\n  const p2sh = !isP2SH ? null : payments.p2sh({ redeem: p2wsh || payment });\n  if (isSegwit) {\n    if (p2wsh) {\n      finalScriptWitness = witnessStackToScriptWitness(p2wsh.witness);\n    } else {\n      finalScriptWitness = witnessStackToScriptWitness(payment.witness);\n    }\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    }\n  } else {\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    } else {\n      finalScriptSig = payment.input;\n    }\n  }\n  return {\n    finalScriptSig,\n    finalScriptWitness,\n  };\n}\nfunction getHashAndSighashType(\n  inputs,\n  inputIndex,\n  pubkey,\n  cache,\n  sighashTypes,\n) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  const { hash, sighashType, script } = getHashForSig(\n    inputIndex,\n    input,\n    cache,\n    false,\n    sighashTypes,\n  );\n  checkScriptForPubkey(pubkey, script, 'sign');\n  return {\n    hash,\n    sighashType,\n  };\n}\nfunction getHashForSig(inputIndex, input, cache, forValidate, sighashTypes) {\n  const unsignedTx = cache.__TX;\n  const sighashType =\n    input.sighashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (sighashTypes && sighashTypes.indexOf(sighashType) < 0) {\n    const str = sighashTypeToString(sighashType);\n    throw new Error(\n      `Sighash type is not allowed. Retry the sign method passing the ` +\n        `sighashTypes array of whitelisted types. Sighash type: ${str}`,\n    );\n  }\n  let hash;\n  let prevout;\n  if (input.nonWitnessUtxo) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const prevoutHash = unsignedTx.ins[inputIndex].hash;\n    const utxoHash = nonWitnessUtxoTx.getHash();\n    // If a non-witness UTXO is provided, its hash must match the hash specified in the prevout\n    if (!prevoutHash.equals(utxoHash)) {\n      throw new Error(\n        `Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`,\n      );\n    }\n    const prevoutIndex = unsignedTx.ins[inputIndex].index;\n    prevout = nonWitnessUtxoTx.outs[prevoutIndex];\n  } else if (input.witnessUtxo) {\n    prevout = input.witnessUtxo;\n  } else {\n    throw new Error('Need a Utxo input item for signing');\n  }\n  const { meaningfulScript, type } = getMeaningfulScript(\n    prevout.script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  if (['p2sh-p2wsh', 'p2wsh'].indexOf(type) >= 0) {\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      meaningfulScript,\n      prevout.value,\n      sighashType,\n    );\n  } else if (isP2WPKH(meaningfulScript)) {\n    // P2WPKH uses the P2PKH template for prevoutScript when signing\n    const signingScript = payments.p2pkh({ hash: meaningfulScript.slice(2) })\n      .output;\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      signingScript,\n      prevout.value,\n      sighashType,\n    );\n  } else {\n    // non-segwit\n    if (\n      input.nonWitnessUtxo === undefined &&\n      cache.__UNSAFE_SIGN_NONSEGWIT === false\n    )\n      throw new Error(\n        `Input #${inputIndex} has witnessUtxo but non-segwit script: ` +\n          `${meaningfulScript.toString('hex')}`,\n      );\n    if (!forValidate && cache.__UNSAFE_SIGN_NONSEGWIT !== false)\n      console.warn(\n        'Warning: Signing non-segwit inputs without the full parent transaction ' +\n          'means there is a chance that a miner could feed you incorrect information ' +\n          'to trick you into paying large fees. This behavior is the same as the old ' +\n          'TransactionBuilder class when signing non-segwit scripts. You are not ' +\n          'able to export this Psbt with toBuffer|toBase64|toHex since it is not ' +\n          'BIP174 compliant.\\n*********************\\nPROCEED WITH CAUTION!\\n' +\n          '*********************',\n      );\n    hash = unsignedTx.hashForSignature(\n      inputIndex,\n      meaningfulScript,\n      sighashType,\n    );\n  }\n  return {\n    script: meaningfulScript,\n    sighashType,\n    hash,\n  };\n}\nfunction getPayment(script, scriptType, partialSig) {\n  let payment;\n  switch (scriptType) {\n    case 'multisig':\n      const sigs = getSortedSigs(script, partialSig);\n      payment = payments.p2ms({\n        output: script,\n        signatures: sigs,\n      });\n      break;\n    case 'pubkey':\n      payment = payments.p2pk({\n        output: script,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'pubkeyhash':\n      payment = payments.p2pkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'witnesspubkeyhash':\n      payment = payments.p2wpkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n  }\n  return payment;\n}\nfunction getPsigsFromInputFinalScripts(input) {\n  const scriptItems = !input.finalScriptSig\n    ? []\n    : bscript.decompile(input.finalScriptSig) || [];\n  const witnessItems = !input.finalScriptWitness\n    ? []\n    : bscript.decompile(input.finalScriptWitness) || [];\n  return scriptItems\n    .concat(witnessItems)\n    .filter(item => {\n      return Buffer.isBuffer(item) && bscript.isCanonicalScriptSignature(item);\n    })\n    .map(sig => ({ signature: sig }));\n}\nfunction getScriptFromInput(inputIndex, input, cache) {\n  const unsignedTx = cache.__TX;\n  const res = {\n    script: null,\n    isSegwit: false,\n    isP2SH: false,\n    isP2WSH: false,\n  };\n  res.isP2SH = !!input.redeemScript;\n  res.isP2WSH = !!input.witnessScript;\n  if (input.witnessScript) {\n    res.script = input.witnessScript;\n  } else if (input.redeemScript) {\n    res.script = input.redeemScript;\n  } else {\n    if (input.nonWitnessUtxo) {\n      const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n        cache,\n        input,\n        inputIndex,\n      );\n      const prevoutIndex = unsignedTx.ins[inputIndex].index;\n      res.script = nonWitnessUtxoTx.outs[prevoutIndex].script;\n    } else if (input.witnessUtxo) {\n      res.script = input.witnessUtxo.script;\n    }\n  }\n  if (input.witnessScript || isP2WPKH(res.script)) {\n    res.isSegwit = true;\n  }\n  return res;\n}\nfunction getSignersFromHD(inputIndex, inputs, hdKeyPair) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  if (!input.bip32Derivation || input.bip32Derivation.length === 0) {\n    throw new Error('Need bip32Derivation to sign with HD');\n  }\n  const myDerivations = input.bip32Derivation\n    .map(bipDv => {\n      if (bipDv.masterFingerprint.equals(hdKeyPair.fingerprint)) {\n        return bipDv;\n      } else {\n        return;\n      }\n    })\n    .filter(v => !!v);\n  if (myDerivations.length === 0) {\n    throw new Error(\n      'Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint',\n    );\n  }\n  const signers = myDerivations.map(bipDv => {\n    const node = hdKeyPair.derivePath(bipDv.path);\n    if (!bipDv.pubkey.equals(node.publicKey)) {\n      throw new Error('pubkey did not match bip32Derivation');\n    }\n    return node;\n  });\n  return signers;\n}\nfunction getSortedSigs(script, partialSig) {\n  const p2ms = payments.p2ms({ output: script });\n  // for each pubkey in order of p2ms script\n  return p2ms.pubkeys\n    .map(pk => {\n      // filter partialSig array by pubkey being equal\n      return (\n        partialSig.filter(ps => {\n          return ps.pubkey.equals(pk);\n        })[0] || {}\n      ).signature;\n      // Any pubkey without a match will return undefined\n      // this last filter removes all the undefined items in the array.\n    })\n    .filter(v => !!v);\n}\nfunction scriptWitnessToWitnessStack(buffer) {\n  let offset = 0;\n  function readSlice(n) {\n    offset += n;\n    return buffer.slice(offset - n, offset);\n  }\n  function readVarInt() {\n    const vi = varuint.decode(buffer, offset);\n    offset += varuint.decode.bytes;\n    return vi;\n  }\n  function readVarSlice() {\n    return readSlice(readVarInt());\n  }\n  function readVector() {\n    const count = readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(readVarSlice());\n    return vector;\n  }\n  return readVector();\n}\nfunction sighashTypeToString(sighashType) {\n  let text =\n    sighashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY\n      ? 'SIGHASH_ANYONECANPAY | '\n      : '';\n  const sigMod = sighashType & 0x1f;\n  switch (sigMod) {\n    case transaction_1.Transaction.SIGHASH_ALL:\n      text += 'SIGHASH_ALL';\n      break;\n    case transaction_1.Transaction.SIGHASH_SINGLE:\n      text += 'SIGHASH_SINGLE';\n      break;\n    case transaction_1.Transaction.SIGHASH_NONE:\n      text += 'SIGHASH_NONE';\n      break;\n  }\n  return text;\n}\nfunction witnessStackToScriptWitness(witness) {\n  let buffer = Buffer.allocUnsafe(0);\n  function writeSlice(slice) {\n    buffer = Buffer.concat([buffer, Buffer.from(slice)]);\n  }\n  function writeVarInt(i) {\n    const currentLen = buffer.length;\n    const varintLen = varuint.encodingLength(i);\n    buffer = Buffer.concat([buffer, Buffer.allocUnsafe(varintLen)]);\n    varuint.encode(i, buffer, currentLen);\n  }\n  function writeVarSlice(slice) {\n    writeVarInt(slice.length);\n    writeSlice(slice);\n  }\n  function writeVector(vector) {\n    writeVarInt(vector.length);\n    vector.forEach(writeVarSlice);\n  }\n  writeVector(witness);\n  return buffer;\n}\nfunction addNonWitnessTxCache(cache, input, inputIndex) {\n  cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex] = input.nonWitnessUtxo;\n  const tx = transaction_1.Transaction.fromBuffer(input.nonWitnessUtxo);\n  cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex] = tx;\n  const self = cache;\n  const selfIndex = inputIndex;\n  delete input.nonWitnessUtxo;\n  Object.defineProperty(input, 'nonWitnessUtxo', {\n    enumerable: true,\n    get() {\n      const buf = self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex];\n      const txCache = self.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];\n      if (buf !== undefined) {\n        return buf;\n      } else {\n        const newBuf = txCache.toBuffer();\n        self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = newBuf;\n        return newBuf;\n      }\n    },\n    set(data) {\n      self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = data;\n    },\n  });\n}\nfunction inputFinalizeGetAmts(inputs, tx, cache, mustFinalize) {\n  let inputAmount = 0;\n  inputs.forEach((input, idx) => {\n    if (mustFinalize && input.finalScriptSig)\n      tx.ins[idx].script = input.finalScriptSig;\n    if (mustFinalize && input.finalScriptWitness) {\n      tx.ins[idx].witness = scriptWitnessToWitnessStack(\n        input.finalScriptWitness,\n      );\n    }\n    if (input.witnessUtxo) {\n      inputAmount += input.witnessUtxo.value;\n    } else if (input.nonWitnessUtxo) {\n      const nwTx = nonWitnessUtxoTxFromCache(cache, input, idx);\n      const vout = tx.ins[idx].index;\n      const out = nwTx.outs[vout];\n      inputAmount += out.value;\n    }\n  });\n  const outputAmount = tx.outs.reduce((total, o) => total + o.value, 0);\n  const fee = inputAmount - outputAmount;\n  if (fee < 0) {\n    throw new Error('Outputs are spending more than Inputs');\n  }\n  const bytes = tx.virtualSize();\n  cache.__FEE = fee;\n  cache.__EXTRACTED_TX = tx;\n  cache.__FEE_RATE = Math.floor(fee / bytes);\n}\nfunction nonWitnessUtxoTxFromCache(cache, input, inputIndex) {\n  const c = cache.__NON_WITNESS_UTXO_TX_CACHE;\n  if (!c[inputIndex]) {\n    addNonWitnessTxCache(cache, input, inputIndex);\n  }\n  return c[inputIndex];\n}\nfunction getScriptFromUtxo(inputIndex, input, cache) {\n  if (input.witnessUtxo !== undefined) {\n    return input.witnessUtxo.script;\n  } else if (input.nonWitnessUtxo !== undefined) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    return nonWitnessUtxoTx.outs[cache.__TX.ins[inputIndex].index].script;\n  } else {\n    throw new Error(\"Can't find pubkey in input without Utxo data\");\n  }\n}\nfunction pubkeyInInput(pubkey, input, inputIndex, cache) {\n  const script = getScriptFromUtxo(inputIndex, input, cache);\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  return pubkeyInScript(pubkey, meaningfulScript);\n}\nfunction pubkeyInOutput(pubkey, output, outputIndex, cache) {\n  const script = cache.__TX.outs[outputIndex].script;\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    outputIndex,\n    'output',\n    output.redeemScript,\n    output.witnessScript,\n  );\n  return pubkeyInScript(pubkey, meaningfulScript);\n}\nfunction redeemFromFinalScriptSig(finalScript) {\n  if (!finalScript) return;\n  const decomp = bscript.decompile(finalScript);\n  if (!decomp) return;\n  const lastItem = decomp[decomp.length - 1];\n  if (\n    !Buffer.isBuffer(lastItem) ||\n    isPubkeyLike(lastItem) ||\n    isSigLike(lastItem)\n  )\n    return;\n  const sDecomp = bscript.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction redeemFromFinalWitnessScript(finalScript) {\n  if (!finalScript) return;\n  const decomp = scriptWitnessToWitnessStack(finalScript);\n  const lastItem = decomp[decomp.length - 1];\n  if (isPubkeyLike(lastItem)) return;\n  const sDecomp = bscript.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction isPubkeyLike(buf) {\n  return buf.length === 33 && bscript.isCanonicalPubKey(buf);\n}\nfunction isSigLike(buf) {\n  return bscript.isCanonicalScriptSignature(buf);\n}\nfunction getMeaningfulScript(\n  script,\n  index,\n  ioType,\n  redeemScript,\n  witnessScript,\n) {\n  const isP2SH = isP2SHScript(script);\n  const isP2SHP2WSH = isP2SH && redeemScript && isP2WSHScript(redeemScript);\n  const isP2WSH = isP2WSHScript(script);\n  if (isP2SH && redeemScript === undefined)\n    throw new Error('scriptPubkey is P2SH but redeemScript missing');\n  if ((isP2WSH || isP2SHP2WSH) && witnessScript === undefined)\n    throw new Error(\n      'scriptPubkey or redeemScript is P2WSH but witnessScript missing',\n    );\n  let meaningfulScript;\n  if (isP2SHP2WSH) {\n    meaningfulScript = witnessScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n    checkWitnessScript(index, redeemScript, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2WSH) {\n    meaningfulScript = witnessScript;\n    checkWitnessScript(index, script, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2SH) {\n    meaningfulScript = redeemScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n  } else {\n    meaningfulScript = script;\n  }\n  return {\n    meaningfulScript,\n    type: isP2SHP2WSH\n      ? 'p2sh-p2wsh'\n      : isP2SH\n      ? 'p2sh'\n      : isP2WSH\n      ? 'p2wsh'\n      : 'raw',\n  };\n}\nfunction checkInvalidP2WSH(script) {\n  if (isP2WPKH(script) || isP2SHScript(script)) {\n    throw new Error('P2WPKH or P2SH can not be contained within P2WSH');\n  }\n}\nfunction pubkeyInScript(pubkey, script) {\n  const pubkeyHash = crypto_1.hash160(pubkey);\n  const decompiled = bscript.decompile(script);\n  if (decompiled === null) throw new Error('Unknown script error');\n  return decompiled.some(element => {\n    if (typeof element === 'number') return false;\n    return element.equals(pubkey) || element.equals(pubkeyHash);\n  });\n}\nfunction classifyScript(script) {\n  if (isP2WPKH(script)) return 'witnesspubkeyhash';\n  if (isP2PKH(script)) return 'pubkeyhash';\n  if (isP2MS(script)) return 'multisig';\n  if (isP2PK(script)) return 'pubkey';\n  return 'nonstandard';\n}\nfunction range(n) {\n  return [...Array(n).keys()];\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst combiner_1 = require('./combiner');\nconst parser_1 = require('./parser');\nconst typeFields_1 = require('./typeFields');\nconst utils_1 = require('./utils');\nclass Psbt {\n  constructor(tx) {\n    this.inputs = [];\n    this.outputs = [];\n    this.globalMap = {\n      unsignedTx: tx,\n    };\n  }\n  static fromBase64(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromHex(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromBuffer(buffer, txFromBuffer) {\n    const results = parser_1.psbtFromBuffer(buffer, txFromBuffer);\n    const psbt = new this(results.globalMap.unsignedTx);\n    Object.assign(psbt, results);\n    return psbt;\n  }\n  toBase64() {\n    const buffer = this.toBuffer();\n    return buffer.toString('base64');\n  }\n  toHex() {\n    const buffer = this.toBuffer();\n    return buffer.toString('hex');\n  }\n  toBuffer() {\n    return parser_1.psbtToBuffer(this);\n  }\n  updateGlobal(updateData) {\n    utils_1.updateGlobal(updateData, this.globalMap);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.updateInput(updateData, input);\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.updateOutput(updateData, output);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    utils_1.checkHasKey(\n      keyVal,\n      this.globalMap.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.GlobalTypes),\n    );\n    if (!this.globalMap.unknownKeyVals) this.globalMap.unknownKeyVals = [];\n    this.globalMap.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      input.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.InputTypes),\n    );\n    if (!input.unknownKeyVals) input.unknownKeyVals = [];\n    input.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      output.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.OutputTypes),\n    );\n    if (!output.unknownKeyVals) output.unknownKeyVals = [];\n    output.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addInput(inputData) {\n    this.globalMap.unsignedTx.addInput(inputData);\n    this.inputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = inputData.unknownKeyVals || [];\n    const inputIndex = this.inputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(inputIndex, keyVal),\n    );\n    utils_1.addInputAttributes(this.inputs, inputData);\n    return this;\n  }\n  addOutput(outputData) {\n    this.globalMap.unsignedTx.addOutput(outputData);\n    this.outputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = outputData.unknownKeyVals || [];\n    const outputIndex = this.outputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(outputIndex, keyVal),\n    );\n    utils_1.addOutputAttributes(this.outputs, outputData);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.inputCheckUncleanFinalized(inputIndex, input);\n    for (const key of Object.keys(input)) {\n      if (\n        ![\n          'witnessUtxo',\n          'nonWitnessUtxo',\n          'finalScriptSig',\n          'finalScriptWitness',\n          'unknownKeyVals',\n        ].includes(key)\n      ) {\n        // @ts-ignore\n        delete input[key];\n      }\n    }\n    return this;\n  }\n  combine(...those) {\n    // Combine this with those.\n    // Return self for chaining.\n    const result = combiner_1.combine([this].concat(those));\n    Object.assign(this, result);\n    return this;\n  }\n  getTransaction() {\n    return this.globalMap.unsignedTx.toBuffer();\n  }\n}\nexports.Psbt = Psbt;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst parser_1 = require('../parser');\nfunction combine(psbts) {\n  const self = psbts[0];\n  const selfKeyVals = parser_1.psbtToKeyVals(self);\n  const others = psbts.slice(1);\n  if (others.length === 0) throw new Error('Combine: Nothing to combine');\n  const selfTx = getTx(self);\n  if (selfTx === undefined) {\n    throw new Error('Combine: Self missing transaction');\n  }\n  const selfGlobalSet = getKeySet(selfKeyVals.globalKeyVals);\n  const selfInputSets = selfKeyVals.inputKeyVals.map(getKeySet);\n  const selfOutputSets = selfKeyVals.outputKeyVals.map(getKeySet);\n  for (const other of others) {\n    const otherTx = getTx(other);\n    if (\n      otherTx === undefined ||\n      !otherTx.toBuffer().equals(selfTx.toBuffer())\n    ) {\n      throw new Error(\n        'Combine: One of the Psbts does not have the same transaction.',\n      );\n    }\n    const otherKeyVals = parser_1.psbtToKeyVals(other);\n    const otherGlobalSet = getKeySet(otherKeyVals.globalKeyVals);\n    otherGlobalSet.forEach(\n      keyPusher(\n        selfGlobalSet,\n        selfKeyVals.globalKeyVals,\n        otherKeyVals.globalKeyVals,\n      ),\n    );\n    const otherInputSets = otherKeyVals.inputKeyVals.map(getKeySet);\n    otherInputSets.forEach((inputSet, idx) =>\n      inputSet.forEach(\n        keyPusher(\n          selfInputSets[idx],\n          selfKeyVals.inputKeyVals[idx],\n          otherKeyVals.inputKeyVals[idx],\n        ),\n      ),\n    );\n    const otherOutputSets = otherKeyVals.outputKeyVals.map(getKeySet);\n    otherOutputSets.forEach((outputSet, idx) =>\n      outputSet.forEach(\n        keyPusher(\n          selfOutputSets[idx],\n          selfKeyVals.outputKeyVals[idx],\n          otherKeyVals.outputKeyVals[idx],\n        ),\n      ),\n    );\n  }\n  return parser_1.psbtFromKeyVals(selfTx, {\n    globalMapKeyVals: selfKeyVals.globalKeyVals,\n    inputKeyVals: selfKeyVals.inputKeyVals,\n    outputKeyVals: selfKeyVals.outputKeyVals,\n  });\n}\nexports.combine = combine;\nfunction keyPusher(selfSet, selfKeyVals, otherKeyVals) {\n  return key => {\n    if (selfSet.has(key)) return;\n    const newKv = otherKeyVals.filter(kv => kv.key.toString('hex') === key)[0];\n    selfKeyVals.push(newKv);\n    selfSet.add(key);\n  };\n}\nfunction getTx(psbt) {\n  return psbt.globalMap.unsignedTx;\n}\nfunction getKeySet(keyVals) {\n  const set = new Set();\n  keyVals.forEach(keyVal => {\n    const hex = keyVal.key.toString('hex');\n    if (set.has(hex))\n      throw new Error('Combine: KeyValue Map keys should be unique');\n    set.add(hex);\n  });\n  return set;\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nconst varuint = require('../converter/varint');\nconst typeFields_1 = require('../typeFields');\nfunction psbtFromBuffer(buffer, txGetter) {\n  let offset = 0;\n  function varSlice() {\n    const keyLen = varuint.decode(buffer, offset);\n    offset += varuint.encodingLength(keyLen);\n    const key = buffer.slice(offset, offset + keyLen);\n    offset += keyLen;\n    return key;\n  }\n  function readUInt32BE() {\n    const num = buffer.readUInt32BE(offset);\n    offset += 4;\n    return num;\n  }\n  function readUInt8() {\n    const num = buffer.readUInt8(offset);\n    offset += 1;\n    return num;\n  }\n  function getKeyValue() {\n    const key = varSlice();\n    const value = varSlice();\n    return {\n      key,\n      value,\n    };\n  }\n  function checkEndOfKeyValPairs() {\n    if (offset >= buffer.length) {\n      throw new Error('Format Error: Unexpected End of PSBT');\n    }\n    const isEnd = buffer.readUInt8(offset) === 0;\n    if (isEnd) {\n      offset++;\n    }\n    return isEnd;\n  }\n  if (readUInt32BE() !== 0x70736274) {\n    throw new Error('Format Error: Invalid Magic Number');\n  }\n  if (readUInt8() !== 0xff) {\n    throw new Error(\n      'Format Error: Magic Number must be followed by 0xff separator',\n    );\n  }\n  const globalMapKeyVals = [];\n  const globalKeyIndex = {};\n  while (!checkEndOfKeyValPairs()) {\n    const keyVal = getKeyValue();\n    const hexKey = keyVal.key.toString('hex');\n    if (globalKeyIndex[hexKey]) {\n      throw new Error(\n        'Format Error: Keys must be unique for global keymap: key ' + hexKey,\n      );\n    }\n    globalKeyIndex[hexKey] = 1;\n    globalMapKeyVals.push(keyVal);\n  }\n  const unsignedTxMaps = globalMapKeyVals.filter(\n    keyVal => keyVal.key[0] === typeFields_1.GlobalTypes.UNSIGNED_TX,\n  );\n  if (unsignedTxMaps.length !== 1) {\n    throw new Error('Format Error: Only one UNSIGNED_TX allowed');\n  }\n  const unsignedTx = txGetter(unsignedTxMaps[0].value);\n  // Get input and output counts to loop the respective fields\n  const { inputCount, outputCount } = unsignedTx.getInputOutputCounts();\n  const inputKeyVals = [];\n  const outputKeyVals = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const inputKeyIndex = {};\n    const input = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (inputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each input: ' +\n            'input index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      inputKeyIndex[hexKey] = 1;\n      input.push(keyVal);\n    }\n    inputKeyVals.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const outputKeyIndex = {};\n    const output = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (outputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each output: ' +\n            'output index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      outputKeyIndex[hexKey] = 1;\n      output.push(keyVal);\n    }\n    outputKeyVals.push(output);\n  }\n  return psbtFromKeyVals(unsignedTx, {\n    globalMapKeyVals,\n    inputKeyVals,\n    outputKeyVals,\n  });\n}\nexports.psbtFromBuffer = psbtFromBuffer;\nfunction checkKeyBuffer(type, keyBuf, keyNum) {\n  if (!keyBuf.equals(Buffer.from([keyNum]))) {\n    throw new Error(\n      `Format Error: Invalid ${type} key: ${keyBuf.toString('hex')}`,\n    );\n  }\n}\nexports.checkKeyBuffer = checkKeyBuffer;\nfunction psbtFromKeyVals(\n  unsignedTx,\n  { globalMapKeyVals, inputKeyVals, outputKeyVals },\n) {\n  // That was easy :-)\n  const globalMap = {\n    unsignedTx,\n  };\n  let txCount = 0;\n  for (const keyVal of globalMapKeyVals) {\n    // If a globalMap item needs pubkey, uncomment\n    // const pubkey = convert.globals.checkPubkey(keyVal);\n    switch (keyVal.key[0]) {\n      case typeFields_1.GlobalTypes.UNSIGNED_TX:\n        checkKeyBuffer(\n          'global',\n          keyVal.key,\n          typeFields_1.GlobalTypes.UNSIGNED_TX,\n        );\n        if (txCount > 0) {\n          throw new Error('Format Error: GlobalMap has multiple UNSIGNED_TX');\n        }\n        txCount++;\n        break;\n      case typeFields_1.GlobalTypes.GLOBAL_XPUB:\n        if (globalMap.globalXpub === undefined) {\n          globalMap.globalXpub = [];\n        }\n        globalMap.globalXpub.push(convert.globals.globalXpub.decode(keyVal));\n        break;\n      default:\n        // This will allow inclusion during serialization.\n        if (!globalMap.unknownKeyVals) globalMap.unknownKeyVals = [];\n        globalMap.unknownKeyVals.push(keyVal);\n    }\n  }\n  // Get input and output counts to loop the respective fields\n  const inputCount = inputKeyVals.length;\n  const outputCount = outputKeyVals.length;\n  const inputs = [];\n  const outputs = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const input = {};\n    for (const keyVal of inputKeyVals[index]) {\n      convert.inputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.InputTypes.NON_WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.NON_WITNESS_UTXO,\n          );\n          if (input.nonWitnessUtxo !== undefined) {\n            throw new Error(\n              'Format Error: Input has multiple NON_WITNESS_UTXO',\n            );\n          }\n          input.nonWitnessUtxo = convert.inputs.nonWitnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_UTXO,\n          );\n          if (input.witnessUtxo !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_UTXO');\n          }\n          input.witnessUtxo = convert.inputs.witnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.PARTIAL_SIG:\n          if (input.partialSig === undefined) {\n            input.partialSig = [];\n          }\n          input.partialSig.push(convert.inputs.partialSig.decode(keyVal));\n          break;\n        case typeFields_1.InputTypes.SIGHASH_TYPE:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.SIGHASH_TYPE,\n          );\n          if (input.sighashType !== undefined) {\n            throw new Error('Format Error: Input has multiple SIGHASH_TYPE');\n          }\n          input.sighashType = convert.inputs.sighashType.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.REDEEM_SCRIPT,\n          );\n          if (input.redeemScript !== undefined) {\n            throw new Error('Format Error: Input has multiple REDEEM_SCRIPT');\n          }\n          input.redeemScript = convert.inputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_SCRIPT,\n          );\n          if (input.witnessScript !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_SCRIPT');\n          }\n          input.witnessScript = convert.inputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.BIP32_DERIVATION:\n          if (input.bip32Derivation === undefined) {\n            input.bip32Derivation = [];\n          }\n          input.bip32Derivation.push(\n            convert.inputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTSIG:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTSIG,\n          );\n          input.finalScriptSig = convert.inputs.finalScriptSig.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTWITNESS:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTWITNESS,\n          );\n          input.finalScriptWitness = convert.inputs.finalScriptWitness.decode(\n            keyVal,\n          );\n          break;\n        case typeFields_1.InputTypes.POR_COMMITMENT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.POR_COMMITMENT,\n          );\n          input.porCommitment = convert.inputs.porCommitment.decode(keyVal);\n          break;\n        default:\n          // This will allow inclusion during serialization.\n          if (!input.unknownKeyVals) input.unknownKeyVals = [];\n          input.unknownKeyVals.push(keyVal);\n      }\n    }\n    inputs.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const output = {};\n    for (const keyVal of outputKeyVals[index]) {\n      convert.outputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.OutputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.REDEEM_SCRIPT,\n          );\n          if (output.redeemScript !== undefined) {\n            throw new Error('Format Error: Output has multiple REDEEM_SCRIPT');\n          }\n          output.redeemScript = convert.outputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.WITNESS_SCRIPT,\n          );\n          if (output.witnessScript !== undefined) {\n            throw new Error('Format Error: Output has multiple WITNESS_SCRIPT');\n          }\n          output.witnessScript = convert.outputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.BIP32_DERIVATION:\n          if (output.bip32Derivation === undefined) {\n            output.bip32Derivation = [];\n          }\n          output.bip32Derivation.push(\n            convert.outputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        default:\n          if (!output.unknownKeyVals) output.unknownKeyVals = [];\n          output.unknownKeyVals.push(keyVal);\n      }\n    }\n    outputs.push(output);\n  }\n  return { globalMap, inputs, outputs };\n}\nexports.psbtFromKeyVals = psbtFromKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst range = n => [...Array(n).keys()];\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.GlobalTypes.GLOBAL_XPUB) {\n    throw new Error(\n      'Decode Error: could not decode globalXpub with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (keyVal.key.length !== 79 || ![2, 3].includes(keyVal.key[46])) {\n    throw new Error(\n      'Decode Error: globalXpub has invalid extended pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if ((keyVal.value.length / 4) % 1 !== 0) {\n    throw new Error(\n      'Decode Error: Global GLOBAL_XPUB value length should be multiple of 4',\n    );\n  }\n  const extendedPubkey = keyVal.key.slice(1);\n  const data = {\n    masterFingerprint: keyVal.value.slice(0, 4),\n    extendedPubkey,\n    path: 'm',\n  };\n  for (const i of range(keyVal.value.length / 4 - 1)) {\n    const val = keyVal.value.readUInt32LE(i * 4 + 4);\n    const isHard = !!(val & 0x80000000);\n    const idx = val & 0x7fffffff;\n    data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n  }\n  return data;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const head = Buffer.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]);\n  const key = Buffer.concat([head, data.extendedPubkey]);\n  const splitPath = data.path.split('/');\n  const value = Buffer.allocUnsafe(splitPath.length * 4);\n  data.masterFingerprint.copy(value, 0);\n  let offset = 4;\n  splitPath.slice(1).forEach(level => {\n    const isHard = level.slice(-1) === \"'\";\n    let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n    if (isHard) num += 0x80000000;\n    value.writeUInt32LE(num, offset);\n    offset += 4;\n  });\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected =\n  '{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }';\nfunction check(data) {\n  const epk = data.extendedPubkey;\n  const mfp = data.masterFingerprint;\n  const p = data.path;\n  return (\n    Buffer.isBuffer(epk) &&\n    epk.length === 78 &&\n    [2, 3].indexOf(epk[45]) > -1 &&\n    Buffer.isBuffer(mfp) &&\n    mfp.length === 4 &&\n    typeof p === 'string' &&\n    !!p.match(/^m(\\/\\d+'?)+$/)\n  );\n}\nexports.check = check;\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.extendedPubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return (\n    array.filter(v => v.extendedPubkey.equals(item.extendedPubkey)).length === 0\n  );\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.GlobalTypes.UNSIGNED_TX]),\n    value: data.toBuffer(),\n  };\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTSIG) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTSIG]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.finalScriptSig === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTWITNESS) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptWitness with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTWITNESS]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData && !!newData && currentData.finalScriptWitness === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.NON_WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode nonWitnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.NON_WITNESS_UTXO]),\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.nonWitnessUtxo === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.PARTIAL_SIG) {\n    throw new Error(\n      'Decode Error: could not decode partialSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (\n    !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n    ![2, 3, 4].includes(keyVal.key[1])\n  ) {\n    throw new Error(\n      'Decode Error: partialSig has invalid pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const pubkey = keyVal.key.slice(1);\n  return {\n    pubkey,\n    signature: keyVal.value,\n  };\n}\nexports.decode = decode;\nfunction encode(pSig) {\n  const head = Buffer.from([typeFields_1.InputTypes.PARTIAL_SIG]);\n  return {\n    key: Buffer.concat([head, pSig.pubkey]),\n    value: pSig.signature,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ pubkey: Buffer; signature: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.pubkey) &&\n    Buffer.isBuffer(data.signature) &&\n    [33, 65].includes(data.pubkey.length) &&\n    [2, 3, 4].includes(data.pubkey[0]) &&\n    isDerSigWithSighash(data.signature)\n  );\n}\nexports.check = check;\nfunction isDerSigWithSighash(buf) {\n  if (!Buffer.isBuffer(buf) || buf.length < 9) return false;\n  if (buf[0] !== 0x30) return false;\n  if (buf.length !== buf[1] + 3) return false;\n  if (buf[2] !== 0x02) return false;\n  const rLen = buf[3];\n  if (rLen > 33 || rLen < 1) return false;\n  if (buf[3 + rLen + 1] !== 0x02) return false;\n  const sLen = buf[3 + rLen + 2];\n  if (sLen > 33 || sLen < 1) return false;\n  if (buf.length !== 3 + rLen + 2 + sLen + 2) return false;\n  return true;\n}\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.pubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.POR_COMMITMENT) {\n    throw new Error(\n      'Decode Error: could not decode porCommitment with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.toString('utf8');\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.POR_COMMITMENT]);\n  return {\n    key,\n    value: Buffer.from(data, 'utf8'),\n  };\n}\nexports.encode = encode;\nexports.expected = 'string';\nfunction check(data) {\n  return typeof data === 'string';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.porCommitment === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.SIGHASH_TYPE) {\n    throw new Error(\n      'Decode Error: could not decode sighashType with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.readUInt32LE(0);\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.SIGHASH_TYPE]);\n  const value = Buffer.allocUnsafe(4);\n  value.writeUInt32LE(data, 0);\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected = 'number';\nfunction check(data) {\n  return typeof data === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.sighashType === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst tools_1 = require('../tools');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode witnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const value = tools_1.readUInt64LE(keyVal.value, 0);\n  let _offset = 8;\n  const scriptLen = varuint.decode(keyVal.value, _offset);\n  _offset += varuint.encodingLength(scriptLen);\n  const script = keyVal.value.slice(_offset);\n  if (script.length !== scriptLen) {\n    throw new Error('Decode Error: WITNESS_UTXO script is not proper length');\n  }\n  return {\n    script,\n    value,\n  };\n}\nexports.decode = decode;\nfunction encode(data) {\n  const { script, value } = data;\n  const varintLen = varuint.encodingLength(script.length);\n  const result = Buffer.allocUnsafe(8 + varintLen + script.length);\n  tools_1.writeUInt64LE(result, value, 0);\n  varuint.encode(script.length, result, 8);\n  script.copy(result, 8 + varintLen);\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),\n    value: result,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ script: Buffer; value: number; }';\nfunction check(data) {\n  return Buffer.isBuffer(data.script) && typeof data.value === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.witnessUtxo === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst range = n => [...Array(n).keys()];\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode bip32Derivation with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if (\n      !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n      ![2, 3, 4].includes(keyVal.key[1])\n    ) {\n      throw new Error(\n        'Decode Error: bip32Derivation has invalid pubkey in key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if ((keyVal.value.length / 4) % 1 !== 0) {\n      throw new Error(\n        'Decode Error: Input BIP32_DERIVATION value length should be multiple of 4',\n      );\n    }\n    const pubkey = keyVal.key.slice(1);\n    const data = {\n      masterFingerprint: keyVal.value.slice(0, 4),\n      pubkey,\n      path: 'm',\n    };\n    for (const i of range(keyVal.value.length / 4 - 1)) {\n      const val = keyVal.value.readUInt32LE(i * 4 + 4);\n      const isHard = !!(val & 0x80000000);\n      const idx = val & 0x7fffffff;\n      data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n    }\n    return data;\n  }\n  function encode(data) {\n    const head = Buffer.from([TYPE_BYTE]);\n    const key = Buffer.concat([head, data.pubkey]);\n    const splitPath = data.path.split('/');\n    const value = Buffer.allocUnsafe(splitPath.length * 4);\n    data.masterFingerprint.copy(value, 0);\n    let offset = 4;\n    splitPath.slice(1).forEach(level => {\n      const isHard = level.slice(-1) === \"'\";\n      let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n      if (isHard) num += 0x80000000;\n      value.writeUInt32LE(num, offset);\n      offset += 4;\n    });\n    return {\n      key,\n      value,\n    };\n  }\n  const expected =\n    '{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }';\n  function check(data) {\n    return (\n      Buffer.isBuffer(data.pubkey) &&\n      Buffer.isBuffer(data.masterFingerprint) &&\n      typeof data.path === 'string' &&\n      [33, 65].includes(data.pubkey.length) &&\n      [2, 3, 4].includes(data.pubkey[0]) &&\n      data.masterFingerprint.length === 4\n    );\n  }\n  function canAddToArray(array, item, dupeSet) {\n    const dupeString = item.pubkey.toString('hex');\n    if (dupeSet.has(dupeString)) return false;\n    dupeSet.add(dupeString);\n    return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAddToArray,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeChecker(pubkeyTypes) {\n  return checkPubkey;\n  function checkPubkey(keyVal) {\n    let pubkey;\n    if (pubkeyTypes.includes(keyVal.key[0])) {\n      pubkey = keyVal.key.slice(1);\n      if (\n        !(pubkey.length === 33 || pubkey.length === 65) ||\n        ![2, 3, 4].includes(pubkey[0])\n      ) {\n        throw new Error(\n          'Format Error: invalid pubkey in key 0x' + keyVal.key.toString('hex'),\n        );\n      }\n    }\n    return pubkey;\n  }\n}\nexports.makeChecker = makeChecker;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode redeemScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return !!currentData && !!newData && currentData.redeemScript === undefined;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode witnessScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return (\n      !!currentData && !!newData && currentData.witnessScript === undefined\n    );\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nfunction psbtToBuffer({ globalMap, inputs, outputs }) {\n  const { globalKeyVals, inputKeyVals, outputKeyVals } = psbtToKeyVals({\n    globalMap,\n    inputs,\n    outputs,\n  });\n  const globalBuffer = tools_1.keyValsToBuffer(globalKeyVals);\n  const keyValsOrEmptyToBuffer = keyVals =>\n    keyVals.length === 0\n      ? [Buffer.from([0])]\n      : keyVals.map(tools_1.keyValsToBuffer);\n  const inputBuffers = keyValsOrEmptyToBuffer(inputKeyVals);\n  const outputBuffers = keyValsOrEmptyToBuffer(outputKeyVals);\n  const header = Buffer.allocUnsafe(5);\n  header.writeUIntBE(0x70736274ff, 0, 5);\n  return Buffer.concat(\n    [header, globalBuffer].concat(inputBuffers, outputBuffers),\n  );\n}\nexports.psbtToBuffer = psbtToBuffer;\nconst sortKeyVals = (a, b) => {\n  return a.key.compare(b.key);\n};\nfunction keyValsFromMap(keyValMap, converterFactory) {\n  const keyHexSet = new Set();\n  const keyVals = Object.entries(keyValMap).reduce((result, [key, value]) => {\n    if (key === 'unknownKeyVals') return result;\n    // We are checking for undefined anyways. So ignore TS error\n    // @ts-ignore\n    const converter = converterFactory[key];\n    if (converter === undefined) return result;\n    const encodedKeyVals = (Array.isArray(value) ? value : [value]).map(\n      converter.encode,\n    );\n    const keyHexes = encodedKeyVals.map(kv => kv.key.toString('hex'));\n    keyHexes.forEach(hex => {\n      if (keyHexSet.has(hex))\n        throw new Error('Serialize Error: Duplicate key: ' + hex);\n      keyHexSet.add(hex);\n    });\n    return result.concat(encodedKeyVals);\n  }, []);\n  // Get other keyVals that have not yet been gotten\n  const otherKeyVals = keyValMap.unknownKeyVals\n    ? keyValMap.unknownKeyVals.filter(keyVal => {\n        return !keyHexSet.has(keyVal.key.toString('hex'));\n      })\n    : [];\n  return keyVals.concat(otherKeyVals).sort(sortKeyVals);\n}\nfunction psbtToKeyVals({ globalMap, inputs, outputs }) {\n  // First parse the global keyVals\n  // Get any extra keyvals to pass along\n  return {\n    globalKeyVals: keyValsFromMap(globalMap, convert.globals),\n    inputKeyVals: inputs.map(i => keyValsFromMap(i, convert.inputs)),\n    outputKeyVals: outputs.map(o => keyValsFromMap(o, convert.outputs)),\n  };\n}\nexports.psbtToKeyVals = psbtToKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst baddress = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst classify = require('./classify');\nconst bcrypto = require('./crypto');\nconst ECPair = require('./ecpair');\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst SCRIPT_TYPES = classify.types;\nconst PREVOUT_TYPES = new Set([\n  // Raw\n  'p2pkh',\n  'p2pk',\n  'p2wpkh',\n  'p2ms',\n  // P2SH wrapped\n  'p2sh-p2pkh',\n  'p2sh-p2pk',\n  'p2sh-p2wpkh',\n  'p2sh-p2ms',\n  // P2WSH wrapped\n  'p2wsh-p2pkh',\n  'p2wsh-p2pk',\n  'p2wsh-p2ms',\n  // P2SH-P2WSH wrapper\n  'p2sh-p2wsh-p2pkh',\n  'p2sh-p2wsh-p2pk',\n  'p2sh-p2wsh-p2ms',\n]);\nfunction tfMessage(type, value, message) {\n  try {\n    typeforce(type, value);\n  } catch (err) {\n    throw new Error(message);\n  }\n}\nfunction txIsString(tx) {\n  return typeof tx === 'string' || tx instanceof String;\n}\nfunction txIsTransaction(tx) {\n  return tx instanceof transaction_1.Transaction;\n}\nclass TransactionBuilder {\n  // WARNING: maximumFeeRate is __NOT__ to be relied on,\n  //          it's just another potential safety mechanism (safety in-depth)\n  constructor(network = networks.bitcoin, maximumFeeRate = 2500) {\n    this.network = network;\n    this.maximumFeeRate = maximumFeeRate;\n    this.__PREV_TX_SET = {};\n    this.__INPUTS = [];\n    this.__TX = new transaction_1.Transaction();\n    this.__TX.version = 2;\n    this.__USE_LOW_R = false;\n    console.warn(\n      'Deprecation Warning: TransactionBuilder will be removed in the future. ' +\n        '(v6.x.x or later) Please use the Psbt class instead. Examples of usage ' +\n        'are available in the transactions-psbt.js integration test file on our ' +\n        'Github. A high level explanation is available in the psbt.ts and psbt.js ' +\n        'files as well.',\n    );\n  }\n  static fromTransaction(transaction, network) {\n    const txb = new TransactionBuilder(network);\n    // Copy transaction fields\n    txb.setVersion(transaction.version);\n    txb.setLockTime(transaction.locktime);\n    // Copy outputs (done first to avoid signature invalidation)\n    transaction.outs.forEach(txOut => {\n      txb.addOutput(txOut.script, txOut.value);\n    });\n    // Copy inputs\n    transaction.ins.forEach(txIn => {\n      txb.__addInputUnsafe(txIn.hash, txIn.index, {\n        sequence: txIn.sequence,\n        script: txIn.script,\n        witness: txIn.witness,\n      });\n    });\n    // fix some things not possible through the public API\n    txb.__INPUTS.forEach((input, i) => {\n      fixMultisigOrder(input, transaction, i);\n    });\n    return txb;\n  }\n  setLowR(setting) {\n    typeforce(typeforce.maybe(typeforce.Boolean), setting);\n    if (setting === undefined) {\n      setting = true;\n    }\n    this.__USE_LOW_R = setting;\n    return setting;\n  }\n  setLockTime(locktime) {\n    typeforce(types.UInt32, locktime);\n    // if any signatures exist, throw\n    if (\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(s => s !== undefined);\n      })\n    ) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    this.__TX.locktime = locktime;\n  }\n  setVersion(version) {\n    typeforce(types.UInt32, version);\n    // XXX: this might eventually become more complex depending on what the versions represent\n    this.__TX.version = version;\n  }\n  addInput(txHash, vout, sequence, prevOutScript) {\n    if (!this.__canModifyInputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    let value;\n    // is it a hex string?\n    if (txIsString(txHash)) {\n      // transaction hashs's are displayed in reverse order, un-reverse it\n      txHash = bufferutils_1.reverseBuffer(Buffer.from(txHash, 'hex'));\n      // is it a Transaction object?\n    } else if (txIsTransaction(txHash)) {\n      const txOut = txHash.outs[vout];\n      prevOutScript = txOut.script;\n      value = txOut.value;\n      txHash = txHash.getHash(false);\n    }\n    return this.__addInputUnsafe(txHash, vout, {\n      sequence,\n      prevOutScript,\n      value,\n    });\n  }\n  addOutput(scriptPubKey, value) {\n    if (!this.__canModifyOutputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    // Attempt to get a script if it's a base58 or bech32 address string\n    if (typeof scriptPubKey === 'string') {\n      scriptPubKey = baddress.toOutputScript(scriptPubKey, this.network);\n    }\n    return this.__TX.addOutput(scriptPubKey, value);\n  }\n  build() {\n    return this.__build(false);\n  }\n  buildIncomplete() {\n    return this.__build(true);\n  }\n  sign(\n    signParams,\n    keyPair,\n    redeemScript,\n    hashType,\n    witnessValue,\n    witnessScript,\n  ) {\n    trySign(\n      getSigningData(\n        this.network,\n        this.__INPUTS,\n        this.__needsOutputs.bind(this),\n        this.__TX,\n        signParams,\n        keyPair,\n        redeemScript,\n        hashType,\n        witnessValue,\n        witnessScript,\n        this.__USE_LOW_R,\n      ),\n    );\n  }\n  __addInputUnsafe(txHash, vout, options) {\n    if (transaction_1.Transaction.isCoinbaseHash(txHash)) {\n      throw new Error('coinbase inputs not supported');\n    }\n    const prevTxOut = txHash.toString('hex') + ':' + vout;\n    if (this.__PREV_TX_SET[prevTxOut] !== undefined)\n      throw new Error('Duplicate TxOut: ' + prevTxOut);\n    let input = {};\n    // derive what we can from the scriptSig\n    if (options.script !== undefined) {\n      input = expandInput(options.script, options.witness || []);\n    }\n    // if an input value was given, retain it\n    if (options.value !== undefined) {\n      input.value = options.value;\n    }\n    // derive what we can from the previous transactions output script\n    if (!input.prevOutScript && options.prevOutScript) {\n      let prevOutType;\n      if (!input.pubkeys && !input.signatures) {\n        const expanded = expandOutput(options.prevOutScript);\n        if (expanded.pubkeys) {\n          input.pubkeys = expanded.pubkeys;\n          input.signatures = expanded.signatures;\n        }\n        prevOutType = expanded.type;\n      }\n      input.prevOutScript = options.prevOutScript;\n      input.prevOutType = prevOutType || classify.output(options.prevOutScript);\n    }\n    const vin = this.__TX.addInput(\n      txHash,\n      vout,\n      options.sequence,\n      options.scriptSig,\n    );\n    this.__INPUTS[vin] = input;\n    this.__PREV_TX_SET[prevTxOut] = true;\n    return vin;\n  }\n  __build(allowIncomplete) {\n    if (!allowIncomplete) {\n      if (!this.__TX.ins.length) throw new Error('Transaction has no inputs');\n      if (!this.__TX.outs.length) throw new Error('Transaction has no outputs');\n    }\n    const tx = this.__TX.clone();\n    // create script signatures from inputs\n    this.__INPUTS.forEach((input, i) => {\n      if (!input.prevOutType && !allowIncomplete)\n        throw new Error('Transaction is not complete');\n      const result = build(input.prevOutType, input, allowIncomplete);\n      if (!result) {\n        if (!allowIncomplete && input.prevOutType === SCRIPT_TYPES.NONSTANDARD)\n          throw new Error('Unknown input type');\n        if (!allowIncomplete) throw new Error('Not enough information');\n        return;\n      }\n      tx.setInputScript(i, result.input);\n      tx.setWitness(i, result.witness);\n    });\n    if (!allowIncomplete) {\n      // do not rely on this, its merely a last resort\n      if (this.__overMaximumFees(tx.virtualSize())) {\n        throw new Error('Transaction has absurd fees');\n      }\n    }\n    return tx;\n  }\n  __canModifyInputs() {\n    return this.__INPUTS.every(input => {\n      if (!input.signatures) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        // if SIGHASH_ANYONECANPAY is set, signatures would not\n        // be invalidated by more inputs\n        return (\n          (hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY) !== 0\n        );\n      });\n    });\n  }\n  __needsOutputs(signingHashType) {\n    if (signingHashType === transaction_1.Transaction.SIGHASH_ALL) {\n      return this.__TX.outs.length === 0;\n    }\n    // if inputs are being signed with SIGHASH_NONE, we don't strictly need outputs\n    // .build() will fail, but .buildIncomplete() is OK\n    return (\n      this.__TX.outs.length === 0 &&\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(signature => {\n          if (!signature) return false; // no signature, no issue\n          const hashType = signatureHashType(signature);\n          if (hashType & transaction_1.Transaction.SIGHASH_NONE) return false; // SIGHASH_NONE doesn't care about outputs\n          return true; // SIGHASH_* does care\n        });\n      })\n    );\n  }\n  __canModifyOutputs() {\n    const nInputs = this.__TX.ins.length;\n    const nOutputs = this.__TX.outs.length;\n    return this.__INPUTS.every(input => {\n      if (input.signatures === undefined) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        const hashTypeMod = hashType & 0x1f;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_NONE) return true;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_SINGLE) {\n          // if SIGHASH_SINGLE is set, and nInputs > nOutputs\n          // some signatures would be invalidated by the addition\n          // of more outputs\n          return nInputs <= nOutputs;\n        }\n        return false;\n      });\n    });\n  }\n  __overMaximumFees(bytes) {\n    // not all inputs will have .value defined\n    const incoming = this.__INPUTS.reduce((a, x) => a + (x.value >>> 0), 0);\n    // but all outputs do, and if we have any input value\n    // we can immediately determine if the outputs are too small\n    const outgoing = this.__TX.outs.reduce((a, x) => a + x.value, 0);\n    const fee = incoming - outgoing;\n    const feeRate = fee / bytes;\n    return feeRate > this.maximumFeeRate;\n  }\n}\nexports.TransactionBuilder = TransactionBuilder;\nfunction expandInput(scriptSig, witnessStack, type, scriptPubKey) {\n  if (scriptSig.length === 0 && witnessStack.length === 0) return {};\n  if (!type) {\n    let ssType = classify.input(scriptSig, true);\n    let wsType = classify.witness(witnessStack, true);\n    if (ssType === SCRIPT_TYPES.NONSTANDARD) ssType = undefined;\n    if (wsType === SCRIPT_TYPES.NONSTANDARD) wsType = undefined;\n    type = ssType || wsType;\n  }\n  switch (type) {\n    case SCRIPT_TYPES.P2WPKH: {\n      const { output, pubkey, signature } = payments.p2wpkh({\n        witness: witnessStack,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2WPKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PKH: {\n      const { output, pubkey, signature } = payments.p2pkh({\n        input: scriptSig,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2PKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const { signature } = payments.p2pk({ input: scriptSig });\n      return {\n        prevOutType: SCRIPT_TYPES.P2PK,\n        pubkeys: [undefined],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const { m, pubkeys, signatures } = payments.p2ms(\n        {\n          input: scriptSig,\n          output: scriptPubKey,\n        },\n        { allowIncomplete: true },\n      );\n      return {\n        prevOutType: SCRIPT_TYPES.P2MS,\n        pubkeys,\n        signatures,\n        maxSignatures: m,\n      };\n    }\n  }\n  if (type === SCRIPT_TYPES.P2SH) {\n    const { output, redeem } = payments.p2sh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    const expanded = expandInput(\n      redeem.input,\n      redeem.witness,\n      outputType,\n      redeem.output,\n    );\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      redeemScript: redeem.output,\n      redeemScriptType: expanded.prevOutType,\n      witnessScript: expanded.witnessScript,\n      witnessScriptType: expanded.witnessScriptType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  if (type === SCRIPT_TYPES.P2WSH) {\n    const { output, redeem } = payments.p2wsh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    let expanded;\n    if (outputType === SCRIPT_TYPES.P2WPKH) {\n      expanded = expandInput(redeem.input, redeem.witness, outputType);\n    } else {\n      expanded = expandInput(\n        bscript.compile(redeem.witness),\n        [],\n        outputType,\n        redeem.output,\n      );\n    }\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      witnessScript: redeem.output,\n      witnessScriptType: expanded.prevOutType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  return {\n    prevOutType: SCRIPT_TYPES.NONSTANDARD,\n    prevOutScript: scriptSig,\n  };\n}\n// could be done in expandInput, but requires the original Transaction for hashForSignature\nfunction fixMultisigOrder(input, transaction, vin) {\n  if (input.redeemScriptType !== SCRIPT_TYPES.P2MS || !input.redeemScript)\n    return;\n  if (input.pubkeys.length === input.signatures.length) return;\n  const unmatched = input.signatures.concat();\n  input.signatures = input.pubkeys.map(pubKey => {\n    const keyPair = ECPair.fromPublicKey(pubKey);\n    let match;\n    // check for a signature\n    unmatched.some((signature, i) => {\n      // skip if undefined || OP_0\n      if (!signature) return false;\n      // TODO: avoid O(n) hashForSignature\n      const parsed = bscript.signature.decode(signature);\n      const hash = transaction.hashForSignature(\n        vin,\n        input.redeemScript,\n        parsed.hashType,\n      );\n      // skip if signature does not match pubKey\n      if (!keyPair.verify(hash, parsed.signature)) return false;\n      // remove matched signature from unmatched\n      unmatched[i] = undefined;\n      match = signature;\n      return true;\n    });\n    return match;\n  });\n}\nfunction expandOutput(script, ourPubKey) {\n  typeforce(types.Buffer, script);\n  const type = classify.output(script);\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const pkh1 = payments.p2pkh({ output: script }).hash;\n      const pkh2 = bcrypto.hash160(ourPubKey);\n      if (!pkh1.equals(pkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const wpkh1 = payments.p2wpkh({ output: script }).hash;\n      const wpkh2 = bcrypto.hash160(ourPubKey);\n      if (!wpkh1.equals(wpkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const p2pk = payments.p2pk({ output: script });\n      return {\n        type,\n        pubkeys: [p2pk.pubkey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const p2ms = payments.p2ms({ output: script });\n      return {\n        type,\n        pubkeys: p2ms.pubkeys,\n        signatures: p2ms.pubkeys.map(() => undefined),\n        maxSignatures: p2ms.m,\n      };\n    }\n  }\n  return { type };\n}\nfunction prepareInput(input, ourPubKey, redeemScript, witnessScript) {\n  if (redeemScript && witnessScript) {\n    const p2wsh = payments.p2wsh({\n      redeem: { output: witnessScript },\n    });\n    const p2wshAlt = payments.p2wsh({ output: redeemScript });\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    const p2shAlt = payments.p2sh({ redeem: p2wsh });\n    // enforces P2SH(P2WSH(...))\n    if (!p2wsh.hash.equals(p2wshAlt.hash))\n      throw new Error('Witness script inconsistent with prevOutScript');\n    if (!p2sh.hash.equals(p2shAlt.hash))\n      throw new Error('Redeem script inconsistent with prevOutScript');\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2SH(P2WSH(P2WPKH)) is a consensus failure');\n    return {\n      redeemScript,\n      redeemScriptType: SCRIPT_TYPES.P2WSH,\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (redeemScript) {\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    if (input.prevOutScript) {\n      let p2shAlt;\n      try {\n        p2shAlt = payments.p2sh({ output: input.prevOutScript });\n      } catch (e) {\n        throw new Error('PrevOutScript must be P2SH');\n      }\n      if (!p2sh.hash.equals(p2shAlt.hash))\n        throw new Error('Redeem script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2sh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as redeemScript (' +\n          bscript.toASM(redeemScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = redeemScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      redeemScript,\n      redeemScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (witnessScript) {\n    const p2wsh = payments.p2wsh({ redeem: { output: witnessScript } });\n    if (input.prevOutScript) {\n      const p2wshAlt = payments.p2wsh({ output: input.prevOutScript });\n      if (!p2wsh.hash.equals(p2wshAlt.hash))\n        throw new Error('Witness script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2WSH(P2WPKH) is a consensus failure');\n    return {\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      prevOutScript: p2wsh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (input.prevOutType && input.prevOutScript) {\n    // embedded scripts are not possible without extra information\n    if (input.prevOutType === SCRIPT_TYPES.P2SH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires redeemScript',\n      );\n    if (input.prevOutType === SCRIPT_TYPES.P2WSH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires witnessScript',\n      );\n    if (!input.prevOutScript) throw new Error('PrevOutScript is missing');\n    const expanded = expandOutput(input.prevOutScript, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported (' +\n          bscript.toASM(input.prevOutScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = input.prevOutScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      prevOutType: expanded.type,\n      prevOutScript: input.prevOutScript,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  const prevOutScript = payments.p2pkh({ pubkey: ourPubKey }).output;\n  return {\n    prevOutType: SCRIPT_TYPES.P2PKH,\n    prevOutScript,\n    hasWitness: false,\n    signScript: prevOutScript,\n    signType: SCRIPT_TYPES.P2PKH,\n    pubkeys: [ourPubKey],\n    signatures: [undefined],\n  };\n}\nfunction build(type, input, allowIncomplete) {\n  const pubkeys = input.pubkeys || [];\n  let signatures = input.signatures || [];\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2wpkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2PK: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pk({ signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const m = input.maxSignatures;\n      if (allowIncomplete) {\n        signatures = signatures.map(x => x || script_1.OPS.OP_0);\n      } else {\n        signatures = signatures.filter(x => x);\n      }\n      // if the transaction is not not complete (complete), or if signatures.length === m, validate\n      // otherwise, the number of OP_0's may be >= m, so don't validate (boo)\n      const validate = !allowIncomplete || m === signatures.length;\n      return payments.p2ms(\n        { m, pubkeys, signatures },\n        { allowIncomplete, validate },\n      );\n    }\n    case SCRIPT_TYPES.P2SH: {\n      const redeem = build(input.redeemScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2sh({\n        redeem: {\n          output: redeem.output || input.redeemScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n    case SCRIPT_TYPES.P2WSH: {\n      const redeem = build(input.witnessScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2wsh({\n        redeem: {\n          output: input.witnessScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n  }\n}\nfunction canSign(input) {\n  return (\n    input.signScript !== undefined &&\n    input.signType !== undefined &&\n    input.pubkeys !== undefined &&\n    input.signatures !== undefined &&\n    input.signatures.length === input.pubkeys.length &&\n    input.pubkeys.length > 0 &&\n    (input.hasWitness === false || input.value !== undefined)\n  );\n}\nfunction signatureHashType(buffer) {\n  return buffer.readUInt8(buffer.length - 1);\n}\nfunction checkSignArgs(inputs, signParams) {\n  if (!PREVOUT_TYPES.has(signParams.prevOutScriptType)) {\n    throw new TypeError(\n      `Unknown prevOutScriptType \"${signParams.prevOutScriptType}\"`,\n    );\n  }\n  tfMessage(\n    typeforce.Number,\n    signParams.vin,\n    `sign must include vin parameter as Number (input index)`,\n  );\n  tfMessage(\n    types.Signer,\n    signParams.keyPair,\n    `sign must include keyPair parameter as Signer interface`,\n  );\n  tfMessage(\n    typeforce.maybe(typeforce.Number),\n    signParams.hashType,\n    `sign hashType parameter must be a number`,\n  );\n  const prevOutType = (inputs[signParams.vin] || []).prevOutType;\n  const posType = signParams.prevOutScriptType;\n  switch (posType) {\n    case 'p2pkh':\n      if (prevOutType && prevOutType !== 'pubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2pk':\n      if (prevOutType && prevOutType !== 'pubkey') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pk: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wpkh':\n      if (prevOutType && prevOutType !== 'witnesspubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2ms':\n      if (prevOutType && prevOutType !== 'multisig') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2ms: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wpkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2sh-p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2ms':\n    case 'p2sh-p2pk':\n    case 'p2sh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wsh-p2ms':\n    case 'p2wsh-p2pk':\n    case 'p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'witnessscripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wsh-p2ms':\n    case 'p2sh-p2wsh-p2pk':\n    case 'p2sh-p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessScript`,\n      );\n      break;\n  }\n}\nfunction trySign({\n  input,\n  ourPubKey,\n  keyPair,\n  signatureHash,\n  hashType,\n  useLowR,\n}) {\n  // enforce in order signing of public keys\n  let signed = false;\n  for (const [i, pubKey] of input.pubkeys.entries()) {\n    if (!ourPubKey.equals(pubKey)) continue;\n    if (input.signatures[i]) throw new Error('Signature already exists');\n    // TODO: add tests\n    if (ourPubKey.length !== 33 && input.hasWitness) {\n      throw new Error(\n        'BIP143 rejects uncompressed public keys in P2WPKH or P2WSH',\n      );\n    }\n    const signature = keyPair.sign(signatureHash, useLowR);\n    input.signatures[i] = bscript.signature.encode(signature, hashType);\n    signed = true;\n  }\n  if (!signed) throw new Error('Key pair cannot sign for this input');\n}\nfunction getSigningData(\n  network,\n  inputs,\n  needsOutputs,\n  tx,\n  signParams,\n  keyPair,\n  redeemScript,\n  hashType,\n  witnessValue,\n  witnessScript,\n  useLowR,\n) {\n  let vin;\n  if (typeof signParams === 'number') {\n    console.warn(\n      'DEPRECATED: TransactionBuilder sign method arguments ' +\n        'will change in v6, please use the TxbSignArg interface',\n    );\n    vin = signParams;\n  } else if (typeof signParams === 'object') {\n    checkSignArgs(inputs, signParams);\n    ({\n      vin,\n      keyPair,\n      redeemScript,\n      hashType,\n      witnessValue,\n      witnessScript,\n    } = signParams);\n  } else {\n    throw new TypeError(\n      'TransactionBuilder sign first arg must be TxbSignArg or number',\n    );\n  }\n  if (keyPair === undefined) {\n    throw new Error('sign requires keypair');\n  }\n  // TODO: remove keyPair.network matching in 4.0.0\n  if (keyPair.network && keyPair.network !== network)\n    throw new TypeError('Inconsistent network');\n  if (!inputs[vin]) throw new Error('No input at index: ' + vin);\n  hashType = hashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (needsOutputs(hashType)) throw new Error('Transaction needs outputs');\n  const input = inputs[vin];\n  // if redeemScript was previously provided, enforce consistency\n  if (\n    input.redeemScript !== undefined &&\n    redeemScript &&\n    !input.redeemScript.equals(redeemScript)\n  ) {\n    throw new Error('Inconsistent redeemScript');\n  }\n  const ourPubKey =\n    keyPair.publicKey || (keyPair.getPublicKey && keyPair.getPublicKey());\n  if (!canSign(input)) {\n    if (witnessValue !== undefined) {\n      if (input.value !== undefined && input.value !== witnessValue)\n        throw new Error('Input did not match witnessValue');\n      typeforce(types.Satoshi, witnessValue);\n      input.value = witnessValue;\n    }\n    if (!canSign(input)) {\n      const prepared = prepareInput(\n        input,\n        ourPubKey,\n        redeemScript,\n        witnessScript,\n      );\n      // updates inline\n      Object.assign(input, prepared);\n    }\n    if (!canSign(input)) throw Error(input.prevOutType + ' not supported');\n  }\n  // ready to sign\n  let signatureHash;\n  if (input.hasWitness) {\n    signatureHash = tx.hashForWitnessV0(\n      vin,\n      input.signScript,\n      input.value,\n      hashType,\n    );\n  } else {\n    signatureHash = tx.hashForSignature(vin, input.signScript, hashType);\n  }\n  return {\n    input,\n    ourPubKey,\n    keyPair,\n    signatureHash,\n    hashType,\n    useLowR: !!useLowR,\n  };\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst script_1 = require('./script');\nconst multisig = require('./templates/multisig');\nconst nullData = require('./templates/nulldata');\nconst pubKey = require('./templates/pubkey');\nconst pubKeyHash = require('./templates/pubkeyhash');\nconst scriptHash = require('./templates/scripthash');\nconst witnessCommitment = require('./templates/witnesscommitment');\nconst witnessPubKeyHash = require('./templates/witnesspubkeyhash');\nconst witnessScriptHash = require('./templates/witnessscripthash');\nconst types = {\n  P2MS: 'multisig',\n  NONSTANDARD: 'nonstandard',\n  NULLDATA: 'nulldata',\n  P2PK: 'pubkey',\n  P2PKH: 'pubkeyhash',\n  P2SH: 'scripthash',\n  P2WPKH: 'witnesspubkeyhash',\n  P2WSH: 'witnessscripthash',\n  WITNESS_COMMITMENT: 'witnesscommitment',\n};\nexports.types = types;\nfunction classifyOutput(script) {\n  if (witnessPubKeyHash.output.check(script)) return types.P2WPKH;\n  if (witnessScriptHash.output.check(script)) return types.P2WSH;\n  if (pubKeyHash.output.check(script)) return types.P2PKH;\n  if (scriptHash.output.check(script)) return types.P2SH;\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (multisig.output.check(chunks)) return types.P2MS;\n  if (pubKey.output.check(chunks)) return types.P2PK;\n  if (witnessCommitment.output.check(chunks)) return types.WITNESS_COMMITMENT;\n  if (nullData.output.check(chunks)) return types.NULLDATA;\n  return types.NONSTANDARD;\n}\nexports.output = classifyOutput;\nfunction classifyInput(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (pubKeyHash.input.check(chunks)) return types.P2PKH;\n  if (scriptHash.input.check(chunks, allowIncomplete)) return types.P2SH;\n  if (multisig.input.check(chunks, allowIncomplete)) return types.P2MS;\n  if (pubKey.input.check(chunks)) return types.P2PK;\n  return types.NONSTANDARD;\n}\nexports.input = classifyInput;\nfunction classifyWitness(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (witnessPubKeyHash.input.check(chunks)) return types.P2WPKH;\n  if (witnessScriptHash.input.check(chunks, allowIncomplete))\n    return types.P2WSH;\n  return types.NONSTANDARD;\n}\nexports.witness = classifyWitness;\n","'use strict';\n// OP_0 [signatures ...]\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction partialSignature(value) {\n  return (\n    value === script_1.OPS.OP_0 || bscript.isCanonicalScriptSignature(value)\n  );\n}\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 2) return false;\n  if (chunks[0] !== script_1.OPS.OP_0) return false;\n  if (allowIncomplete) {\n    return chunks.slice(1).every(partialSignature);\n  }\n  return chunks.slice(1).every(bscript.isCanonicalScriptSignature);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multisig input';\n};\n","'use strict';\n// m [pubKeys ...] n OP_CHECKMULTISIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst OP_INT_BASE = script_1.OPS.OP_RESERVED; // OP_1 - 1\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 4) return false;\n  if (chunks[chunks.length - 1] !== script_1.OPS.OP_CHECKMULTISIG) return false;\n  if (!types.Number(chunks[0])) return false;\n  if (!types.Number(chunks[chunks.length - 2])) return false;\n  const m = chunks[0] - OP_INT_BASE;\n  const n = chunks[chunks.length - 2] - OP_INT_BASE;\n  if (m <= 0) return false;\n  if (n > 16) return false;\n  if (m > n) return false;\n  if (n !== chunks.length - 3) return false;\n  if (allowIncomplete) return true;\n  const keys = chunks.slice(1, -2);\n  return keys.every(bscript.isCanonicalPubKey);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multi-sig output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// OP_RETURN {data}\nconst bscript = require('../script');\nconst OPS = bscript.OPS;\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return buffer.length > 1 && buffer[0] === OPS.OP_RETURN;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'null data output';\n};\nconst output = { check };\nexports.output = output;\n","'use strict';\n// {signature}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return chunks.length === 1 && bscript.isCanonicalScriptSignature(chunks[0]);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey input';\n};\n","'use strict';\n// {pubKey} OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalPubKey(chunks[0]) &&\n    chunks[1] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey output';\n};\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    bscript.isCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash input';\n};\n","'use strict';\n// OP_DUP OP_HASH160 {pubKeyHash} OP_EQUALVERIFY OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 25 &&\n    buffer[0] === script_1.OPS.OP_DUP &&\n    buffer[1] === script_1.OPS.OP_HASH160 &&\n    buffer[2] === 0x14 &&\n    buffer[23] === script_1.OPS.OP_EQUALVERIFY &&\n    buffer[24] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nconst p2wpkho = require('../witnesspubkeyhash/output');\nconst p2wsho = require('../witnessscripthash/output');\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 1) return false;\n  const lastChunk = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(lastChunk)) return false;\n  const scriptSigChunks = bscript.decompile(\n    bscript.compile(chunks.slice(0, -1)),\n  );\n  const redeemScriptChunks = bscript.decompile(lastChunk);\n  // is redeemScript a valid script?\n  if (!redeemScriptChunks) return false;\n  // is redeemScriptSig push only?\n  if (!bscript.isPushOnly(scriptSigChunks)) return false;\n  // is witness?\n  if (chunks.length === 1) {\n    return (\n      p2wsho.check(redeemScriptChunks) || p2wpkho.check(redeemScriptChunks)\n    );\n  }\n  // match types\n  if (\n    p2pkh.input.check(scriptSigChunks) &&\n    p2pkh.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(scriptSigChunks, allowIncomplete) &&\n    p2ms.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(scriptSigChunks) &&\n    p2pk.output.check(redeemScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash input';\n};\n","'use strict';\n// OP_HASH160 {scriptHash} OP_EQUAL\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 23 &&\n    buffer[0] === script_1.OPS.OP_HASH160 &&\n    buffer[1] === 0x14 &&\n    buffer[22] === script_1.OPS.OP_EQUAL\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// OP_RETURN {aa21a9ed} {commitment}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst typeforce = require('typeforce');\nconst HEADER = Buffer.from('aa21a9ed', 'hex');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length > 37 &&\n    buffer[0] === script_1.OPS.OP_RETURN &&\n    buffer[1] === 0x24 &&\n    buffer.slice(2, 6).equals(HEADER)\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness commitment output';\n};\nfunction encode(commitment) {\n  typeforce(types.Hash256bit, commitment);\n  const buffer = Buffer.allocUnsafe(36);\n  HEADER.copy(buffer, 0);\n  commitment.copy(buffer, 4);\n  return bscript.compile([script_1.OPS.OP_RETURN, buffer]);\n}\nexports.encode = encode;\nfunction decode(buffer) {\n  typeforce(check, buffer);\n  return bscript.decompile(buffer)[1].slice(4, 36);\n}\nexports.decode = decode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction isCompressedCanonicalPubKey(pubKey) {\n  return bscript.isCanonicalPubKey(pubKey) && pubKey.length === 33;\n}\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    isCompressedCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessPubKeyHash input';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst typeforce = require('typeforce');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nfunction check(chunks, allowIncomplete) {\n  typeforce(typeforce.Array, chunks);\n  if (chunks.length < 1) return false;\n  const witnessScript = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(witnessScript)) return false;\n  const witnessScriptChunks = bscript.decompile(witnessScript);\n  // is witnessScript a valid script?\n  if (!witnessScriptChunks || witnessScriptChunks.length === 0) return false;\n  const witnessRawScriptSig = bscript.compile(chunks.slice(0, -1));\n  // match types\n  if (\n    p2pkh.input.check(witnessRawScriptSig) &&\n    p2pkh.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(witnessRawScriptSig, allowIncomplete) &&\n    p2ms.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(witnessRawScriptSig) &&\n    p2pk.output.check(witnessScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessScriptHash input';\n};\n","'use strict';\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar React = require('react');\n\nvar PropTypes = require('prop-types'); // qr.js doesn't handle error level of zero (M) so we need to do it right,\n// thus the deep require.\n\n\nvar QRCodeImpl = require('qr.js/lib/QRCode');\n\nvar ErrorCorrectLevel = require('qr.js/lib/ErrorCorrectLevel'); // TODO: pull this off of the QRCode class type so it matches.\n\n\n// Convert from UTF-16, forcing the use of byte-mode encoding in our QR Code.\n// This allows us to encode Hanji, Kanji, emoji, etc. Ideally we'd do more\n// detection and not resort to byte-mode if possible, but we're trading off\n// a smaller library for a smaller amount of data we can potentially encode.\n// Based on http://jonisalonen.com/2012/from-utf-16-to-utf-8-in-javascript/\nfunction convertStr(str) {\n  var out = '';\n\n  for (var i = 0; i < str.length; i++) {\n    var charcode = str.charCodeAt(i);\n\n    if (charcode < 0x0080) {\n      out += String.fromCharCode(charcode);\n    } else if (charcode < 0x0800) {\n      out += String.fromCharCode(0xc0 | charcode >> 6);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    } else if (charcode < 0xd800 || charcode >= 0xe000) {\n      out += String.fromCharCode(0xe0 | charcode >> 12);\n      out += String.fromCharCode(0x80 | charcode >> 6 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    } else {\n      // This is a surrogate pair, so we'll reconsitute the pieces and work\n      // from that\n      i++;\n      charcode = 0x10000 + ((charcode & 0x3ff) << 10 | str.charCodeAt(i) & 0x3ff);\n      out += String.fromCharCode(0xf0 | charcode >> 18);\n      out += String.fromCharCode(0x80 | charcode >> 12 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode >> 6 & 0x3f);\n      out += String.fromCharCode(0x80 | charcode & 0x3f);\n    }\n  }\n\n  return out;\n}\n\nvar DEFAULT_PROPS = {\n  size: 128,\n  level: 'L',\n  bgColor: '#FFFFFF',\n  fgColor: '#000000',\n  includeMargin: false\n};\nvar PROP_TYPES = process.env.NODE_ENV !== 'production' ? {\n  value: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  level: PropTypes.oneOf(['L', 'M', 'Q', 'H']),\n  bgColor: PropTypes.string,\n  fgColor: PropTypes.string,\n  includeMargin: PropTypes.bool,\n  imageSettings: PropTypes.shape({\n    src: PropTypes.string.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    excavate: PropTypes.bool,\n    x: PropTypes.number,\n    y: PropTypes.number\n  })\n} : {};\nvar MARGIN_SIZE = 4; // This is *very* rough estimate of max amount of QRCode allowed to be covered.\n// It is \"wrong\" in a lot of ways (area is a terrible way to estimate, it\n// really should be number of modules covered), but if for some reason we don't\n// get an explicit height or width, I'd rather default to something than throw.\n\nvar DEFAULT_IMG_SCALE = 0.1;\n\nfunction generatePath(modules) {\n  var margin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var ops = [];\n  modules.forEach(function (row, y) {\n    var start = null;\n    row.forEach(function (cell, x) {\n      if (!cell && start !== null) {\n        // M0 0h7v1H0z injects the space with the move and drops the comma,\n        // saving a char per operation\n        ops.push(\"M\".concat(start + margin, \" \").concat(y + margin, \"h\").concat(x - start, \"v1H\").concat(start + margin, \"z\"));\n        start = null;\n        return;\n      } // end of row, clean up or skip\n\n\n      if (x === row.length - 1) {\n        if (!cell) {\n          // We would have closed the op above already so this can only mean\n          // 2+ light modules in a row.\n          return;\n        }\n\n        if (start === null) {\n          // Just a single dark module.\n          ops.push(\"M\".concat(x + margin, \",\").concat(y + margin, \" h1v1H\").concat(x + margin, \"z\"));\n        } else {\n          // Otherwise finish the current line.\n          ops.push(\"M\".concat(start + margin, \",\").concat(y + margin, \" h\").concat(x + 1 - start, \"v1H\").concat(start + margin, \"z\"));\n        }\n\n        return;\n      }\n\n      if (cell && start === null) {\n        start = x;\n      }\n    });\n  });\n  return ops.join('');\n} // We could just do this in generatePath, except that we want to support\n// non-Path2D canvas, so we need to keep it an explicit step.\n\n\nfunction excavateModules(modules, excavation) {\n  return modules.slice().map(function (row, y) {\n    if (y < excavation.y || y >= excavation.y + excavation.h) {\n      return row;\n    }\n\n    return row.map(function (cell, x) {\n      if (x < excavation.x || x >= excavation.x + excavation.w) {\n        return cell;\n      }\n\n      return false;\n    });\n  });\n}\n\nfunction getImageSettings(props, cells) {\n  var imageSettings = props.imageSettings,\n      size = props.size,\n      includeMargin = props.includeMargin;\n\n  if (imageSettings == null) {\n    return null;\n  }\n\n  var margin = includeMargin ? MARGIN_SIZE : 0;\n  var numCells = cells.length + margin * 2;\n  var defaultSize = Math.floor(size * DEFAULT_IMG_SCALE);\n  var scale = numCells / size;\n  var w = (imageSettings.width || defaultSize) * scale;\n  var h = (imageSettings.height || defaultSize) * scale;\n  var x = imageSettings.x == null ? cells.length / 2 - w / 2 : imageSettings.x * scale;\n  var y = imageSettings.y == null ? cells.length / 2 - h / 2 : imageSettings.y * scale;\n  var excavation = null;\n\n  if (imageSettings.excavate) {\n    var floorX = Math.floor(x);\n    var floorY = Math.floor(y);\n    var ceilW = Math.ceil(w + x - floorX);\n    var ceilH = Math.ceil(h + y - floorY);\n    excavation = {\n      x: floorX,\n      y: floorY,\n      w: ceilW,\n      h: ceilH\n    };\n  }\n\n  return {\n    x: x,\n    y: y,\n    h: h,\n    w: w,\n    excavation: excavation\n  };\n} // For canvas we're going to switch our drawing mode based on whether or not\n// the environment supports Path2D. We only need the constructor to be\n// supported, but Edge doesn't actually support the path (string) type\n// argument. Luckily it also doesn't support the addPath() method. We can\n// treat that as the same thing.\n\n\nvar SUPPORTS_PATH2D = function () {\n  try {\n    new Path2D().addPath(new Path2D());\n  } catch (e) {\n    return false;\n  }\n\n  return true;\n}();\n\nvar QRCodeCanvas =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(QRCodeCanvas, _React$PureComponent);\n\n  function QRCodeCanvas() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, QRCodeCanvas);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(QRCodeCanvas)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_canvas\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_image\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      imgLoaded: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleImageLoad\", function () {\n      _this.setState({\n        imgLoaded: true\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(QRCodeCanvas, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this._image && this._image.complete) {\n        this.handleImageLoad();\n      }\n\n      this.update();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this$props$imageSett, _nextProps$imageSetti;\n\n      var currentSrc = (_this$props$imageSett = this.props.imageSettings) === null || _this$props$imageSett === void 0 ? void 0 : _this$props$imageSett.src;\n      var nextSrc = (_nextProps$imageSetti = nextProps.imageSettings) === null || _nextProps$imageSetti === void 0 ? void 0 : _nextProps$imageSetti.src;\n\n      if (currentSrc !== nextSrc) {\n        this.setState({\n          imgLoaded: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.update();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this$props = this.props,\n          value = _this$props.value,\n          size = _this$props.size,\n          level = _this$props.level,\n          bgColor = _this$props.bgColor,\n          fgColor = _this$props.fgColor,\n          includeMargin = _this$props.includeMargin,\n          imageSettings = _this$props.imageSettings; // We'll use type===-1 to force QRCode to automatically pick the best type\n\n      var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\n      qrcode.addData(convertStr(value));\n      qrcode.make();\n\n      if (this._canvas != null) {\n        var canvas = this._canvas;\n        var ctx = canvas.getContext('2d');\n\n        if (!ctx) {\n          return;\n        }\n\n        var cells = qrcode.modules;\n\n        if (cells === null) {\n          return;\n        }\n\n        var margin = includeMargin ? MARGIN_SIZE : 0;\n        var numCells = cells.length + margin * 2;\n        var calculatedImageSettings = getImageSettings(this.props, cells);\n\n        if (imageSettings != null && calculatedImageSettings != null) {\n          if (calculatedImageSettings.excavation != null) {\n            cells = excavateModules(cells, calculatedImageSettings.excavation);\n          }\n        } // We're going to scale this so that the number of drawable units\n        // matches the number of cells. This avoids rounding issues, but does\n        // result in some potentially unwanted single pixel issues between\n        // blocks, only in environments that don't support Path2D.\n\n\n        var pixelRatio = window.devicePixelRatio || 1;\n        canvas.height = canvas.width = size * pixelRatio;\n        var scale = size / numCells * pixelRatio;\n        ctx.scale(scale, scale); // Draw solid background, only paint dark modules.\n\n        ctx.fillStyle = bgColor;\n        ctx.fillRect(0, 0, numCells, numCells);\n        ctx.fillStyle = fgColor;\n\n        if (SUPPORTS_PATH2D) {\n          // $FlowFixMe: Path2D c'tor doesn't support args yet.\n          ctx.fill(new Path2D(generatePath(cells, margin)));\n        } else {\n          cells.forEach(function (row, rdx) {\n            row.forEach(function (cell, cdx) {\n              if (cell) {\n                ctx.fillRect(cdx + margin, rdx + margin, 1, 1);\n              }\n            });\n          });\n        }\n\n        if (this.state.imgLoaded && this._image && calculatedImageSettings != null) {\n          ctx.drawImage(this._image, calculatedImageSettings.x + margin, calculatedImageSettings.y + margin, calculatedImageSettings.w, calculatedImageSettings.h);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          value = _this$props2.value,\n          size = _this$props2.size,\n          level = _this$props2.level,\n          bgColor = _this$props2.bgColor,\n          fgColor = _this$props2.fgColor,\n          style = _this$props2.style,\n          includeMargin = _this$props2.includeMargin,\n          imageSettings = _this$props2.imageSettings,\n          otherProps = _objectWithoutProperties(_this$props2, [\"value\", \"size\", \"level\", \"bgColor\", \"fgColor\", \"style\", \"includeMargin\", \"imageSettings\"]);\n\n      var canvasStyle = _objectSpread({\n        height: size,\n        width: size\n      }, style);\n\n      var img = null;\n      var imgSrc = imageSettings && imageSettings.src;\n\n      if (imageSettings != null && imgSrc != null) {\n        img = React.createElement(\"img\", {\n          src: imgSrc,\n          style: {\n            display: 'none'\n          },\n          onLoad: this.handleImageLoad,\n          ref: function ref(_ref) {\n            return _this2._image = _ref;\n          }\n        });\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(\"canvas\", _extends({\n        style: canvasStyle,\n        height: size,\n        width: size,\n        ref: function ref(_ref2) {\n          return _this2._canvas = _ref2;\n        }\n      }, otherProps)), img);\n    }\n  }]);\n\n  return QRCodeCanvas;\n}(React.PureComponent);\n\n_defineProperty(QRCodeCanvas, \"defaultProps\", DEFAULT_PROPS);\n\nif (process.env.NODE_ENV !== 'production') {\n  QRCodeCanvas.propTypes = PROP_TYPES;\n}\n\nvar QRCodeSVG =\n/*#__PURE__*/\nfunction (_React$PureComponent2) {\n  _inherits(QRCodeSVG, _React$PureComponent2);\n\n  function QRCodeSVG() {\n    _classCallCheck(this, QRCodeSVG);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QRCodeSVG).apply(this, arguments));\n  }\n\n  _createClass(QRCodeSVG, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          value = _this$props3.value,\n          size = _this$props3.size,\n          level = _this$props3.level,\n          bgColor = _this$props3.bgColor,\n          fgColor = _this$props3.fgColor,\n          includeMargin = _this$props3.includeMargin,\n          imageSettings = _this$props3.imageSettings,\n          otherProps = _objectWithoutProperties(_this$props3, [\"value\", \"size\", \"level\", \"bgColor\", \"fgColor\", \"includeMargin\", \"imageSettings\"]); // We'll use type===-1 to force QRCode to automatically pick the best type\n\n\n      var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\n      qrcode.addData(convertStr(value));\n      qrcode.make();\n      var cells = qrcode.modules;\n\n      if (cells === null) {\n        return null;\n      }\n\n      var margin = includeMargin ? MARGIN_SIZE : 0;\n      var numCells = cells.length + margin * 2;\n      var calculatedImageSettings = getImageSettings(this.props, cells);\n      var image = null;\n\n      if (imageSettings != null && calculatedImageSettings != null) {\n        if (calculatedImageSettings.excavation != null) {\n          cells = excavateModules(cells, calculatedImageSettings.excavation);\n        }\n\n        image = React.createElement(\"image\", {\n          xlinkHref: imageSettings.src,\n          height: calculatedImageSettings.h,\n          width: calculatedImageSettings.w,\n          x: calculatedImageSettings.x + margin,\n          y: calculatedImageSettings.y + margin,\n          preserveAspectRatio: \"none\"\n        });\n      } // Drawing strategy: instead of a rect per module, we're going to create a\n      // single path for the dark modules and layer that on top of a light rect,\n      // for a total of 2 DOM nodes. We pay a bit more in string concat but that's\n      // way faster than DOM ops.\n      // For level 1, 441 nodes -> 2\n      // For level 40, 31329 -> 2\n\n\n      var fgPath = generatePath(cells, margin);\n      return React.createElement(\"svg\", _extends({\n        shapeRendering: \"crispEdges\",\n        height: size,\n        width: size,\n        viewBox: \"0 0 \".concat(numCells, \" \").concat(numCells)\n      }, otherProps), React.createElement(\"path\", {\n        fill: bgColor,\n        d: \"M0,0 h\".concat(numCells, \"v\").concat(numCells, \"H0z\")\n      }), React.createElement(\"path\", {\n        fill: fgColor,\n        d: fgPath\n      }), image);\n    }\n  }]);\n\n  return QRCodeSVG;\n}(React.PureComponent);\n\n_defineProperty(QRCodeSVG, \"defaultProps\", DEFAULT_PROPS);\n\nif (process.env.NODE_ENV !== 'production') {\n  QRCodeSVG.propTypes = PROP_TYPES;\n}\n\nvar QRCode = function QRCode(props) {\n  var renderAs = props.renderAs,\n      otherProps = _objectWithoutProperties(props, [\"renderAs\"]);\n\n  var Component = renderAs === 'svg' ? QRCodeSVG : QRCodeCanvas;\n  return React.createElement(Component, otherProps);\n};\n\nQRCode.defaultProps = _objectSpread({\n  renderAs: 'canvas'\n}, DEFAULT_PROPS);\nmodule.exports = QRCode;","var BitByte = require('./8BitByte');\nvar RSBlock = require('./RSBlock');\nvar BitBuffer = require('./BitBuffer');\nvar util = require('./util');\nvar Polynomial = require('./Polynomial');\n\nfunction QRCode(typeNumber, errorCorrectLevel) {\n\tthis.typeNumber = typeNumber;\n\tthis.errorCorrectLevel = errorCorrectLevel;\n\tthis.modules = null;\n\tthis.moduleCount = 0;\n\tthis.dataCache = null;\n\tthis.dataList = [];\n}\n\n// for client side minification\nvar proto = QRCode.prototype;\n\nproto.addData = function(data) {\n\tvar newData = new BitByte(data);\n\tthis.dataList.push(newData);\n\tthis.dataCache = null;\n};\n\nproto.isDark = function(row, col) {\n\tif (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n\t\tthrow new Error(row + \",\" + col);\n\t}\n\treturn this.modules[row][col];\n};\n\nproto.getModuleCount = function() {\n\treturn this.moduleCount;\n};\n\nproto.make = function() {\n\t// Calculate automatically typeNumber if provided is < 1\n\tif (this.typeNumber < 1 ){\n\t\tvar typeNumber = 1;\n\t\tfor (typeNumber = 1; typeNumber < 40; typeNumber++) {\n\t\t\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n\t\t\tvar buffer = new BitBuffer();\n\t\t\tvar totalDataCount = 0;\n\t\t\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\t\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < this.dataList.length; i++) {\n\t\t\t\tvar data = this.dataList[i];\n\t\t\t\tbuffer.put(data.mode, 4);\n\t\t\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\t\t\tdata.write(buffer);\n\t\t\t}\n\t\t\tif (buffer.getLengthInBits() <= totalDataCount * 8)\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.typeNumber = typeNumber;\n\t}\n\tthis.makeImpl(false, this.getBestMaskPattern() );\n};\n\nproto.makeImpl = function(test, maskPattern) {\n\t\n\tthis.moduleCount = this.typeNumber * 4 + 17;\n\tthis.modules = new Array(this.moduleCount);\n\t\n\tfor (var row = 0; row < this.moduleCount; row++) {\n\t\t\n\t\tthis.modules[row] = new Array(this.moduleCount);\n\t\t\n\t\tfor (var col = 0; col < this.moduleCount; col++) {\n\t\t\tthis.modules[row][col] = null;//(col + row) % 3;\n\t\t}\n\t}\n\n\tthis.setupPositionProbePattern(0, 0);\n\tthis.setupPositionProbePattern(this.moduleCount - 7, 0);\n\tthis.setupPositionProbePattern(0, this.moduleCount - 7);\n\tthis.setupPositionAdjustPattern();\n\tthis.setupTimingPattern();\n\tthis.setupTypeInfo(test, maskPattern);\n\t\n\tif (this.typeNumber >= 7) {\n\t\tthis.setupTypeNumber(test);\n\t}\n\n\tif (this.dataCache == null) {\n\t\tthis.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\n\t}\n\n\tthis.mapData(this.dataCache, maskPattern);\n};\n\nproto.setupPositionProbePattern = function(row, col)  {\n\t\n\tfor (var r = -1; r <= 7; r++) {\n\t\t\n\t\tif (row + r <= -1 || this.moduleCount <= row + r) continue;\n\t\t\n\t\tfor (var c = -1; c <= 7; c++) {\n\t\t\t\n\t\t\tif (col + c <= -1 || this.moduleCount <= col + c) continue;\n\t\t\t\n\t\t\tif ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n\t\t\t\t\t|| (0 <= c && c <= 6 && (r == 0 || r == 6) )\n\t\t\t\t\t|| (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t} else {\n\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t}\n\t\t}\t\t\n\t}\t\t\n};\n\nproto.getBestMaskPattern = function() {\n\n\tvar minLostPoint = 0;\n\tvar pattern = 0;\n\n\tfor (var i = 0; i < 8; i++) {\n\t\t\n\t\tthis.makeImpl(true, i);\n\n\t\tvar lostPoint = util.getLostPoint(this);\n\n\t\tif (i == 0 || minLostPoint >  lostPoint) {\n\t\t\tminLostPoint = lostPoint;\n\t\t\tpattern = i;\n\t\t}\n\t}\n\n\treturn pattern;\n};\n\nproto.createMovieClip = function(target_mc, instance_name, depth) {\n\n\tvar qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n\tvar cs = 1;\n\n\tthis.make();\n\n\tfor (var row = 0; row < this.modules.length; row++) {\n\t\t\n\t\tvar y = row * cs;\n\t\t\n\t\tfor (var col = 0; col < this.modules[row].length; col++) {\n\n\t\t\tvar x = col * cs;\n\t\t\tvar dark = this.modules[row][col];\n\t\t\n\t\t\tif (dark) {\n\t\t\t\tqr_mc.beginFill(0, 100);\n\t\t\t\tqr_mc.moveTo(x, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y + cs);\n\t\t\t\tqr_mc.lineTo(x, y + cs);\n\t\t\t\tqr_mc.endFill();\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn qr_mc;\n};\n\nproto.setupTimingPattern = function() {\n\t\n\tfor (var r = 8; r < this.moduleCount - 8; r++) {\n\t\tif (this.modules[r][6] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[r][6] = (r % 2 == 0);\n\t}\n\n\tfor (var c = 8; c < this.moduleCount - 8; c++) {\n\t\tif (this.modules[6][c] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[6][c] = (c % 2 == 0);\n\t}\n};\n\nproto.setupPositionAdjustPattern = function() {\n\n\tvar pos = util.getPatternPosition(this.typeNumber);\n\t\n\tfor (var i = 0; i < pos.length; i++) {\n\t\n\t\tfor (var j = 0; j < pos.length; j++) {\n\t\t\n\t\t\tvar row = pos[i];\n\t\t\tvar col = pos[j];\n\t\t\t\n\t\t\tif (this.modules[row][col] != null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tfor (var r = -2; r <= 2; r++) {\n\t\t\t\n\t\t\t\tfor (var c = -2; c <= 2; c++) {\n\t\t\t\t\n\t\t\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2\n\t\t\t\t\t\t\t|| (r == 0 && c == 0) ) {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nproto.setupTypeNumber = function(test) {\n\n\tvar bits = util.getBCHTypeNumber(this.typeNumber);\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\n\t}\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n\t}\n};\n\nproto.setupTypeInfo = function(test, maskPattern) {\n\n\tvar data = (this.errorCorrectLevel << 3) | maskPattern;\n\tvar bits = util.getBCHTypeInfo(data);\n\n\t// vertical\t\t\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\n\t\tif (i < 6) {\n\t\t\tthis.modules[i][8] = mod;\n\t\t} else if (i < 8) {\n\t\t\tthis.modules[i + 1][8] = mod;\n\t\t} else {\n\t\t\tthis.modules[this.moduleCount - 15 + i][8] = mod;\n\t\t}\n\t}\n\n\t// horizontal\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\t\n\t\tif (i < 8) {\n\t\t\tthis.modules[8][this.moduleCount - i - 1] = mod;\n\t\t} else if (i < 9) {\n\t\t\tthis.modules[8][15 - i - 1 + 1] = mod;\n\t\t} else {\n\t\t\tthis.modules[8][15 - i - 1] = mod;\n\t\t}\n\t}\n\n\t// fixed module\n\tthis.modules[this.moduleCount - 8][8] = (!test);\n};\n\nproto.mapData = function(data, maskPattern) {\n\t\n\tvar inc = -1;\n\tvar row = this.moduleCount - 1;\n\tvar bitIndex = 7;\n\tvar byteIndex = 0;\n\t\n\tfor (var col = this.moduleCount - 1; col > 0; col -= 2) {\n\n\t\tif (col == 6) col--;\n\n\t\twhile (true) {\n\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\t\n\t\t\t\tif (this.modules[row][col - c] == null) {\n\t\t\t\t\t\n\t\t\t\t\tvar dark = false;\n\n\t\t\t\t\tif (byteIndex < data.length) {\n\t\t\t\t\t\tdark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar mask = util.getMask(maskPattern, row, col - c);\n\n\t\t\t\t\tif (mask) {\n\t\t\t\t\t\tdark = !dark;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.modules[row][col - c] = dark;\n\t\t\t\t\tbitIndex--;\n\n\t\t\t\t\tif (bitIndex == -1) {\n\t\t\t\t\t\tbyteIndex++;\n\t\t\t\t\t\tbitIndex = 7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\trow += inc;\n\n\t\t\tif (row < 0 || this.moduleCount <= row) {\n\t\t\t\trow -= inc;\n\t\t\t\tinc = -inc;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nQRCode.PAD0 = 0xEC;\nQRCode.PAD1 = 0x11;\n\nQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\n\t\n\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n\t\n\tvar buffer = new BitBuffer();\n\t\n\tfor (var i = 0; i < dataList.length; i++) {\n\t\tvar data = dataList[i];\n\t\tbuffer.put(data.mode, 4);\n\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\tdata.write(buffer);\n\t}\n\n\t// calc num max data.\n\tvar totalDataCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t}\n\n\tif (buffer.getLengthInBits() > totalDataCount * 8) {\n\t\tthrow new Error(\"code length overflow. (\"\n\t\t\t+ buffer.getLengthInBits()\n\t\t\t+ \">\"\n\t\t\t+  totalDataCount * 8\n\t\t\t+ \")\");\n\t}\n\n\t// end code\n\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n\t\tbuffer.put(0, 4);\n\t}\n\n\t// padding\n\twhile (buffer.getLengthInBits() % 8 != 0) {\n\t\tbuffer.putBit(false);\n\t}\n\n\t// padding\n\twhile (true) {\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD0, 8);\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD1, 8);\n\t}\n\n\treturn QRCode.createBytes(buffer, rsBlocks);\n};\n\nQRCode.createBytes = function(buffer, rsBlocks) {\n\n\tvar offset = 0;\n\t\n\tvar maxDcCount = 0;\n\tvar maxEcCount = 0;\n\t\n\tvar dcdata = new Array(rsBlocks.length);\n\tvar ecdata = new Array(rsBlocks.length);\n\t\n\tfor (var r = 0; r < rsBlocks.length; r++) {\n\n\t\tvar dcCount = rsBlocks[r].dataCount;\n\t\tvar ecCount = rsBlocks[r].totalCount - dcCount;\n\n\t\tmaxDcCount = Math.max(maxDcCount, dcCount);\n\t\tmaxEcCount = Math.max(maxEcCount, ecCount);\n\t\t\n\t\tdcdata[r] = new Array(dcCount);\n\t\t\n\t\tfor (var i = 0; i < dcdata[r].length; i++) {\n\t\t\tdcdata[r][i] = 0xff & buffer.buffer[i + offset];\n\t\t}\n\t\toffset += dcCount;\n\t\t\n\t\tvar rsPoly = util.getErrorCorrectPolynomial(ecCount);\n\t\tvar rawPoly = new Polynomial(dcdata[r], rsPoly.getLength() - 1);\n\n\t\tvar modPoly = rawPoly.mod(rsPoly);\n\t\tecdata[r] = new Array(rsPoly.getLength() - 1);\n\t\tfor (var i = 0; i < ecdata[r].length; i++) {\n            var modIndex = i + modPoly.getLength() - ecdata[r].length;\n\t\t\tecdata[r][i] = (modIndex >= 0)? modPoly.get(modIndex) : 0;\n\t\t}\n\n\t}\n\t\n\tvar totalCodeCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalCodeCount += rsBlocks[i].totalCount;\n\t}\n\n\tvar data = new Array(totalCodeCount);\n\tvar index = 0;\n\n\tfor (var i = 0; i < maxDcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < dcdata[r].length) {\n\t\t\t\tdata[index++] = dcdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var i = 0; i < maxEcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < ecdata[r].length) {\n\t\t\t\tdata[index++] = ecdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn data;\n};\n\nmodule.exports = QRCode;\n\n","var mode = require('./mode');\n\nfunction QR8bitByte(data) {\n\tthis.mode = mode.MODE_8BIT_BYTE;\n\tthis.data = data;\n}\n\nQR8bitByte.prototype = {\n\n\tgetLength : function(buffer) {\n\t\treturn this.data.length;\n\t},\n\t\n\twrite : function(buffer) {\n\t\tfor (var i = 0; i < this.data.length; i++) {\n\t\t\t// not JIS ...\n\t\t\tbuffer.put(this.data.charCodeAt(i), 8);\n\t\t}\n\t}\n};\n\nmodule.exports = QR8bitByte;\n\n","// ErrorCorrectLevel\nvar ECL = require('./ErrorCorrectLevel');\n\nfunction QRRSBlock(totalCount, dataCount) {\n\tthis.totalCount = totalCount;\n\tthis.dataCount  = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n\n\t// L\n\t// M\n\t// Q\n\t// H\n\n\t// 1\n\t[1, 26, 19],\n\t[1, 26, 16],\n\t[1, 26, 13],\n\t[1, 26, 9],\n\t\n\t// 2\n\t[1, 44, 34],\n\t[1, 44, 28],\n\t[1, 44, 22],\n\t[1, 44, 16],\n\n\t// 3\n\t[1, 70, 55],\n\t[1, 70, 44],\n\t[2, 35, 17],\n\t[2, 35, 13],\n\n\t// 4\t\t\n\t[1, 100, 80],\n\t[2, 50, 32],\n\t[2, 50, 24],\n\t[4, 25, 9],\n\t\n\t// 5\n\t[1, 134, 108],\n\t[2, 67, 43],\n\t[2, 33, 15, 2, 34, 16],\n\t[2, 33, 11, 2, 34, 12],\n\t\n\t// 6\n\t[2, 86, 68],\n\t[4, 43, 27],\n\t[4, 43, 19],\n\t[4, 43, 15],\n\t\n\t// 7\t\t\n\t[2, 98, 78],\n\t[4, 49, 31],\n\t[2, 32, 14, 4, 33, 15],\n\t[4, 39, 13, 1, 40, 14],\n\t\n\t// 8\n\t[2, 121, 97],\n\t[2, 60, 38, 2, 61, 39],\n\t[4, 40, 18, 2, 41, 19],\n\t[4, 40, 14, 2, 41, 15],\n\t\n\t// 9\n\t[2, 146, 116],\n\t[3, 58, 36, 2, 59, 37],\n\t[4, 36, 16, 4, 37, 17],\n\t[4, 36, 12, 4, 37, 13],\n\t\n\t// 10\t\t\n\t[2, 86, 68, 2, 87, 69],\n\t[4, 69, 43, 1, 70, 44],\n\t[6, 43, 19, 2, 44, 20],\n\t[6, 43, 15, 2, 44, 16],\n\n\t// 11\n\t[4, 101, 81],\n\t[1, 80, 50, 4, 81, 51],\n\t[4, 50, 22, 4, 51, 23],\n\t[3, 36, 12, 8, 37, 13],\n\n\t// 12\n\t[2, 116, 92, 2, 117, 93],\n\t[6, 58, 36, 2, 59, 37],\n\t[4, 46, 20, 6, 47, 21],\n\t[7, 42, 14, 4, 43, 15],\n\n\t// 13\n\t[4, 133, 107],\n\t[8, 59, 37, 1, 60, 38],\n\t[8, 44, 20, 4, 45, 21],\n\t[12, 33, 11, 4, 34, 12],\n\n\t// 14\n\t[3, 145, 115, 1, 146, 116],\n\t[4, 64, 40, 5, 65, 41],\n\t[11, 36, 16, 5, 37, 17],\n\t[11, 36, 12, 5, 37, 13],\n\n\t// 15\n\t[5, 109, 87, 1, 110, 88],\n\t[5, 65, 41, 5, 66, 42],\n\t[5, 54, 24, 7, 55, 25],\n\t[11, 36, 12],\n\n\t// 16\n\t[5, 122, 98, 1, 123, 99],\n\t[7, 73, 45, 3, 74, 46],\n\t[15, 43, 19, 2, 44, 20],\n\t[3, 45, 15, 13, 46, 16],\n\n\t// 17\n\t[1, 135, 107, 5, 136, 108],\n\t[10, 74, 46, 1, 75, 47],\n\t[1, 50, 22, 15, 51, 23],\n\t[2, 42, 14, 17, 43, 15],\n\n\t// 18\n\t[5, 150, 120, 1, 151, 121],\n\t[9, 69, 43, 4, 70, 44],\n\t[17, 50, 22, 1, 51, 23],\n\t[2, 42, 14, 19, 43, 15],\n\n\t// 19\n\t[3, 141, 113, 4, 142, 114],\n\t[3, 70, 44, 11, 71, 45],\n\t[17, 47, 21, 4, 48, 22],\n\t[9, 39, 13, 16, 40, 14],\n\n\t// 20\n\t[3, 135, 107, 5, 136, 108],\n\t[3, 67, 41, 13, 68, 42],\n\t[15, 54, 24, 5, 55, 25],\n\t[15, 43, 15, 10, 44, 16],\n\n\t// 21\n\t[4, 144, 116, 4, 145, 117],\n\t[17, 68, 42],\n\t[17, 50, 22, 6, 51, 23],\n\t[19, 46, 16, 6, 47, 17],\n\n\t// 22\n\t[2, 139, 111, 7, 140, 112],\n\t[17, 74, 46],\n\t[7, 54, 24, 16, 55, 25],\n\t[34, 37, 13],\n\n\t// 23\n\t[4, 151, 121, 5, 152, 122],\n\t[4, 75, 47, 14, 76, 48],\n\t[11, 54, 24, 14, 55, 25],\n\t[16, 45, 15, 14, 46, 16],\n\n\t// 24\n\t[6, 147, 117, 4, 148, 118],\n\t[6, 73, 45, 14, 74, 46],\n\t[11, 54, 24, 16, 55, 25],\n\t[30, 46, 16, 2, 47, 17],\n\n\t// 25\n\t[8, 132, 106, 4, 133, 107],\n\t[8, 75, 47, 13, 76, 48],\n\t[7, 54, 24, 22, 55, 25],\n\t[22, 45, 15, 13, 46, 16],\n\n\t// 26\n\t[10, 142, 114, 2, 143, 115],\n\t[19, 74, 46, 4, 75, 47],\n\t[28, 50, 22, 6, 51, 23],\n\t[33, 46, 16, 4, 47, 17],\n\n\t// 27\n\t[8, 152, 122, 4, 153, 123],\n\t[22, 73, 45, 3, 74, 46],\n\t[8, 53, 23, 26, 54, 24],\n\t[12, 45, 15, 28, 46, 16],\n\n\t// 28\n\t[3, 147, 117, 10, 148, 118],\n\t[3, 73, 45, 23, 74, 46],\n\t[4, 54, 24, 31, 55, 25],\n\t[11, 45, 15, 31, 46, 16],\n\n\t// 29\n\t[7, 146, 116, 7, 147, 117],\n\t[21, 73, 45, 7, 74, 46],\n\t[1, 53, 23, 37, 54, 24],\n\t[19, 45, 15, 26, 46, 16],\n\n\t// 30\n\t[5, 145, 115, 10, 146, 116],\n\t[19, 75, 47, 10, 76, 48],\n\t[15, 54, 24, 25, 55, 25],\n\t[23, 45, 15, 25, 46, 16],\n\n\t// 31\n\t[13, 145, 115, 3, 146, 116],\n\t[2, 74, 46, 29, 75, 47],\n\t[42, 54, 24, 1, 55, 25],\n\t[23, 45, 15, 28, 46, 16],\n\n\t// 32\n\t[17, 145, 115],\n\t[10, 74, 46, 23, 75, 47],\n\t[10, 54, 24, 35, 55, 25],\n\t[19, 45, 15, 35, 46, 16],\n\n\t// 33\n\t[17, 145, 115, 1, 146, 116],\n\t[14, 74, 46, 21, 75, 47],\n\t[29, 54, 24, 19, 55, 25],\n\t[11, 45, 15, 46, 46, 16],\n\n\t// 34\n\t[13, 145, 115, 6, 146, 116],\n\t[14, 74, 46, 23, 75, 47],\n\t[44, 54, 24, 7, 55, 25],\n\t[59, 46, 16, 1, 47, 17],\n\n\t// 35\n\t[12, 151, 121, 7, 152, 122],\n\t[12, 75, 47, 26, 76, 48],\n\t[39, 54, 24, 14, 55, 25],\n\t[22, 45, 15, 41, 46, 16],\n\n\t// 36\n\t[6, 151, 121, 14, 152, 122],\n\t[6, 75, 47, 34, 76, 48],\n\t[46, 54, 24, 10, 55, 25],\n\t[2, 45, 15, 64, 46, 16],\n\n\t// 37\n\t[17, 152, 122, 4, 153, 123],\n\t[29, 74, 46, 14, 75, 47],\n\t[49, 54, 24, 10, 55, 25],\n\t[24, 45, 15, 46, 46, 16],\n\n\t// 38\n\t[4, 152, 122, 18, 153, 123],\n\t[13, 74, 46, 32, 75, 47],\n\t[48, 54, 24, 14, 55, 25],\n\t[42, 45, 15, 32, 46, 16],\n\n\t// 39\n\t[20, 147, 117, 4, 148, 118],\n\t[40, 75, 47, 7, 76, 48],\n\t[43, 54, 24, 22, 55, 25],\n\t[10, 45, 15, 67, 46, 16],\n\n\t// 40\n\t[19, 148, 118, 6, 149, 119],\n\t[18, 75, 47, 31, 76, 48],\n\t[34, 54, 24, 34, 55, 25],\n\t[20, 45, 15, 61, 46, 16]\n];\n\nQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n\t\n\tvar rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n\t\n\tif (rsBlock == undefined) {\n\t\tthrow new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\n\t}\n\n\tvar length = rsBlock.length / 3;\n\t\n\tvar list = new Array();\n\t\n\tfor (var i = 0; i < length; i++) {\n\n\t\tvar count = rsBlock[i * 3 + 0];\n\t\tvar totalCount = rsBlock[i * 3 + 1];\n\t\tvar dataCount  = rsBlock[i * 3 + 2];\n\n\t\tfor (var j = 0; j < count; j++) {\n\t\t\tlist.push(new QRRSBlock(totalCount, dataCount) );\t\n\t\t}\n\t}\n\t\n\treturn list;\n}\n\nQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n\n\tswitch(errorCorrectLevel) {\n\tcase ECL.L :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n\tcase ECL.M :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n\tcase ECL.Q :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n\tcase ECL.H :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n\tdefault :\n\t\treturn undefined;\n\t}\n}\n\nmodule.exports = QRRSBlock;\n","function QRBitBuffer() {\n\tthis.buffer = new Array();\n\tthis.length = 0;\n}\n\nQRBitBuffer.prototype = {\n\n\tget : function(index) {\n\t\tvar bufIndex = Math.floor(index / 8);\n\t\treturn ( (this.buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n\t},\n\t\n\tput : function(num, length) {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tthis.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n\t\t}\n\t},\n\t\n\tgetLengthInBits : function() {\n\t\treturn this.length;\n\t},\n\t\n\tputBit : function(bit) {\n\t\n\t\tvar bufIndex = Math.floor(this.length / 8);\n\t\tif (this.buffer.length <= bufIndex) {\n\t\t\tthis.buffer.push(0);\n\t\t}\n\t\n\t\tif (bit) {\n\t\t\tthis.buffer[bufIndex] |= (0x80 >>> (this.length % 8) );\n\t\t}\n\t\n\t\tthis.length++;\n\t}\n};\n\nmodule.exports = QRBitBuffer;\n","var Mode = require('./mode');\nvar Polynomial = require('./Polynomial');\nvar math = require('./math');\n\nvar QRMaskPattern = {\n\tPATTERN000 : 0,\n\tPATTERN001 : 1,\n\tPATTERN010 : 2,\n\tPATTERN011 : 3,\n\tPATTERN100 : 4,\n\tPATTERN101 : 5,\n\tPATTERN110 : 6,\n\tPATTERN111 : 7\n};\n\nvar QRUtil = {\n\n    PATTERN_POSITION_TABLE : [\n\t    [],\n\t    [6, 18],\n\t    [6, 22],\n\t    [6, 26],\n\t    [6, 30],\n\t    [6, 34],\n\t    [6, 22, 38],\n\t    [6, 24, 42],\n\t    [6, 26, 46],\n\t    [6, 28, 50],\n\t    [6, 30, 54],\t\t\n\t    [6, 32, 58],\n\t    [6, 34, 62],\n\t    [6, 26, 46, 66],\n\t    [6, 26, 48, 70],\n\t    [6, 26, 50, 74],\n\t    [6, 30, 54, 78],\n\t    [6, 30, 56, 82],\n\t    [6, 30, 58, 86],\n\t    [6, 34, 62, 90],\n\t    [6, 28, 50, 72, 94],\n\t    [6, 26, 50, 74, 98],\n\t    [6, 30, 54, 78, 102],\n\t    [6, 28, 54, 80, 106],\n\t    [6, 32, 58, 84, 110],\n\t    [6, 30, 58, 86, 114],\n\t    [6, 34, 62, 90, 118],\n\t    [6, 26, 50, 74, 98, 122],\n\t    [6, 30, 54, 78, 102, 126],\n\t    [6, 26, 52, 78, 104, 130],\n\t    [6, 30, 56, 82, 108, 134],\n\t    [6, 34, 60, 86, 112, 138],\n\t    [6, 30, 58, 86, 114, 142],\n\t    [6, 34, 62, 90, 118, 146],\n\t    [6, 30, 54, 78, 102, 126, 150],\n\t    [6, 24, 50, 76, 102, 128, 154],\n\t    [6, 28, 54, 80, 106, 132, 158],\n\t    [6, 32, 58, 84, 110, 136, 162],\n\t    [6, 26, 54, 82, 110, 138, 166],\n\t    [6, 30, 58, 86, 114, 142, 170]\n    ],\n\n    G15 : (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n    G18 : (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n    G15_MASK : (1 << 14) | (1 << 12) | (1 << 10)\t| (1 << 4) | (1 << 1),\n\n    getBCHTypeInfo : function(data) {\n\t    var d = data << 10;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n\t\t    d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) ) ); \t\n\t    }\n\t    return ( (data << 10) | d) ^ QRUtil.G15_MASK;\n    },\n\n    getBCHTypeNumber : function(data) {\n\t    var d = data << 12;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n\t\t    d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) ) ); \t\n\t    }\n\t    return (data << 12) | d;\n    },\n\n    getBCHDigit : function(data) {\n\n\t    var digit = 0;\n\n\t    while (data != 0) {\n\t\t    digit++;\n\t\t    data >>>= 1;\n\t    }\n\n\t    return digit;\n    },\n\n    getPatternPosition : function(typeNumber) {\n\t    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n    },\n\n    getMask : function(maskPattern, i, j) {\n\t    \n\t    switch (maskPattern) {\n\t\t    \n\t    case QRMaskPattern.PATTERN000 : return (i + j) % 2 == 0;\n\t    case QRMaskPattern.PATTERN001 : return i % 2 == 0;\n\t    case QRMaskPattern.PATTERN010 : return j % 3 == 0;\n\t    case QRMaskPattern.PATTERN011 : return (i + j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN100 : return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0;\n\t    case QRMaskPattern.PATTERN101 : return (i * j) % 2 + (i * j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN110 : return ( (i * j) % 2 + (i * j) % 3) % 2 == 0;\n\t    case QRMaskPattern.PATTERN111 : return ( (i * j) % 3 + (i + j) % 2) % 2 == 0;\n\n\t    default :\n\t\t    throw new Error(\"bad maskPattern:\" + maskPattern);\n\t    }\n    },\n\n    getErrorCorrectPolynomial : function(errorCorrectLength) {\n\n\t    var a = new Polynomial([1], 0);\n\n\t    for (var i = 0; i < errorCorrectLength; i++) {\n\t\t    a = a.multiply(new Polynomial([1, math.gexp(i)], 0) );\n\t    }\n\n\t    return a;\n    },\n\n    getLengthInBits : function(mode, type) {\n\n\t    if (1 <= type && type < 10) {\n\n\t\t    // 1 - 9\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 10;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 9;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 8;\n\t\t    case Mode.MODE_KANJI  \t: return 8;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 27) {\n\n\t\t    // 10 - 26\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 12;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 11;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 10;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 41) {\n\n\t\t    // 27 - 40\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 14;\n\t\t    case Mode.MODE_ALPHA_NUM\t: return 13;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 12;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else {\n\t\t    throw new Error(\"type:\" + type);\n\t    }\n    },\n\n    getLostPoint : function(qrCode) {\n\t    \n\t    var moduleCount = qrCode.getModuleCount();\n\t    \n\t    var lostPoint = 0;\n\t    \n\t    // LEVEL1\n\t    \n\t    for (var row = 0; row < moduleCount; row++) {\n\n\t\t    for (var col = 0; col < moduleCount; col++) {\n\n\t\t\t    var sameCount = 0;\n\t\t\t    var dark = qrCode.isDark(row, col);\n\n\t\t\t\tfor (var r = -1; r <= 1; r++) {\n\n\t\t\t\t    if (row + r < 0 || moduleCount <= row + r) {\n\t\t\t\t\t    continue;\n\t\t\t\t    }\n\n\t\t\t\t    for (var c = -1; c <= 1; c++) {\n\n\t\t\t\t\t    if (col + c < 0 || moduleCount <= col + c) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (r == 0 && c == 0) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (dark == qrCode.isDark(row + r, col + c) ) {\n\t\t\t\t\t\t    sameCount++;\n\t\t\t\t\t    }\n\t\t\t\t    }\n\t\t\t    }\n\n\t\t\t    if (sameCount > 5) {\n\t\t\t\t    lostPoint += (3 + sameCount - 5);\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL2\n\n\t    for (var row = 0; row < moduleCount - 1; row++) {\n\t\t    for (var col = 0; col < moduleCount - 1; col++) {\n\t\t\t    var count = 0;\n\t\t\t    if (qrCode.isDark(row,     col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row,     col + 1) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col + 1) ) count++;\n\t\t\t    if (count == 0 || count == 4) {\n\t\t\t\t    lostPoint += 3;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL3\n\n\t    for (var row = 0; row < moduleCount; row++) {\n\t\t    for (var col = 0; col < moduleCount - 6; col++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 1)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 2)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 3)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 4)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 5)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 6) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount - 6; row++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 1, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 2, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 3, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 4, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 5, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 6, col) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL4\n\t    \n\t    var darkCount = 0;\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount; row++) {\n\t\t\t    if (qrCode.isDark(row, col) ) {\n\t\t\t\t    darkCount++;\n\t\t\t    }\n\t\t    }\n\t    }\n\t    \n\t    var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n\t    lostPoint += ratio * 10;\n\n\t    return lostPoint;\t\t\n    }\n};\n\nmodule.exports = QRUtil;\n"],"sourceRoot":""}